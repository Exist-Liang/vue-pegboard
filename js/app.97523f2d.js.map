{"version":3,"file":"js/app.97523f2d.js","mappings":"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","sources":["webpack://cos30043-project/./src/App.vue","webpack://cos30043-project/./src/App.vue?7ccd","webpack://cos30043-project/./src/data/widgetTypes.js","webpack://cos30043-project/./src/components/widgets/PomodoroWidget.vue","webpack://cos30043-project/./src/components/widgets/PomodoroWidget.vue?e545","webpack://cos30043-project/./src/components/widgets/TestWidget.vue","webpack://cos30043-project/./src/components/widgets/TestWidget.vue?9865","webpack://cos30043-project/./src/components/widgets/LoginWidget.vue","webpack://cos30043-project/./src/components/widgets/LoginWidget.vue?404c","webpack://cos30043-project/./src/components/widgets/WeatherWidget/WeatherWidget.vue","webpack://cos30043-project/./src/components/widgets/WeatherWidget/WeatherWidget.vue?34bb","webpack://cos30043-project/./src/components/widgets/WeatherWidget/WeatherWidgetContainer.vue","webpack://cos30043-project/./src/components/widgets/WeatherWidget/WeatherWidgetContainer.vue?b6b8","webpack://cos30043-project/./src/scripts/likedStore.js","webpack://cos30043-project/./src/components/widgets/FunFactWidget.vue","webpack://cos30043-project/./src/components/widgets/FunFactWidget.vue?4ba1","webpack://cos30043-project/./src/scripts/useClickPreview.js","webpack://cos30043-project/./src/components/widgets/WidgetSelectorWidget.vue","webpack://cos30043-project/./src/components/widgets/WidgetSelectorWidget.vue?9033","webpack://cos30043-project/./src/scripts/exportData.js","webpack://cos30043-project/./src/components/widgets/ImportExportWidget.vue","webpack://cos30043-project/./src/components/widgets/ImportExportWidget.vue?d446","webpack://cos30043-project/./src/assets/icon/iconRegistry.js","webpack://cos30043-project/./src/scripts/editorState.js","webpack://cos30043-project/./src/components/widgets/TextEditorWidget/TextEditorWidget.vue","webpack://cos30043-project/./src/components/widgets/TextEditorWidget/TextEditorWidget.vue?ab8c","webpack://cos30043-project/./src/components/widgets/TextEditorWidget/IndieTextWidget.vue","webpack://cos30043-project/./src/components/widgets/TextEditorWidget/IndieTextWidget.vue?c62b","webpack://cos30043-project/./src/components/widgets/registry.js","webpack://cos30043-project/./src/scripts/useGridPositioning.js","webpack://cos30043-project/./src/components/PegboardGrid.vue","webpack://cos30043-project/./src/components/PegboardGrid.vue?5d61","webpack://cos30043-project/./src/views/Dashboard.vue","webpack://cos30043-project/./src/views/Dashboard.vue?040e","webpack://cos30043-project/./src/views/stage1/Stage_1.vue","webpack://cos30043-project/./src/views/stage1/Stage_1.vue?6b41","webpack://cos30043-project/./src/views/stage1/LegacyHome.vue","webpack://cos30043-project/./src/views/stage1/LegacyHome.vue?8df6","webpack://cos30043-project/./src/views/stage1/News.vue","webpack://cos30043-project/./src/views/stage1/News.vue?ea80","webpack://cos30043-project/./src/views/stage1/About.vue","webpack://cos30043-project/./src/views/stage1/About.vue?bbc0","webpack://cos30043-project/./src/router/index.js","webpack://cos30043-project/./src/auth.js","webpack://cos30043-project/./src/scripts/custom directives/terminalCursor.js","webpack://cos30043-project/./src/scripts/custom directives/rubberButton.js","webpack://cos30043-project/./src/main.js","webpack://cos30043-project/webpack/bootstrap","webpack://cos30043-project/webpack/runtime/chunk loaded","webpack://cos30043-project/webpack/runtime/compat get default export","webpack://cos30043-project/webpack/runtime/define property getters","webpack://cos30043-project/webpack/runtime/global","webpack://cos30043-project/webpack/runtime/hasOwnProperty shorthand","webpack://cos30043-project/webpack/runtime/make namespace object","webpack://cos30043-project/webpack/runtime/publicPath","webpack://cos30043-project/webpack/runtime/jsonp chunk loading","webpack://cos30043-project/webpack/startup"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n      <div class=\"container-fluid\">\r\n        <a class=\"navbar-brand\" href=\"#\">My App</a>\r\n        <button\r\n          class=\"navbar-toggler\"\r\n          type=\"button\"\r\n          data-bs-toggle=\"collapse\"\r\n          data-bs-target=\"#navbarNav\"\r\n        >\r\n          <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n          <ul class=\"navbar-nav ms-auto\">\r\n            <ul class=\"navbar-nav ms-auto\">\r\n              <li class=\"nav-item\">\r\n                <router-link class=\"nav-link\" to=\"/\">Dashboard</router-link>\r\n              </li>\r\n              <li class=\"nav-item\">\r\n                <router-link class=\"nav-link\" to=\"/stage1\">Stage 1</router-link>\r\n              </li>\r\n            </ul>           \r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n\r\n    <router-view />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'App'\r\n}\r\n</script>\r\n\r\n<style>\r\nbody {\r\n  margin: 0;\r\n  font-family: Arial, sans-serif;\r\n}\r\n</style>\r\n","import { render } from \"./App.vue?vue&type=template&id=10eb8f2f\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=10eb8f2f&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export const widgetSizes = {\r\n    S: { w: 1, h: 1 },\r\n    L: { w: 2, h: 2 },\r\n    W: { w: 2, h: 1 },\r\n    T: { w: 1, h: 2 }\r\n  }","<template>\r\n    <div   \r\n    class=\"pomodoro-widget\"\r\n    :class=\"currentMode\"\r\n    :style=\"{ pointerEvents: props.dragLocked ? 'none' : 'auto' }\">\r\n      <!--  + emoji -->\r\n      <div class=\"center-area\">\r\n  <svg class=\"circle-timer\" viewBox=\"0 0 100 100\">\r\n    <circle class=\"background\" cx=\"50\" cy=\"50\" r=\"45\" />\r\n    <circle\r\n      class=\"progress\"\r\n      cx=\"50\"\r\n      cy=\"50\"\r\n      r=\"45\"\r\n      :stroke-dasharray=\"circumference\"\r\n      :stroke-dashoffset=\"progressOffset\"\r\n    />\r\n  </svg>\r\n\r\n  <transition name=\"emoji-fade\" mode=\"out-in\">\r\n  <div\r\n    class=\"emoji-overlay\"\r\n    :key=\"currentMode\"\r\n    :class=\"[emojiAnimation, emojiClass]\"\r\n    @animationend=\"emojiAnimation = ''\"\r\n  >\r\n    {{ currentMode === 'work' ? '' : '' }}\r\n  </div>\r\n</transition>\r\n</div>\r\n  \r\n      <div class=\"corner-controls\">\r\n  <button class=\"bottom-left\" v-if=\"isPaused\" @click=\"reset\" aria-label=\"Reset timer\">\r\n    <RotateCcw :size=\"20\" />\r\n    \r\n  </button>\r\n\r\n  <button class=\"bottom-right\" @click=\"toggleRun\" :aria-label=\"isRunning ? 'Pause timer' : 'Start timer'\">\r\n    <component :is=\"isRunning ? Pause : Play\" :size=\"20\" />\r\n  </button>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n<script setup>\r\nimport { ref, computed, onBeforeUnmount,onMounted } from 'vue'\r\nimport { Play, Pause, RotateCcw } from 'lucide-vue-next'\r\nconst totalTime = computed(() => currentMode.value === 'work' ? WORK_TIME : BREAK_TIME)\r\n\r\nconst emojiClass = computed(() => {\r\n  if (!isRunning.value) return ''\r\n  return currentMode.value === 'work' ? 'floating-emoji' : 'tilting-emoji'\r\n})\r\n\r\nconst MAX_SESSION_DURATION = (WORK_TIME + BREAK_TIME) * 1000\r\n\r\nconst props = defineProps({\r\n  dragLocked: Boolean\r\n})\r\n\r\n\r\n\r\nonMounted(() => {\r\n  if (Notification && Notification.permission !== 'granted') {\r\n    Notification.requestPermission()\r\n  }\r\n})\r\n\r\nconst WORK_TIME = 25 * 60\r\nconst BREAK_TIME = 5 * 60\r\n\r\nconst currentMode = ref('work')\r\nconst timeLeft = ref(WORK_TIME)\r\nconst isRunning = ref(false)\r\nconst isPaused = ref(false)\r\nconst emojiAnimation = ref('')\r\nlet timer = null\r\nlet sessionStart = 0\r\nlet sessionEnd = 0\r\nconst notified = ref(false)\r\n\r\nconst radius = 45\r\nconst circumference = 2 * Math.PI * radius\r\nconst progress = computed(() => {\r\n  const max = currentMode.value === 'work' ? WORK_TIME : BREAK_TIME\r\n  return (max - timeLeft.value) / max\r\n})\r\nconst progressOffset = computed(() => (1 - progress.value) * circumference)\r\n\r\n\r\n\r\nconst tick = () => {\r\n  if (!isRunning.value || isPaused.value) return\r\n\r\n  const now = Date.now()\r\n  const elapsedTotal = now - sessionStart  \r\n\r\n  if (elapsedTotal > MAX_SESSION_DURATION) {\r\n    reset()\r\n    return\r\n  }\r\n\r\n  const remaining = Math.max(0, Math.floor((sessionEnd - now) / 1000))\r\n  timeLeft.value = remaining               \r\n\r\n  if (remaining <= 0 && !notified.value) {\r\n    notified.value = true\r\n    notify(\r\n      currentMode.value === 'work'\r\n        ? ' Focus session complete! Take a well-deserved break!'\r\n        : ' Break is over! Time to start a new pomodoro!'\r\n    )\r\n    switchMode()\r\n  }\r\n}\r\n\r\nconst toggleRun = () => {\r\n  if (isRunning.value) {\r\n    pause()\r\n  } else if (isPaused.value) {\r\n    resume()\r\n  } else {\r\n    start()\r\n  }\r\n}\r\n\r\nconst start = () => {\r\n  const now = Date.now()\r\n  sessionStart = now\r\n  sessionEnd = now + totalTime.value * 1000\r\n\r\n  timeLeft.value = totalTime.value\r\n  isRunning.value = true\r\n  isPaused.value = false\r\n  notified.value = false\r\n\r\n  timer = setInterval(tick, 1000)\r\n}\r\n\r\nconst pause = () => {\r\n  isRunning.value = false\r\n  isPaused.value = true\r\n  clearInterval(timer)\r\n  emojiAnimation.value = 'pause-jump'\r\n}\r\n\r\nconst reset = () => {\r\n  clearInterval(timer)\r\n  isRunning.value = false\r\n  isPaused.value = false\r\n  currentMode.value = 'work'\r\n  timeLeft.value = WORK_TIME\r\n  emojiAnimation.value = 'reset-spin'\r\n}\r\n\r\nconst resume = () => {\r\n  const now = Date.now()\r\n  const elapsed = totalTime.value - timeLeft.value\r\n\r\n  sessionStart = now - elapsed * 1000\r\n  sessionEnd = now + timeLeft.value * 1000\r\n\r\n  isRunning.value = true\r\n  isPaused.value = false\r\n  notified.value = false\r\n\r\n  timer = setInterval(tick, 1000)\r\n}\r\n\r\nconst switchMode = () => {\r\n  currentMode.value = currentMode.value === 'work' ? 'break' : 'work'\r\n  start()\r\n}\r\n\r\nconst notify = (message) => {\r\n  if (!('Notification' in window)) return\r\n\r\n  if (Notification.permission === 'granted') {\r\n    new Notification('Pomodoro Reminder', {\r\n      body: message,\r\n      icon: ''\r\n    })\r\n  }\r\n}\r\n\r\n\r\n\r\nonBeforeUnmount(() => clearInterval(timer))\r\n</script>\r\n  \r\n<style scoped>\r\n.pomodoro-widget {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 16px;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  background: linear-gradient(to bottom right, #ff7e5f, #feb47b);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.pomodoro-widget.work {\r\n  background: linear-gradient(to bottom right, #ff7e5f, #feb47b);\r\n}\r\n.pomodoro-widget.break {\r\n  background: linear-gradient(to bottom right, #56ab2f, #a8e063);\r\n}\r\n\r\n.center-area {\r\n  position: relative;\r\n  width: 80%;\r\n  aspect-ratio: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-bottom: 8px;\r\n  margin-top: -18px;\r\n}\r\n\r\n.circle-timer {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\ncircle.background {\r\n  fill: none;\r\n  stroke: #ffffff40;\r\n  stroke-width: 5;\r\n}\r\n\r\ncircle.progress {\r\n  fill: none;\r\n  stroke: #ffffffcc;\r\n  stroke-width: 6;\r\n  stroke-linecap: round;\r\n  transform: rotate(-90deg);\r\n  transform-origin: 50% 50%;\r\n  transition: stroke-dashoffset 1s linear;\r\n}\r\n\r\n.emoji-overlay {\r\n  position: absolute;\r\n  font-size: 60px;\r\n  transform-origin: center;\r\n  transition: transform 0.3s ease;\r\n  z-index: 1;\r\n  margin-top: -4px;\r\n}\r\n.corner-controls {\r\n  position: absolute;\r\n  bottom: 8px;\r\n  left: 0;\r\n  right: 0;\r\n  height: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.bottom-left,\r\n.bottom-right {\r\n  position: absolute;\r\n  bottom: 8px;\r\n  background: rgba(255, 255, 255, 0.15);\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  padding: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: white;\r\n  cursor: pointer;\r\n  transition: background 0.3s ease, transform 0.2s;\r\n  pointer-events: auto;\r\n}\r\n\r\n.bottom-left {\r\n  left: 4px;\r\n  bottom: -4px;\r\n}\r\n.bottom-right {\r\n  right: 4px;\r\n  bottom: -4px;\r\n}\r\n\r\n.bottom-left:hover,\r\n.bottom-right:hover {\r\n  background: rgba(255, 255, 255, 0.3);\r\n  transform: scale(1.05);\r\n}\r\n\r\n.emoji-fade-enter-active,\r\n.emoji-fade-leave-active {\r\n  transition: opacity 0.3s ease;\r\n}\r\n.emoji-fade-enter-from,\r\n.emoji-fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n\r\n\r\n.pause-jump {\r\n  animation: jump 0.4s ease;\r\n}\r\n@keyframes jump {\r\n  0%   { transform: translateY(0); }\r\n  40%  { transform: translateY(-10px); }\r\n  100% { transform: translateY(0); }\r\n}\r\n\r\n.reset-spin {\r\n  animation: spin 0.8s ease;\r\n}\r\n@keyframes spin {\r\n  0%   { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n@keyframes float-emoji {\r\n  0%, 100% { transform: translateY(0); }\r\n  50% { transform: translateY(-8px); }\r\n}\r\n\r\n@keyframes tilt-emoji {\r\n  0%, 100% { transform: rotate(0deg); }\r\n  25% { transform: rotate(2deg); }\r\n  75% { transform: rotate(-2deg); }\r\n}\r\n\r\n.floating-emoji {\r\n  animation: float-emoji 2s ease-in-out infinite;\r\n}\r\n\r\n.tilting-emoji {\r\n  animation: tilt-emoji 1.5s ease-in-out infinite;\r\n}\r\n  </style>","import script from \"./PomodoroWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PomodoroWidget.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PomodoroWidget.vue?vue&type=style&index=0&id=65497bde&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-65497bde\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"test-widget\">\r\n    <span>{{ displayText }}</span>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue'\r\n\r\nconst props = defineProps({\r\n  id: String,\r\n  type: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  sizeKey: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  x: Number,\r\n  y: Number,\r\n  w: {\r\n    type: Number,\r\n    required: true\r\n  },\r\n  h: {\r\n    type: Number,\r\n    required: true\r\n  }\r\n})\r\n\r\n\r\nconst displayText = computed(() => `${props.type} (${props.sizeKey})`)\r\n</script>\r\n\r\n<style scoped>\r\n.test-widget {\r\n  background-color: black;\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 4px;\r\n  font-weight: bold;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>","import script from \"./TestWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TestWidget.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TestWidget.vue?vue&type=style&index=0&id=df815c14&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-df815c14\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"login-widget\" :class=\"[backgroundClass]\">\r\n    <div class=\"progress-overlay\" :style=\"progressBarStyle\"></div>\r\n    <div class=\"widget-content\" v-show=\"!showLockEmoji && !showSuccessEmoji\">\r\n      <!--  -->\r\n      <template v-if=\"mode === 'login'\">\r\n        <input v-model=\"loginUsername\" placeholder=\"Username\" />\r\n        <input v-model=\"loginPassword\" type=\"password\" placeholder=\"Password\" />\r\n        <div class=\"btn-group\">\r\n            <button\r\n            :class=\"['primary', failureButton === 'login' ? 'fail' : '']\"\r\n            :disabled=\"isLocked\"\r\n             @click=\"handleLogin\">\r\n                {{ failureButton === 'login' ? '' : 'Login' }}\r\n            </button>\r\n          <button class=\"secondary\" @click=\"mode = 'register-step1'\">Register</button>\r\n        </div>\r\n      </template>\r\n  \r\n<!--  1 -->\r\n<template v-else-if=\"mode === 'register-step1'\">\r\n  <input v-model=\"registerUsername\" placeholder=\"Enter an account\" />\r\n  <p class=\"helper-text\" :class=\"{ 'error-text': failureButton === 'register-step1' }\">\r\n    {{\r\n      failureButton === 'register-step1'\r\n        ? failureMessage\r\n        : 'Enter 816 characters using letters and numbers only.'\r\n    }}\r\n  </p>\r\n  <div class=\"btn-group\">\r\n    <button class=\"secondary\" @click=\"mode = 'login'\">Back</button>\r\n    <button\r\n      :class=\"['primary', failureButton === 'register-step1' ? 'fail' : '']\"\r\n      :disabled=\"isLocked\"\r\n      @click=\"goToRegisterStep2\"\r\n    >\r\n      {{ failureButton === 'register-step1' ? '' : 'Next' }}\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<!--  2 -->\r\n<template v-else-if=\"mode === 'register-step2'\">\r\n  <input v-model=\"nickname\" placeholder=\"Enter your nickname\" />\r\n  <p class=\"helper-text\" :class=\"{ 'error-text': failureButton === 'register-step2' }\">\r\n    {{ failureButton === 'register-step2' \r\n        ? ' Nickname must be 412 characters' \r\n        : 'Enter a nickname of 412 characters.' }}\r\n  </p>\r\n  <div class=\"btn-group\">\r\n    <button class=\"secondary\" @click=\"mode = 'register-step1'\">Back</button>\r\n    <button\r\n      :class=\"['primary', failureButton === 'register-step2' ? 'fail' : '']\"\r\n      :disabled=\"isLocked\"\r\n      @click=\"goToRegisterStep3\"\r\n    >\r\n      {{ failureButton === 'register-step2' ? '' : 'Next' }}\r\n    </button>\r\n  </div>\r\n  \r\n</template>\r\n\r\n<!--  3 -->\r\n<template v-else-if=\"mode === 'register-step3'\">\r\n  <input v-model=\"registerPassword\" type=\"password\" placeholder=\"Create a password\" />\r\n  <p class=\"helper-text\" :class=\"{ 'error-text': failureButton === 'register-step3' }\">\r\n    {{ failureButton === 'register-step3' \r\n        ? ' Password must include uppercase, lowercase and number, 816 characters' \r\n        : 'Use 816 characters with uppercase, lowercase and numbers.' }}\r\n  </p>\r\n  <div class=\"btn-group\">\r\n    <button class=\"secondary\" @click=\"mode = 'register-step2'\">Back</button>\r\n    <button\r\n      :class=\"['primary', failureButton === 'register-step3' ? 'fail' : '']\"\r\n      :disabled=\"isLocked\"\r\n      @click=\"goToRegisterStep4\"\r\n    >\r\n      {{ failureButton === 'register-step3' ? '' : 'Next' }}\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<!--  4 -->\r\n<template v-else-if=\"mode === 'register-step4'\">\r\n  <input v-model=\"confirmPassword\" type=\"password\" placeholder=\"Re-enter your password\" />\r\n  <p class=\"helper-text\" :class=\"{ 'error-text': failureButton === 'register-step4' }\">\r\n    {{ failureButton === 'register-step4' \r\n        ? ' Passwords do not match' \r\n        : 'Please repeat the password exactly as entered above.' }}\r\n  </p>\r\n  <div class=\"btn-group\">\r\n    <button class=\"secondary\" @click=\"mode = 'register-step3'\">Back</button>\r\n    <button\r\n      :class=\"['primary', failureButton === 'register-step4' ? 'fail' : '']\"\r\n      :disabled=\"isLocked\"\r\n      @click=\"handleRegister\"\r\n    >\r\n      {{ failureButton === 'register-step4' ? '' : 'Register' }}\r\n    </button>\r\n  </div>\r\n</template>\r\n  \r\n      <!--  -->\r\n      <template v-else-if=\"mode === 'welcome'\">\r\n  <div class=\"welcome-box\">\r\n    <p>Welcome, {{ auth.currentNickname }}!</p>\r\n    <button class=\"logout-btn\" @click=\"logout\">Logout</button>\r\n  </div>\r\n    </template>\r\n    </div>\r\n\r\n    <transition name=\"emoji-fade\">\r\n  <div\r\n    class=\"success-emoji\"\r\n    :class=\"{ gold: showLockEmoji }\"\r\n    v-if=\"showSuccessEmoji || showLockEmoji\"\r\n  >\r\n    {{ showLockEmoji ? lockEmoji : '' }}\r\n  </div>\r\n</transition>\r\n  </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, computed, inject, onMounted, onUnmounted } from 'vue'\r\n\r\n  const auth = inject('auth')\r\n  const mode = ref('login') \r\n  const loginUsername = ref('')\r\n  const loginPassword = ref('')\r\n  const registerUsername = ref('')\r\n  const nickname = ref('')\r\n  const registerPassword = ref('')\r\n  const confirmPassword = ref('')\r\n  const isLocked = ref(false)\r\n  const failureButton = ref('')\r\n  const failureMessage = ref('')\r\n  const showSuccessEmoji = ref(false)\r\n  const showLockEmoji = ref(false)\r\n  const lockEmoji = ref('')\r\n\r\n  const isValidUsername = (name) => /^[a-zA-Z0-9]{8,16}$/.test(name)\r\n\r\n  const isValidNickname = (nick) => nick.length >= 4 && nick.length <= 12\r\n\r\n  const isValidPassword = (pw) => {\r\n  return (\r\n    pw.length >= 8 &&\r\n    pw.length <= 16 &&\r\n    /[A-Z]/.test(pw) &&\r\n    /[a-z]/.test(pw) &&\r\n    /[0-9]/.test(pw)\r\n  )\r\n}\r\n\r\nconst backgroundClass = computed(() => {\r\n  if (mode.value === 'login') return 'bg-login'\r\n  if (mode.value.startsWith('register-step')) return 'bg-register'\r\n  if (mode.value === 'welcome') return 'bg-welcome'\r\n  return ''\r\n})\r\n\r\nconst progressBarStyle = computed(() => {\r\n  let width = '0%'\r\n\r\n  switch (mode.value) {\r\n    case 'register-step1':\r\n      width = '25%'\r\n      break\r\n    case 'register-step2':\r\n      width = '50%'\r\n      break\r\n    case 'register-step3':\r\n      width = '75%'\r\n      break\r\n    case 'register-step4':\r\n      width = '100%'\r\n      break\r\n  }\r\n\r\n  return {\r\n    width,\r\n  }\r\n})\r\n\r\n\r\nconst triggerFailure = (buttonKey, message = '') => {\r\n  failureButton.value = buttonKey\r\n  failureMessage.value = message\r\n  isLocked.value = true\r\n\r\n  setTimeout(() => {\r\n    failureButton.value = ''\r\n    failureMessage.value = ''\r\n    isLocked.value = false\r\n  }, 3000)\r\n}\r\n  \r\nconst goToRegisterStep2 = () => {\r\n  const users = JSON.parse(localStorage.getItem('users') || '{}')\r\n\r\n  if (!isValidUsername(registerUsername.value)) {\r\n    triggerFailure(\r\n      'register-step1',\r\n      ' Username must be 816 characters (letters/numbers only)'\r\n    )\r\n    return\r\n  }\r\n\r\n  if (users[registerUsername.value]) {\r\n    triggerFailure(\r\n      'register-step1',\r\n      ' This username is already taken'\r\n    )\r\n    return\r\n  }\r\n\r\n  mode.value = 'register-step2'\r\n}\r\n\r\n// \r\nconst goToRegisterStep3 = () => {\r\n  if (!isValidNickname(nickname.value)) {\r\n    triggerFailure(\r\n      'register-step2',\r\n      ' Nickname must be 412 characters'\r\n    )\r\n    return\r\n  }\r\n  mode.value = 'register-step3'\r\n}\r\n\r\nconst goToRegisterStep4 = () => {\r\n  if (!isValidPassword(registerPassword.value)) {\r\n    triggerFailure(\r\n      'register-step3',\r\n      ' Password must be 816 characters and include uppercase, lowercase letters, and a number'\r\n    )\r\n    return\r\n  }\r\n\r\n  mode.value = 'register-step4'\r\n}\r\n\r\nconst handleRegister = () => {\r\n  if (!confirmPassword.value) {\r\n    triggerFailure('register-step4', ' Please re-enter your password')\r\n    return\r\n  }\r\n\r\n  if (registerPassword.value !== confirmPassword.value) {\r\n    triggerFailure('register-step4', ' Passwords do not match')\r\n    return\r\n  }\r\n\r\n  const users = JSON.parse(localStorage.getItem('users') || '{}')\r\n\r\n  //   nickname  password\r\n  users[registerUsername.value] = {\r\n    password: registerPassword.value,\r\n    nickname: nickname.value\r\n  }\r\n\r\n  localStorage.setItem('users', JSON.stringify(users))\r\n\r\n\r\n  showSuccessEmoji.value = true\r\n\r\n  setTimeout(() => {\r\n    showSuccessEmoji.value = false\r\n    mode.value = 'login'\r\n  }, 3000)\r\n}\r\n\r\n\r\nconst handleLogin = () => {\r\n  if (!loginUsername.value || !loginPassword.value) {\r\n    triggerFailure('login')\r\n    return\r\n  }\r\n\r\n  const users = JSON.parse(localStorage.getItem('users') || '{}')\r\n  const userRecord = users[loginUsername.value]\r\n\r\n  if (!userRecord || userRecord.password !== loginPassword.value) {\r\n    triggerFailure('login')\r\n    return\r\n  }\r\n\r\n  auth.login(loginUsername.value)\r\n  auth.setNickname(userRecord.nickname) \r\n\r\n  mode.value = 'welcome'\r\n  console.log(` ${loginUsername.value}`)\r\n\r\n  showLockEmoji.value = true\r\n  lockEmoji.value = ''\r\n  setTimeout(() => {\r\n    lockEmoji.value = ''\r\n  }, 1000)\r\n\r\n  setTimeout(() => {\r\n    showLockEmoji.value = false\r\n  }, 2000)\r\n}\r\n\r\n\r\nconst logout = () => {\r\n  lockEmoji.value = ''\r\n  showLockEmoji.value = true\r\n\r\n  setTimeout(() => {\r\n    lockEmoji.value = ''\r\n  }, 1000)\r\n\r\n  setTimeout(() => {\r\n    auth.logout()\r\n    showLockEmoji.value = false\r\n    mode.value = 'login'\r\n  }, 2000)\r\n  console.log(' You have logged out.')\r\n}\r\n\r\nonMounted(() => {\r\n  //  \r\n  if (auth.isLoggedIn.value) {\r\n    mode.value = 'welcome'\r\n  }\r\n\r\n  //  \r\n  const handleImportRefresh = () => {\r\n    if (auth.isLoggedIn.value) {\r\n      mode.value = 'welcome'\r\n    }\r\n  }\r\n\r\n  window.addEventListener('dashboard-imported', handleImportRefresh)\r\n\r\n  onUnmounted(() => {\r\n    window.removeEventListener('dashboard-imported', handleImportRefresh)\r\n  })\r\n})\r\n  </script>\r\n  \r\n  <style scoped>\r\n.login-widget {\r\n  position: relative;\r\n  overflow: hidden;\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\r\n  padding: 16px;\r\n  font-size: 14px;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  transition: background-color 0.5s ease;\r\n}\r\n\r\n  .widget-content {\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n  \r\n  label {\r\n    font-weight: 600;\r\n    margin-top: 8px;\r\n    font-size: 13px;\r\n    color: #374151;\r\n  }\r\n  \r\n  .input-container {\r\n    position: relative;\r\n    margin-bottom: 4px;\r\n  }\r\n  \r\n  input {\r\n    width: 100%;\r\n    padding: 6px 10px;\r\n    margin-top: 2px;\r\n    margin-bottom: 4px;\r\n    border: 1px solid #cbd5e1;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n  }\r\n  \r\n  .btn-group {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    gap: 6px;\r\n    margin-top: 8px;\r\n  }\r\n  \r\n  button {\r\n    flex: 1;\r\n    padding: 8px;\r\n    border: none;\r\n    border-radius: 6px;\r\n    background-color: #3b82f6;\r\n    color: white;\r\n    font-weight: bold;\r\n    cursor: pointer;\r\n  }\r\n  \r\n  button.secondary {\r\n    background-color: #e5e7eb;\r\n    color: #333;\r\n  }\r\n  \r\n  button.fail {\r\n  background-color: #dc2626 !important;\r\n  color: #fff;\r\n  animation: bounce-on-error 0.4s ease;\r\n  }\r\n\r\n  @keyframes bounce-on-error {\r\n  0%   { transform: translateY(0); }\r\n  20%  { transform: translateY(-5px); }\r\n  40%  { transform: translateY(0); }\r\n  60%  { transform: translateY(-3px); }\r\n  100% { transform: translateY(0); }\r\n  }\r\n\r\n\r\n\r\n  \r\n  .welcome-box {\r\n    text-align: center;\r\n    padding-top: 20px;\r\n  }\r\n  \r\n  .logout-btn {\r\n    margin-top: 12px;\r\n    padding: 10px 16px;\r\n    background-color: #ef4444;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 6px;\r\n    font-weight: bold;\r\n    cursor: pointer;\r\n  }\r\n  \r\n  .logout-btn:hover {\r\n    background-color: #dc2626;\r\n  }\r\n  \r\n  .helper-text {\r\n  font-size: 12px;\r\n  color: #6b7280; \r\n  margin-top: 4px;\r\n  margin-bottom: 8px;\r\n  min-height: 2.4em;\r\n  line-height: 1.2;\r\n}\r\n.error-text {\r\n  color: #dc2626; \r\n}\r\n\r\n.bg-login {\r\n  background-color: #c2e4fb; \r\n}\r\n\r\n.bg-register {\r\n  background-color: #ffffff; \r\n}\r\n\r\n.progress-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  background-color: #b2f1d3; \r\n  z-index: 0;\r\n  transition: width 0.6s ease;\r\n  width: 0%\r\n}\r\n\r\n.success-emoji {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%) scale(1);\r\n  font-size: 48px;\r\n  background-color: #d1fae5;\r\n  border-radius: 50%;\r\n  padding: 20px;\r\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\r\n  z-index: 10;\r\n  pointer-events: none;\r\n}\r\n.success-emoji.gold {\r\n  background-color: #fef3c7; \r\n}\r\n\r\n/* Vue transition hooks */\r\n.emoji-fade-enter-active,\r\n.emoji-fade-leave-active {\r\n  transition: all 0.8s ease;\r\n}\r\n.emoji-fade-enter-from,\r\n.emoji-fade-leave-to {\r\n  opacity: 0;\r\n  transform: translate(-50%, -50%) scale(0.4);\r\n}\r\n.emoji-fade-enter-to,\r\n.emoji-fade-leave-from {\r\n  opacity: 1;\r\n  transform: translate(-50%, -50%) scale(1);\r\n}\r\n\r\n.bg-welcome {\r\n  background-color: #fde58f; \r\n  transition: background-color 0.5s ease;\r\n}\r\n\r\n  </style>\r\n  ","import script from \"./LoginWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LoginWidget.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LoginWidget.vue?vue&type=style&index=0&id=42be67a1&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-42be67a1\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"weather-widget\" :class=\"weatherTheme\">\r\n    <div v-if=\"loading\" class=\"weather-loading\">Loading...</div>\r\n    <div v-else-if=\"error\" class=\"weather-error\">{{ error }}</div>\r\n    <div class=\"weather-content\" :style=\"textColorStyle\">\r\n      <div class=\"weather-updated\">Updated: {{ lastUpdated }}</div>\r\n      <div class=\"weather-emoji\">{{ weatherEmoji }}</div>\r\n      <div class=\"weather-temp\">{{ temperature }}C</div>\r\n      <div class=\"weather-desc\">{{ description }}</div>\r\n      <div class=\"weather-city\">{{ city }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, computed } from 'vue'\r\n\r\nconst props = defineProps({\r\n  city: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\n\r\nconst city = computed(() => props.city)\r\nconst API_KEY = '46c641c991500a16bf25a469631b4a5a'\r\n\r\nconst temperature = ref('')\r\nconst description = ref('')\r\nconst weatherEmoji = ref('')\r\nconst weatherTheme = ref('default')\r\nconst loading = ref(true)\r\nconst error = ref('')\r\nconst lastUpdated = ref('')\r\n\r\nconst fetchWeather = async () => {\r\n  if (!city.value) return\r\n  loading.value = true\r\n  try {\r\n    const res = await fetch(\r\n      `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(city.value)}&appid=${API_KEY}&units=metric`\r\n    )\r\n    if (!res.ok) throw new Error('Failed to fetch weather data')\r\n    const data = await res.json()\r\n\r\n    const main = data.weather[0].main\r\n    temperature.value = Math.round(data.main.temp)\r\n    description.value = main\r\n    weatherEmoji.value = mapWeatherToEmoji(main)\r\n    weatherTheme.value = mapWeatherToTheme(main)\r\n\r\n    const now = new Date()\r\n    lastUpdated.value = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n  } catch (err) {\r\n    error.value = ' Error fetching weather'\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n//  \r\nwatch(city, () => {\r\n  fetchWeather()\r\n}, { immediate: true })\r\n\r\nsetInterval(fetchWeather, 30 * 60 * 1000)\r\n\r\nconst mapWeatherToEmoji = (main) => {\r\n  switch (main) {\r\n    case 'Clear': return ''\r\n    case 'Clouds': return ''\r\n    case 'Rain': return ''\r\n    case 'Drizzle': return ''\r\n    case 'Thunderstorm': return ''\r\n    case 'Snow': return ''\r\n    case 'Mist': return ''\r\n    default: return ''\r\n  }\r\n}\r\n\r\nconst mapWeatherToTheme = (main) => {\r\n  switch (main) {\r\n    case 'Clear': return 'sunny'\r\n    case 'Clouds': return 'cloudy'\r\n    case 'Rain':\r\n    case 'Drizzle': return 'rainy'\r\n    case 'Thunderstorm': return 'stormy'\r\n    case 'Snow': return 'snowy'\r\n    default: return 'default'\r\n  }\r\n}\r\n\r\nconst textColorStyle = computed(() => {\r\n  const theme = weatherTheme.value\r\n  switch (theme) {\r\n    case 'sunny': return { color: '#3e2723' }      // \r\n    case 'cloudy': return { color: '#263238' }     // \r\n    case 'rainy': return { color: '#ffffff' }      // \r\n    case 'snowy': return { color: '#37474f' }      // \r\n    case 'stormy': return { color: '#f5f5f5' }      // \r\n    case 'default': return { color: '#eeeeee' }    // \r\n    default: return { color: '#ffffff' }\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.weather-widget {\r\n  min-width: 120px;\r\n  max-width: 120px;\r\n  max-height: 240px;\r\n  border-radius: 12px;\r\n  padding: 12px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n  color: white;\r\n  text-align: center;\r\n  font-family: sans-serif;\r\n  background: inherit;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.weather-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.weather-widget.sunny {\r\n  background: linear-gradient(to top right, #fbc02d, #ff9800);\r\n}\r\n.weather-widget.cloudy {\r\n  background: linear-gradient(to top right, #90a4ae, #cfd8dc);\r\n}\r\n.weather-widget.rainy {\r\n  background: linear-gradient(to top right, #4fc3f7, #0288d1);\r\n}\r\n.weather-widget.snowy {\r\n  background: linear-gradient(to top right, #e0f7fa, #b2ebf2);\r\n}\r\n.weather-widget.stormy {\r\n  background: linear-gradient(to top right, #616161, #212121);\r\n}\r\n.weather-widget.default {\r\n  background: linear-gradient(to top right, #bdbdbd, #757575);\r\n}\r\n\r\n.weather-emoji {\r\n  font-size: 2.4rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n.weather-temp {\r\n  font-size: 1.5rem;\r\n  font-weight: bold;\r\n}\r\n.weather-desc {\r\n  font-size: 1rem;\r\n  margin-top: 0.2rem;\r\n}\r\n.weather-city {\r\n  font-size: 0.85rem;\r\n  opacity: 0.85;\r\n  margin-top: 0.25rem;\r\n}\r\n.weather-updated {\r\n  font-size: 0.7rem;\r\n  opacity: 0.7;\r\n  margin-top: 0.3rem;\r\n}\r\n\r\n.weather-loading,\r\n.weather-error {\r\n  font-size: 1rem;\r\n  color: #fff;\r\n}\r\n</style>","import script from \"./WeatherWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WeatherWidget.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WeatherWidget.vue?vue&type=style&index=0&id=57ea3da3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-57ea3da3\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"weather-container\">\r\n    <div class=\"background-container\">\r\n      <div\r\n        v-for=\"(theme, index) in bgThemes\"\r\n        :key=\"theme\"\r\n        :class=\"['background-layer', theme]\"\r\n        :style=\"{ opacity: currentBgIndex === index ? 1 : 0 }\"\r\n      ></div>\r\n    </div>\r\n\r\n    <div class=\"weather-main\">\r\n      <transition name=\"fade-slide\" mode=\"out-in\">\r\n        <component\r\n          v-if=\"!hideUI && cities.length > 0\"\r\n          :is=\"WeatherWidget\"\r\n          :key=\"cities[currentIndex]\"\r\n          :city=\"cities[currentIndex]\"\r\n          class=\"weather-widget-wrapper\"\r\n        />\r\n        <div v-else-if=\"!hideUI\" class=\"empty-panel\">\r\n        </div>\r\n      </transition>\r\n    </div>\r\n\r\n    <div class=\"bottom-controls\">\r\n      <div class=\"city-indicators\" v-show=\"!hideUI && cities.length > 1\">\r\n        <span\r\n          v-for=\"(c, i) in cities\"\r\n          :key=\"c\"\r\n          :class=\"{ dot: true, active: i === currentIndex }\"\r\n          :style=\"{ backgroundColor: i === currentIndex ? 'white' : nextColor }\"\r\n        ></span>\r\n      </div>\r\n\r\n      <div class=\"control-row\">\r\n        <div class=\"switch-buttons\" v-show=\"!hideUI && cities.length > 1\">\r\n          <button @click=\"prevCity\" aria-label=\"Previous city\" :style=\"{ backgroundColor: nextColor }\">\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n              <path d=\"M15 18l-6-6 6-6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n            </svg>\r\n          </button>\r\n          <button @click=\"nextCity\" aria-label=\"Next city\" :style=\"{ backgroundColor: nextColor }\">\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n              <path d=\"M9 6l6 6-6 6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        <button\r\n  class=\"settings-button\"\r\n  @click=\"toggleSettings\"\r\n  @mouseenter=\"hovered = true\"\r\n  @mouseleave=\"hovered = false\"\r\n  :style=\"{ backgroundColor: nextColor }\"\r\n  aria-label=\"Open settings\"\r\n>\r\n          <transition name=\"icon-fade\" mode=\"out-in\">\r\n            <svg v-if=\"!hovered\" key=\"menu\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n              <path d=\"M4 6h16M4 12h16M4 18h16\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n            </svg>\r\n            <svg v-else key=\"gear\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n              <path d=\"M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z\" stroke=\"currentColor\" stroke-width=\"2\"/>\r\n              <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.08a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.08a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.08a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z\" stroke=\"currentColor\" stroke-width=\"2\"/>\r\n            </svg>\r\n          </transition>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <transition name=\"panel-fade\">\r\n      <div v-if=\"showSettings\" class=\"settings-panel\">\r\n        <div class=\"add-row\">\r\n          <input\r\n            v-model=\"newCity\"\r\n            placeholder=\"Enter city name\"\r\n            :disabled=\"cities.length >= 3\"\r\n            class=\"add-input\"\r\n          />\r\n          <div class=\"add-controls\">\r\n            <button\r\n              @click=\"addCity\"\r\n              :disabled=\"cities.length >= 3\"\r\n              class=\"add-btn\"\r\n              aria-label=\"Add city\"\r\n            >\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path d=\"M12 5v14m-7-7h14\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n              </svg>\r\n            </button>\r\n\r\n            <button class=\"eye-toggle\" @click=\"hideUI = !hideUI\" aria-label=\"Toggle UI visibility\">\r\n              <transition name=\"icon-fade\" mode=\"out-in\">\r\n                <svg v-if=\"!hideUI\" key=\"eye\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                  <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8S1 12 1 12z\" stroke=\"#555\" stroke-width=\"2\"/>\r\n                  <circle cx=\"12\" cy=\"12\" r=\"3\" fill=\"#555\"/>\r\n                </svg>\r\n                <svg v-else key=\"eye-off\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                  <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8S1 12 1 12z\" stroke=\"#555\" stroke-width=\"2\"/>\r\n                  <line x1=\"4\" y1=\"4\" x2=\"20\" y2=\"20\" stroke=\"#555\" stroke-width=\"2\"/>\r\n                </svg>\r\n              </transition>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <p class=\"error-msg\">{{ errorMsg || '\\u00A0' }}</p>\r\n        <ul>\r\n          <transition-group name=\"fade-slide\" tag=\"ul\" class=\"city-list\">\r\n            <li v-for=\"(city, i) in cities\" :key=\"city\" class=\"city-item\">\r\n              <button class=\"delete-btn\" @click=\"removeCity(i)\" aria-label=\"Delete city\">\r\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                  <circle cx=\"12\" cy=\"12\" r=\"11\" fill=\"#f44336\"/>\r\n                  <path d=\"M15 9L9 15M9 9l6 6\" stroke=\"#fff\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n                </svg>\r\n              </button>\r\n              <span class=\"city-name\">{{ city }}</span>\r\n            </li>\r\n          </transition-group>\r\n        </ul>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted, watch, computed, inject } from 'vue'\r\n  import WeatherWidget from './WeatherWidget.vue'\r\n  import '@/assets/css/transitions.css'\r\n  \r\n  const auth = inject('auth')\r\n  const currentUser = computed(() => auth?.currentUser.value || '')\r\n  const newCity = ref('')\r\n  const currentIndex = ref(0)\r\n  const showSettings = ref(false)\r\n  const errorMsg = ref('')\r\n  const bgThemes = ['sunny', 'cloudy', 'rainy', 'snowy', 'stormy', 'default']\r\n  const themeColors = ['#fbc02d', '#90a4ae', '#4fc3f7', '#e0f7fa', '#616161', '#bdbdbd']\r\n  const currentBgIndex = ref(0)\r\n  const isLoading = ref(false)\r\n  const hovered = ref(false)\r\n  const hideUI = ref(false)\r\n  \r\n  const nextColor = computed(() => {\r\n    const nextIndex = (currentBgIndex.value + 1) % themeColors.length\r\n    return themeColors[nextIndex]\r\n  })\r\n  \r\n  onMounted(() => {\r\n    setInterval(() => {\r\n      currentBgIndex.value = (currentBgIndex.value + 1) % bgThemes.length\r\n    }, 4000)\r\n  })\r\n  \r\n  const STORAGE_KEY = computed(() => `weather_widget_cities_user_${currentUser.value}`)\r\n  const cities = ref([])\r\n  \r\n  const loadCities = () => {\r\n    const stored = localStorage.getItem(STORAGE_KEY.value)\r\n    cities.value = stored ? JSON.parse(stored) : []\r\n  }\r\n  \r\n  const saveCities = () => {\r\n    localStorage.setItem(STORAGE_KEY.value, JSON.stringify(cities.value))\r\n  }\r\n  \r\n  watch(currentUser, loadCities)\r\n  watch(cities, saveCities, { deep: true })\r\n  \r\n  onMounted(() => {\r\n    if (currentUser.value) loadCities()\r\n  })\r\n  \r\n  const toggleSettings = () => {\r\n    showSettings.value = !showSettings.value\r\n  }\r\n  \r\n  const prevCity = () => {\r\n    isLoading.value = true\r\n    currentIndex.value = (currentIndex.value - 1 + cities.value.length) % cities.value.length\r\n    setTimeout(() => (isLoading.value = false), 1000)\r\n  }\r\n  \r\n  const nextCity = () => {\r\n    isLoading.value = true\r\n    currentIndex.value = (currentIndex.value + 1) % cities.value.length\r\n    setTimeout(() => (isLoading.value = false), 1000)\r\n  }\r\n  \r\n  const removeCity = (index) => {\r\n    cities.value.splice(index, 1)\r\n    if (cities.value.length === 0) {\r\n      currentIndex.value = 0\r\n      showSettings.value = true\r\n    } else if (currentIndex.value >= cities.value.length) {\r\n      currentIndex.value = cities.value.length - 1\r\n    }\r\n  }\r\n  const isValidInput = (name) => {\r\n  const trimmed = name.trim()\r\n  return /^[A-Za-z\\s]{2,30}$/.test(trimmed) \r\n}\r\n  \r\n  const addCity = async () => {\r\n    const name = newCity.value.trim()\r\n    if (!name || cities.value.includes(name) || !isValidInput(name)) {\r\n  errorMsg.value = ' Invalid city name'\r\n  return\r\n}\r\n    const valid = await validateCity(name)\r\n    if (valid) {\r\n      cities.value.push(name)\r\n      newCity.value = ''\r\n      errorMsg.value = ''\r\n    } else {\r\n      errorMsg.value = ' City not found'\r\n    }\r\n  }\r\n  \r\n  const validateCity = async (name) => {\r\n    const res = await fetch(\r\n      `https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(name)}&limit=1&appid=46c641c991500a16bf25a469631b4a5a`\r\n    )\r\n    const data = await res.json()\r\n    return data.length > 0\r\n  }\r\n  </script>\r\n\r\n<style scoped>\r\n.weather-container {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  z-index: 1;\r\n}\r\n\r\n.weather-main {\r\n  flex: 1;\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.bottom-controls {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n  margin-bottom: 6px;\r\n  min-height: 65px;\r\n}\r\n\r\n.city-indicators {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 6px;\r\n  margin-bottom: 4px;\r\n  height: 12px;\r\n}\r\n\r\n.dot {\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255, 0.5);\r\n}\r\n\r\n.dot.active {\r\n  background: white;\r\n}\r\n\r\n.control-row {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 4px 8px;\r\n  box-sizing: border-box;\r\n  min-height: 35px;\r\n}\r\n\r\n.switch-buttons {\r\n  display: flex;\r\n  gap: 4px;\r\n}\r\n\r\n.switch-buttons button {\r\n  border: none;\r\n  border-radius: 8px;\r\n  padding: 6px;\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);\r\n  cursor: pointer;\r\n  transition: transform 0.2s ease, background 0.3s ease;\r\n}\r\n\r\n.switch-buttons button:hover {\r\n  background: white;\r\n  transform: scale(1.1);\r\n}\r\n\r\n.switch-buttons svg {\r\n  width: 18px;\r\n  height: 18px;\r\n  stroke: #333;\r\n}\r\n\r\n.settings-button {\r\n  position: absolute;\r\n  bottom: 12px;\r\n  right: -20px;\r\n  width: 36px;\r\n  height: 36px;\r\n  background-color: rgba(255, 255, 255, 0.6);\r\n  border: none;\r\n  border-radius: 50%;\r\n  padding: 0;\r\n  cursor: pointer;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.settings-button:hover {\r\n  right: 8px;\r\n}\r\n\r\n.settings-button svg {\r\n  width: 20px;\r\n  height: 20px;\r\n  transition: transform 0.2s ease;\r\n}\r\n\r\n.settings-panel {\r\n  position: absolute;\r\n  top: 20px;\r\n  right: 8px;\r\n  background: white;\r\n  padding: 8px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);\r\n  z-index: 10;\r\n  width: 90%;\r\n  max-width: 200px;\r\n  font-size: 0.85rem;\r\n  box-sizing: border-box;\r\n  overflow: hidden;\r\n}\r\n\r\n.settings-panel ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0 0 8px 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.settings-panel li {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  gap: 6px;\r\n  font-size: 0.75rem;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.settings-panel li button {\r\n  background: none;\r\n  border: none;\r\n  font-size: 0.8rem;\r\n  color: #c00;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  line-height: 1;\r\n}\r\n\r\n.city-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  font-size: 0.9rem;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  max-width: 100%;\r\n}\r\n\r\n.city-name {\r\n  flex: 1;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.city-list {\r\n  padding: 0;\r\n  margin: 0;\r\n  list-style: none;\r\n}\r\n\r\n.settings-panel input {\r\n  width: 100%;\r\n  padding: 4px;\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.settings-panel button {\r\n  margin-top: 4px;\r\n  padding: 4px 6px;\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.add-row {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.add-input {\r\n  width: 100%;\r\n  padding: 4px 6px;\r\n  font-size: 0.85rem;\r\n  border: 1px solid #ccc;\r\n  border-radius: 6px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.add-controls {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: 4px;\r\n}\r\n\r\n.add-btn,\r\n.eye-toggle {\r\n  background-color: rgba(255, 255, 255, 0.6);\r\n  border: none;\r\n  padding: 6px;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.add-btn svg {\r\n  stroke: white;\r\n}\r\n\r\n.add-btn:disabled {\r\n  background-color: #90a4ae;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.empty-panel {\r\n  padding: 1rem;\r\n  text-align: center;\r\n  font-size: 0.95rem;\r\n  opacity: 0.85;\r\n}\r\n\r\n.error-msg {\r\n  min-height: 2em;\r\n  font-size: 0.75rem;\r\n  color: red;\r\n  margin: 2px 0 6px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.background-container {\r\n  position: absolute;\r\n  inset: 0;\r\n  z-index: -1;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  pointer-events: none;\r\n}\r\n\r\n.background-layer {\r\n  position: absolute;\r\n  inset: 0;\r\n  transition: opacity 1.5s ease-in-out;\r\n  opacity: 0;\r\n}\r\n\r\n.delete-btn {\r\n  background: transparent;\r\n  border: none;\r\n  padding: 0;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.delete-btn svg {\r\n  transition: transform 0.2s ease;\r\n}\r\n\r\n.delete-btn:hover svg {\r\n  transform: scale(1.1);\r\n}\r\n\r\n.background-layer.sunny {\r\n  background: linear-gradient(to top right, #fbc02d, #ff9800);\r\n}\r\n.background-layer.cloudy {\r\n  background: linear-gradient(to top right, #90a4ae, #cfd8dc);\r\n}\r\n.background-layer.rainy {\r\n  background: linear-gradient(to top right, #4fc3f7, #0288d1);\r\n}\r\n.background-layer.snowy {\r\n  background: linear-gradient(to top right, #e0f7fa, #b2ebf2);\r\n}\r\n.background-layer.stormy {\r\n  background: linear-gradient(to top right, #616161, #212121);\r\n}\r\n.background-layer.default {\r\n  background: linear-gradient(to top right, #bdbdbd, #757575);\r\n}\r\n</style>","import script from \"./WeatherWidgetContainer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WeatherWidgetContainer.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WeatherWidgetContainer.vue?vue&type=style&index=0&id=074de2be&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-074de2be\"]])\n\nexport default __exports__","import { ref } from 'vue'\r\n\r\nexport const likedFacts = ref([])\r\nexport const trashBin = ref([])\r\n\r\nexport const likedCacheKey = ref('likedFactCache_shared')\r\n\r\nexport function loadFromStorage(currentUser = 'guest') {\r\n  const likedKey = `likedFacts_${currentUser}`\r\n  const trashKey = `trashBin_${currentUser}`\r\n\r\n  const likedRaw = localStorage.getItem(likedKey)\r\n  const trashRaw = localStorage.getItem(trashKey)\r\n\r\n  likedFacts.value = likedRaw ? JSON.parse(likedRaw) : []\r\n  trashBin.value = trashRaw ? JSON.parse(trashRaw) : []\r\n}\r\n\r\nexport function saveToStorage(currentUser = 'guest') {\r\n  const likedKey = `likedFacts_${currentUser}`\r\n  const trashKey = `trashBin_${currentUser}`\r\n\r\n  localStorage.setItem(likedKey, JSON.stringify(likedFacts.value))\r\n  localStorage.setItem(trashKey, JSON.stringify(trashBin.value))\r\n}\r\nexport const factHistory = ref([])\r\n\r\nexport function loadFactHistory(currentUser = 'guest') {\r\n  const key = `factHistory_${currentUser}`\r\n  const raw = localStorage.getItem(key)\r\n  factHistory.value = raw ? JSON.parse(raw) : []\r\n}\r\n\r\nexport function saveFactHistory(currentUser = 'guest') {\r\n  const key = `factHistory_${currentUser}`\r\n  localStorage.setItem(key, JSON.stringify(factHistory.value))\r\n}","<template>\r\n    <div class=\"fun-fact-widget\">\r\n      <!--  -->\r\n      <div class=\"tabs\">\r\n  <div\r\n    :class=\"['tab-item', 'theme-main', { active: viewMode === 'main' }]\"\r\n    @click=\"viewMode = 'main'\"\r\n    aria-label=\"Show random facts\"\r\n  ></div>\r\n  <div\r\n    :class=\"['tab-item', 'theme-liked', { active: viewMode === 'liked' }]\"\r\n    @click=\"viewMode = 'liked'\"\r\n    aria-label=\"Show liked facts\"\r\n  ></div>\r\n  <div\r\n    :class=\"['tab-item', 'theme-manage', { active: viewMode === 'manage' }]\"\r\n    @click=\"viewMode = 'manage'\"\r\n    aria-label=\"Manage facts\"\r\n  ></div>\r\n</div>\r\n<div class=\"card-area\" :class=\"cardClass\">\r\n\r\n  <div\r\n  class=\"animated-overlay\"\r\n  :class=\"{ 'main-animation': viewMode === 'main', 'liked-animation': viewMode === 'liked' }\"\r\n  v-if=\"viewMode !== 'manage'\"\r\n>\r\n  <!--  -->\r\n  <div\r\n  v-if=\"viewMode === 'main'\"\r\n  class=\"wave-circle main-wave-circle\"\r\n></div>\r\n<div\r\n  v-if=\"viewMode === 'liked'\"\r\n  class=\"wave-circle liked-wave-circle\"\r\n></div>\r\n\r\n  <!-- main  -->\r\n  <svg v-if=\"viewMode === 'main'\" class=\"brainwave-line\" viewBox=\"0 0 1200 300\" preserveAspectRatio=\"none\">\r\n  <path d=\"M0,70 L200,70 L300,-30 L400,100 L450,30 L500,70 L560,70 L720,70 L740,60 L760,80 L780,50 L810,70 L1000,70 L1200,70\" class=\"wave-path\" />\r\n  <path d=\"M0,287 L100,287 L120,270 L140,295 L160,287 L250,287 L300,287 L400,287 L500,287 L600,287 L680,287 L720,250 L760,320 L800,287 L850,287 L950,150 L1050,350 L1100,287 L1200,287\" class=\"wave-path\" />\r\n  <circle r=\"10\" class=\"pulse-dot dot1\" />\r\n  <circle r=\"8\" class=\"pulse-dot dot2\" />\r\n</svg>\r\n</div>\r\n\r\n <div class=\"toolbar\" v-if=\"viewMode === 'main'\">\r\n    <div class=\"left-buttons\">\r\n    <button   class=\"nav-button\"  :class=\"{ 'nav-click': navClickAnim === 'prev' }\"\r\n     @click=\"handlePrev\" :disabled=\"isAnimating || !canGoPrev\" \r\n     aria-label=\"Previous fact\">\r\n      <svg viewBox=\"0 0 24 24\"><path d=\"M15 18l-6-6 6-6\"/></svg>\r\n    </button>\r\n    <button   class=\"nav-button\"\r\n  :class=\"{ 'nav-click': navClickAnim === 'next' }\"\r\n     @click=\"handleNext\" :disabled=\"isAnimating\" \r\n     aria-label=\"Next fact\">\r\n      <svg viewBox=\"0 0 24 24\"><path d=\"M9 6l6 6-6 6\"/></svg>\r\n    </button>\r\n  </div>\r\n  <div class=\"right-buttons\">\r\n    <button @click=\"handleLikeClick\" :disabled=\"isAnimating\">\r\n        <span\r\n    :class=\"['like-emoji', isLiked(currentFact) ? 'liked' : '', likeAnimating]\"\r\n    aria-label=\"Like or unlike this fact\"\r\n  >\r\n    {{ isLiked(currentFact) ? '' : '' }}\r\n  </span>\r\n</button>\r\n  </div>\r\n</div>\r\n  \r\n      <!--  -->\r\n      <div v-if=\"viewMode === 'main'\" class=\"content\">\r\n        <div class=\"fact-frame-container\">\r\n        <div class=\"fact-frame\">\r\n  <!--  -->\r\n  <transition name=\"emoji-fade\" mode=\"out-in\">\r\n  <div class=\"brain-overlay\" v-if=\"isAnimating\" :key=\"emojiContent\">\r\n    <div class=\"emoji brain-thinking\">{{ emojiContent }}</div>\r\n  </div>\r\n</transition>\r\n\r\n  <!--  -->\r\n  <transition :name=\"factTransitionClass\" mode=\"out-in\">\r\n  <p class=\"fact-text\" v-if=\"readyToRender\" :key=\"displayFact\">\r\n    {{ displayFact || 'Facts Loading...' }}\r\n  </p>\r\n</transition>\r\n</div>\r\n</div>\r\n<transition-group name=\"dot\" tag=\"div\" class=\"pagination-dots\">\r\n    <span\r\n  v-for=\"(fact, index) in visibleDots\"\r\n  :key=\"dotWindowStart + index\"\r\n  :class=\"[\r\n    'dot',\r\n    currentIndex === dotWindowStart + index ? 'active' : '',\r\n    'dot-delay-enter-active',\r\n    'dot-delay-leave-active'\r\n  ]\"\r\n/>\r\n</transition-group>\r\n      </div>\r\n  \r\n<!--  -->\r\n<div v-else-if=\"viewMode === 'liked'\" class=\"content liked\">\r\n  <div class=\"center-buttons\">\r\n  <button\r\n    ref=\"likeButton\"\r\n    class=\"next-like-button\"\r\n    @click=\"handleLikedNext\"\r\n    :disabled=\"likedFacts.length === 0\"\r\n    :class=\"{\r\n      'heartbeat-animation': likedFacts.length > 0,\r\n      'click-animation': isClicking\r\n    }\"\r\n    aria-label=\"Show next liked fact\"\r\n  >\r\n    \r\n  </button>\r\n</div>\r\n  <div class=\"fact-frame-container\">\r\n    <div class=\"fact-frame\">\r\n      <!--  -->\r\n      <transition name=\"emoji-fade\" mode=\"out-in\">\r\n        <div class=\"brain-overlay\" v-if=\"isLikedAnimating\" :key=\"likedEmojiContent\">\r\n          <div class=\"emoji brain-thinking\">{{ likedEmojiContent }}</div>\r\n        </div>\r\n      </transition>\r\n\r\n      <!--  -->\r\n      <transition :name=\"factTransitionClass\" mode=\"out-in\">\r\n        <p class=\"fact-text\" v-if=\"likedReadyToRender\" :key=\"likedDisplayFact\">\r\n          {{ likedDisplayFact }}\r\n        </p>\r\n      </transition>\r\n    </div>\r\n  </div>\r\n\r\n\r\n</div>\r\n  \r\n      <!--  -->\r\n      <div v-else-if=\"viewMode === 'manage'\" class=\"content\">\r\n        <div class=\"input-wrapper\">\r\n            <input\r\n    class=\"search-input\"\r\n    :placeholder=\"`${likedFacts.length}  currently. Try...`\"\r\n    v-model=\"searchKeyword\"\r\n  />\r\n  <button class=\"trash-toggle\" @click=\"currentManageTab = currentManageTab === 'liked' ? 'trash' : 'liked'\"\r\n  aria-label=\"Toggle liked/trash view\">\r\n  <transition name=\"icon-fade\" mode=\"out-in\">\r\n    <span :key=\"currentManageTab\">\r\n      {{ currentManageTab === 'liked' ? '' : '' }}\r\n    </span>\r\n  </transition>\r\n</button>\r\n</div>\r\n        <div class=\"fact-list-box\">\r\n    <ul>\r\n        <transition-group name=\"fade\" tag=\"ul\" class=\"fact-list\">\r\n  <li\r\n    v-for=\"(fact, idx) in filteredFacts\"\r\n    :key=\"fact + '-' + idx\"\r\n    class=\"fact-item\"\r\n  >\r\n    <div class=\"fact-controls\">\r\n      <button class=\"delete-btn\" @click=\"removeFact(idx)\"\r\n      aria-label=\"Delete this fact\"></button>\r\n      <button\r\n  v-if=\"currentManageTab === 'trash'\"\r\n  class=\"toggle-btn\"\r\n  @click=\"recoverFromTrash(idx)\"\r\n  aria-label=\"Recover this fact\"\r\n>\r\n  \r\n</button>\r\n<button\r\n  v-else\r\n  class=\"toggle-btn\"\r\n  @click=\"toggleExpand(idx)\"\r\n  aria-label=\"Expand or collapse this fact\"\r\n>\r\n  {{ expandedIndex === idx ? '' : '' }}\r\n</button>\r\n    </div>\r\n    <div class=\"fact-text-short\" :class=\"{ expanded: expandedIndex === idx }\">\r\n      {{ fact }}\r\n    </div>\r\n  </li>\r\n</transition-group>\r\n    </ul>\r\n  </div>\r\n      </div>\r\n    </div>\r\n</div>\r\n  </template>\r\n  \r\n  <script setup>\r\n// Vue + Axios + inject + transitions\r\nimport { ref, computed, onMounted, inject, watch } from 'vue'\r\nimport axios from 'axios'\r\nimport '@/assets/css/transitions.css'\r\nimport {\r\n  likedFacts,\r\n  trashBin,\r\n  likedCacheKey,\r\n  loadFromStorage,\r\n  saveToStorage,\r\n  factHistory,\r\n  loadFactHistory,\r\n  saveFactHistory\r\n} from '@/scripts/likedStore.js'\r\n\r\n// Inject auth and widget lock context\r\nconst auth = inject('auth')\r\nconst currentUser = auth?.currentUser || ref('')\r\nconst widgetLocks = inject('widgetLocks')\r\nconst lock = widgetLocks?.FunFactWidget\r\n\r\n\r\n// Main reactive states\r\nconst viewMode = ref('main') // 'main' | 'liked' | 'manage'\r\nconst factList = ref([])\r\nconst currentIndex = ref(0)\r\nconst searchKeyword = ref('')\r\n\r\nconst cardClass = computed(() => {\r\n  return {\r\n    'theme-main': viewMode.value === 'main',\r\n    'theme-liked': viewMode.value === 'liked',\r\n    'theme-manage': viewMode.value === 'manage'\r\n  }\r\n})\r\n\r\n\r\n\r\n\r\n//LIKE ui\r\nconst likedFactCache = ref(JSON.parse(localStorage.getItem(likedCacheKey.value) || '[]'))\r\n\r\nconst likedIndex = ref(0)\r\nconst isLikedAnimating = ref(false)\r\nconst likedEmojiContent = ref('')\r\nconst likedDisplayFact = ref('')\r\nconst likedReadyToRender = ref(false)\r\nconst likeButton = ref(null)    \r\nconst isClicking = ref(false)  \r\n\r\n\r\nconst likedShowFact = (fact) => {\r\n  likedEmojiContent.value = ''\r\n  likedReadyToRender.value = false\r\n  isLikedAnimating.value = true\r\n\r\n  setTimeout(() => {\r\n    likedDisplayFact.value = fact\r\n    likedReadyToRender.value = true\r\n    isLikedAnimating.value = false\r\n  }, 1000)\r\n}\r\n\r\nconst handleLikedNext = () => {\r\n  if (likedFacts.value.length === 0) return\r\n\r\n  // \r\n  isClicking.value = false\r\n  void likeButton.value?.offsetWidth\r\n  isClicking.value = true\r\n  setTimeout(() => {\r\n    isClicking.value = false\r\n  }, 300)\r\n\r\n  // \r\n  const unseen = likedFacts.value.filter(f => !likedFactCache.value.includes(f))\r\n  const canAdd = unseen.length > 0\r\n\r\n  if (canAdd) {\r\n    const next = unseen[Math.floor(Math.random() * unseen.length)]\r\n    likedFactCache.value.push(next)\r\n    if (likedFactCache.value.length > 3) likedFactCache.value.shift()\r\n\r\n    likedIndex.value = likedFactCache.value.length - 1\r\n  } else {\r\n    //  \r\n    likedIndex.value = (likedIndex.value + 1) % likedFactCache.value.length\r\n  }\r\n\r\n  likedShowFact(likedFactCache.value[likedIndex.value])\r\n}\r\n\r\nconst pinkColors = [\r\n  '#ff69b4', // Hot Pink\r\n  '#ff1493', // Deep Pink\r\n  '#da70d6', // Orchid\r\n  '#f78fa7', // Pink Sherbet\r\n  '#ffdab9', // Peach Puff\r\n];\r\n\r\nconst setRandomColor = () => {\r\n  const waveCircleEl = document.querySelector('.liked-wave-circle')\r\n  if (waveCircleEl) {\r\n    const color = pinkColors[Math.floor(Math.random() * pinkColors.length)]\r\n    waveCircleEl.style.backgroundColor = color\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  //  liked \r\n  watch(viewMode, (newMode) => {\r\n    if (newMode === 'liked') {\r\n      setTimeout(() => {\r\n        const waveCircleEl = document.querySelector('.liked-animation .wave-circle')\r\n        if (waveCircleEl) {\r\n          // \r\n          setRandomColor()\r\n\r\n          // \r\n          waveCircleEl.removeEventListener('animationiteration', setRandomColor)\r\n\r\n          // \r\n          waveCircleEl.addEventListener('animationiteration', setRandomColor)\r\n        }\r\n      }, 100) //  DOM \r\n    }\r\n  }, { immediate: true })\r\n})\r\n// Computed: current fact & whether previous is available\r\nconst currentFact = computed(() => factList.value[currentIndex.value] || '')\r\nconst canGoPrev = computed(() => currentIndex.value > Math.max(0, factList.value.length - 3))\r\n\r\n// Used for sliding animation\r\nconst readyToRender = ref(false)\r\nconst lastDirection = ref('next')\r\nconst factTransitionClass = computed(() =>\r\n  lastDirection.value === 'next' ? 'slide-left' : 'slide-right'\r\n)\r\nconst dotWindowStart = ref(0)\r\nconst dotKeyBase = ref(0)\r\n\r\n\r\nfunction useVisibleDots(listRef, startRef, keyBaseRef, currentIndexRef) {\r\n  return computed(() => {\r\n    const list = listRef.value\r\n    const len = list.length\r\n    const start = startRef.value\r\n\r\n    if (len <= 1) return []\r\n    if (len === 2) return list.map((fact, i) => ({ fact, key: i }))\r\n    \r\n    //  2 \r\n    return list.slice(start, start + 3).map((fact, idx) => ({\r\n      fact,\r\n      key: `${keyBaseRef.value}-${idx}`,\r\n      active: currentIndexRef.value === start + idx\r\n    }))\r\n  })\r\n}\r\n\r\nconst visibleDots = useVisibleDots(factList, dotWindowStart, dotKeyBase, currentIndex)\r\n\r\n\r\nconst likeAnimating = ref('')\r\nconst handleLikeClick = () => {\r\n  const isNowLiked = !isLiked(currentFact.value)\r\n  likeFact()\r\n\r\n  likeAnimating.value = isNowLiked ? 'like-bounce' : 'unlike-shrink'\r\n  setTimeout(() => {\r\n    likeAnimating.value = ''\r\n  }, 500)\r\n}\r\n\r\nconst navClickAnim = ref('')\r\n\r\nconst triggerNavAnim = (type) => {\r\n  navClickAnim.value = type\r\n  setTimeout(() => {\r\n    navClickAnim.value = ''\r\n  }, 400)\r\n}\r\n\r\nconst handleNext = () => {\r\n  triggerNavAnim('next')\r\n  nextFact()\r\n}\r\n\r\nconst handlePrev = () => {\r\n  triggerNavAnim('prev')\r\n  prevFact()\r\n}\r\n// Delayed content display (after animation)\r\nconst displayFact = ref('')\r\n\r\n\r\n// Overlay animation state\r\nconst isAnimating = ref(false)\r\nconst emojiContent = ref('')\r\n\r\nconst startAnimation = (nextFactValue) => {\r\n  if (!nextFactValue || (nextFactValue === displayFact.value && displayFact.value !== '')) return\r\n\r\n  isAnimating.value = true\r\n  readyToRender.value = false\r\n  emojiContent.value = ''\r\n\r\n  setTimeout(() => {\r\n    displayFact.value = nextFactValue\r\n    isAnimating.value = false\r\n    readyToRender.value = true\r\n  }, 1000)\r\n}\r\n// Load liked facts when user changes\r\nwatch(currentUser, () => {\r\n  loadFromStorage(currentUser.value || 'guest')\r\n}, { immediate: true })\r\n\r\nfunction updateLikedFactCache() {\r\n  const all = likedFacts.value\r\n\r\n  if (all.length < 3) {\r\n    // 1  2   \r\n    likedFactCache.value = [...all]\r\n  } else {\r\n    // 3    + \r\n    const recent = all.slice(-2)\r\n    const others = all.slice(0, -2)\r\n    const randomOne = others[Math.floor(Math.random() * others.length)]\r\n    likedFactCache.value = [randomOne, ...recent]\r\n  }\r\n\r\n  likedIndex.value = 0\r\n  likedShowFact(likedFactCache.value[0])\r\n}\r\n\r\nwatch(viewMode, (newMode) => {\r\n  if (newMode === 'liked') {\r\n    if (!likedFacts.value.length) {\r\n      likedDisplayFact.value = 'No Liked Facts here...(Click the heart on the top right corner to save them!)'\r\n      likedReadyToRender.value = true\r\n    } else {\r\n      updateLikedFactCache()\r\n    }\r\n  }\r\n\r\n  if (newMode === 'main') {\r\n    isAnimating.value = true\r\n    setTimeout(() => {\r\n      isAnimating.value = false\r\n    }, 1000)\r\n  }\r\n})\r\n\r\n// Fetch new fact with deduplication and caching\r\nconst fetchNewFact = async () => {\r\n  try {\r\n    let attempts = 0\r\n    let fact = ''\r\n    const MAX_ATTEMPTS = 10\r\n\r\n    while (attempts < MAX_ATTEMPTS) {\r\n      const res = await axios.get('https://uselessfacts.jsph.pl/api/v2/facts/random?language=en')\r\n      fact = res.data.text\r\n      if (!factHistory.value.includes(fact)) break\r\n      attempts++\r\n    }\r\n\r\n    if (fact && !factHistory.value.includes(fact)) {\r\n      factList.value.push(fact)\r\n      currentIndex.value = factList.value.length - 1\r\n      factHistory.value.push(fact)\r\n\r\n      if (factHistory.value.length > 200) {\r\n        factHistory.value.shift()\r\n      }\r\n\r\n      saveFactHistory(currentUser.value || 'guest')\r\n    } else {\r\n      factList.value.push('No New Facts')\r\n    }\r\n  } catch (err) {\r\n    console.error('', err)\r\n    factList.value.push('Failed to load. Please check your network connection or try again later.')\r\n  }\r\n}\r\n\r\n// Navigation logic\r\nconst nextFact = () => {\r\n  if (lock?.isNextLocked || isAnimating.value) return\r\n  lock.isNextLocked = true\r\n  isAnimating.value = true\r\n  setTimeout(() => (lock.isNextLocked = false), 300)\r\n\r\n  const atEnd = currentIndex.value === factList.value.length - 1\r\n\r\n  if (atEnd) {\r\n    fetchNewFact().then(() => {\r\n      lastDirection.value = 'next'\r\n      currentIndex.value = factList.value.length - 1\r\n\r\n      if (currentIndex.value - dotWindowStart.value >= 3) {\r\n        dotWindowStart.value++\r\n        dotKeyBase.value++\r\n      }\r\n\r\n      startAnimation(factList.value[currentIndex.value])\r\n    })\r\n  } else {\r\n    currentIndex.value++\r\n    lastDirection.value = 'next'\r\n\r\n    if (currentIndex.value - dotWindowStart.value >= 3) {\r\n      dotWindowStart.value++\r\n      dotKeyBase.value++\r\n    }\r\n\r\n    startAnimation(factList.value[currentIndex.value])\r\n  }\r\n}\r\n\r\nconst prevFact = () => {\r\n  if (canGoPrev.value) {\r\n    currentIndex.value--\r\n    lastDirection.value = 'prev'\r\n\r\n    if (currentIndex.value < dotWindowStart.value) {\r\n      dotWindowStart.value--\r\n      dotKeyBase.value++\r\n    }\r\n\r\n    startAnimation(factList.value[currentIndex.value])\r\n  }\r\n}\r\n\r\n// Like / unlike logic\r\nconst isLiked = (fact) => likedFacts.value.includes(fact)\r\nconst likeFact = () => {\r\n  const fact = currentFact.value\r\n  if (!fact) return\r\n\r\n  const index = likedFacts.value.indexOf(fact)\r\n  if (index === -1) {\r\n    likedFacts.value.push(fact)\r\n  } else {\r\n    likedFacts.value.splice(index, 1)\r\n  }\r\n  saveToStorage(currentUser.value || 'guest')\r\n}\r\n\r\nconst expandedIndex = ref(null)\r\nconst currentManageTab = ref('liked') \r\n\r\nconst recoverFromTrash = (idx) => {\r\n  const fact = trashBin.value.splice(idx, 1)[0]\r\n  if (fact && !likedFacts.value.includes(fact)) {\r\n    likedFacts.value.push(fact)\r\n    saveToStorage(currentUser.value || 'guest')\r\n  }\r\n}\r\n\r\nconst toggleExpand = (idx) => {\r\n  expandedIndex.value = expandedIndex.value === idx ? null : idx\r\n}\r\nconst removeFact = (idx) => {\r\n  if (currentManageTab.value === 'liked') {\r\n    const removed = likedFacts.value.splice(idx, 1)[0]\r\n    trashBin.value.unshift(removed)\r\n    if (trashBin.value.length > 5) trashBin.value.pop()\r\n    saveToStorage(currentUser.value || 'guest')\r\n  } else {\r\n    trashBin.value.splice(idx, 1) \r\n  }\r\n}\r\n\r\nconst filteredFacts = computed(() => {\r\n  const source = currentManageTab.value === 'liked' ? likedFacts.value : trashBin.value\r\n  return source.filter(f => f.toLowerCase().includes(searchKeyword.value.toLowerCase()))\r\n})\r\n\r\nwatch(likedFacts, () => {\r\n  if (viewMode.value !== 'liked') return\r\n\r\n  const all = likedFacts.value\r\n  if (all.length <= 3) {\r\n    likedFactCache.value = [...all]\r\n  } else {\r\n    const recent = all.slice(-2)\r\n    const others = all.slice(0, -2)\r\n    const randomOne = others[Math.floor(Math.random() * others.length)]\r\n    likedFactCache.value = [randomOne, ...recent]\r\n  }\r\n\r\n  likedIndex.value = 0\r\n  likedShowFact(likedFactCache.value[0])\r\n\r\n  localStorage.setItem(likedCacheKey.value, JSON.stringify(likedFactCache.value))\r\n})\r\n\r\n// Initial load\r\nonMounted(() => {\r\n  loadFactHistory(currentUser.value || 'guest')\r\n  factList.value = [...factHistory.value]\r\n  currentIndex.value = factList.value.length - 1\r\n  dotWindowStart.value = Math.max(0, currentIndex.value - 2)\r\n  dotKeyBase.value = 0\r\n\r\n  if (factHistory.value.length === 0) {\r\n    fetchNewFact().then(() => {\r\n      const fact = factList.value[factList.value.length - 1] || ''\r\n      startAnimation(fact)\r\n    })\r\n  } else {\r\n    const fact = factList.value[currentIndex.value] || ''\r\n    startAnimation(fact)\r\n  }\r\n})\r\n  </script>\r\n  \r\n  <style scoped>\r\n.fun-fact-widget {\r\n  padding: 0;\r\n  margin: 0;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n  .card-area {\r\n  border: none;\r\n  flex-grow: 1;\r\n  border-radius: 6px;\r\n  padding: 12px;\r\n  position: relative;\r\n  z-index: 3;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.05);\r\n  height: 100%;\r\n  overflow: hidden;\r\n  transition: background-color 0.8s ease;\r\n  \r\n}\r\n.card-area.theme-main {\r\n  background: #99d9ff; \r\n}\r\n\r\n.card-area.theme-liked {\r\n  background: #ffb6c8; \r\n}\r\n\r\n.card-area.theme-manage {\r\n  background: #a8f7ba; \r\n}\r\n\r\n\r\n\r\n\r\n  \r\n  .toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: 12px;\r\n  height: 40px; \r\n  box-sizing: border-box;\r\n  z-index: 3;\r\n  position: relative\r\n  }\r\n\r\n  .left-buttons,\r\n.right-buttons {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n  .toolbar button {\r\n    background: none;\r\n  border: none;\r\n  border-radius: 50%;\r\n  padding: 4px;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  \r\n}\r\n\r\n.toolbar button:hover {\r\n  background: rgba(0, 0, 0, 0.05);\r\n}\r\n.nav-button {\r\n  transition: transform 0.3s;\r\n}\r\n\r\n.nav-click {\r\n  animation: nintendoPop 0.4s cubic-bezier(0.3, 1.4, 0.3, 1);\r\n}\r\n\r\n@keyframes nintendoPop {\r\n  0%   { transform: scale(1); }\r\n  40%  { transform: scale(1.3); }\r\n  70%  { transform: scale(0.95); }\r\n  100% { transform: scale(1); }\r\n}\r\n\r\n.like-emoji {\r\n  font-size: 30px;\r\n  display: inline-block;\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.like-bounce {\r\n  animation: likeBounce 0.4s ease;\r\n}\r\n@keyframes likeBounce {\r\n  0%   { transform: scale(1); }\r\n  50%  { transform: scale(1.4); }\r\n  100% { transform: scale(1); }\r\n}\r\n\r\n\r\n.unlike-shrink {\r\n  animation: unlikeFade 0.4s ease;\r\n}\r\n@keyframes unlikeFade {\r\n  0%   { transform: scale(1); opacity: 1; }\r\n  50%  { transform: scale(0.6); opacity: 0.4; }\r\n  100% { transform: scale(1); opacity: 1; }\r\n}\r\n.toolbar svg {\r\n    width: 28px;\r\n  height: 28px;\r\n  fill: #444;\r\n}\r\n\r\n.toolbar button:disabled {\r\n    opacity: 0.3;\r\n    pointer-events: none;\r\n}\r\n\r\n.toolbar button.active svg {\r\n  fill: #007bff;\r\n}\r\n\r\n.content {\r\n  flex-grow: 1;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  min-height: 0; \r\n  padding-right: 6px; \r\n  z-index: 2\r\n}\r\n  .fact-frame-container {\r\n  position: relative;\r\n  height: 160px;\r\n  border-radius: 10px;\r\n  z-index: 2\r\n}\r\n\r\n.fact-frame {\r\n  height: 160px;\r\n  background: #f9f4ec;\r\n  border-radius: 10px;\r\n  border: 1px solid #e0e0e0;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\r\n  display: flex;\r\n  flex-direction: column;   \r\n  align-items: flex-start;  \r\n  justify-content: flex-start; \r\n  overflow-y: auto;         \r\n  overflow-x: hidden;\r\n  padding: 12px;\r\n  margin-top: 12px;\r\n  position: relative;\r\n  z-index: 2;\r\n}\r\n\r\n\r\n.fact-frame.animating {\r\n  scrollbar-width: none;\r\n}\r\n.fact-frame.animating::-webkit-scrollbar {\r\n  display: none; \r\n}\r\n\r\n.brain-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 2;\r\n  background: rgb(100, 149, 237);\r\n  border-radius: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  pointer-events: none;\r\n}\r\n.emoji {\r\n  font-size: 48px;\r\n  transition: transform 0.5s ease;\r\n}\r\n\r\n\r\n.brain-thinking {\r\n  transform: scale(1.1) rotate(-6deg);\r\n  animation: brainBounce 0.5s ease-in-out;\r\n}\r\n\r\n@keyframes brainBounce {\r\n  0% { transform: scale(1) rotate(0); }\r\n  50% { transform: scale(1.15) rotate(-5deg); }\r\n  100% { transform: scale(1.1) rotate(-6deg); }\r\n}\r\n\r\n\r\n.emoji-fade-enter-from, .emoji-fade-leave-to {\r\n  opacity: 0;\r\n}\r\n.emoji-fade-enter-active, .emoji-fade-leave-active {\r\n  transition: opacity 0.5s;\r\n}\r\n  \r\n.fact-text {\r\n  font-size: 1.1rem;\r\n  font-family: \"Segoe UI\", \"Noto Sans\", \"Helvetica Neue\", sans-serif;\r\n  line-height: 1.6;\r\n  color: #444; \r\n  margin: 0;\r\n}\r\n  \r\n  ul {\r\n    list-style: none;\r\n    padding-left: 0;\r\n  }\r\n  \r\n  li {\r\n    margin: 6px 0;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n\r\n.tabs {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  position: relative;\r\n  z-index: 2;\r\n  margin-bottom: -1px; \r\n  padding-left: 0;\r\n}\r\n\r\n.tab-item {\r\n  flex: 1;\r\n  max-width: calc(66.66% / 3);\r\n  text-align: center;\r\n  padding: 2px 0;\r\n  margin: 0 2px;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  border: 1px solid #ccc;\r\n  border-bottom: none;\r\n  border-top-left-radius: 6px;\r\n  border-top-right-radius: 6px;\r\n  transition: background 0.2s ease;\r\n  color: #333;\r\n  transform: translateY(50%);\r\n  transition: transform 0.3s ease;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  z-index: 0;\r\n}\r\n\r\n.tab-item:hover {\r\n  transform: translateY(0%);\r\n  z-index: 1;\r\n}\r\n\r\n.tab-item.active {\r\n  transform: translateY(0%);\r\n  font-weight: bold;\r\n  z-index: 2;\r\n}\r\n\r\n.tab-item.theme-main:not(.active) {\r\n    background: #99d9ff;\r\n}\r\n.tab-item.theme-liked:not(.active) {\r\n    background: #ffb6c8;\r\n}\r\n.tab-item.theme-manage:not(.active) {\r\n    background: #a8f7ba;\r\n}\r\n\r\n.tab-item.theme-main.active {\r\n  background: #6ec6ff;\r\n}\r\n\r\n.tab-item.theme-liked.active {\r\n  background: #ff9eb3;\r\n}\r\n\r\n.tab-item.theme-manage.active {\r\n  background: #90f1a0;\r\n}\r\n\r\n\r\n\r\n\r\n.pagination-dots {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 6px;\r\n  margin-top: 12px;\r\n  z-index: 3;\r\n}\r\n.dot {\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 50%;\r\n  background: #bbb;\r\n  transition: background 0.3s ease, transform 0.3s ease;\r\n}\r\n\r\n.dot.active {\r\n  background: #444;\r\n}\r\n\r\n.dot-enter-from {\r\n  opacity: 0;\r\n  transform: scale(0.6);\r\n}\r\n.dot-enter-to {\r\n  opacity: 1;\r\n  transform: scale(1);\r\n}\r\n.dot-enter-active,\r\n.dot-leave-active {\r\n  transition: all 0.3s ease;\r\n}\r\n.dot-leave-to {\r\n  opacity: 0;\r\n  transform: scale(0.6);\r\n}\r\n\r\n.dot-delay-enter-active {\r\n  transition-delay: 0.05s;\r\n}\r\n.dot-delay-leave-active {\r\n  transition-delay: 0.1s;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n  transform: scale(0.98);\r\n}\r\n\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.3s ease, transform 0.3s ease;\r\n}\r\n\r\n\r\n.liked .brain-overlay {\r\n  background: rgba(255, 204, 229, 0.8);\r\n}\r\n\r\n\r\n\r\n.liked .nav-button:hover {\r\n  background: rgba(255, 182, 193, 0.2);\r\n}\r\n\r\n.center-buttons {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 12px;\r\n}\r\n\r\n.next-like-button {\r\n  font-size: 40px;\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n\r\n}\r\n\r\n\r\n.next-like-button:disabled {\r\n  opacity: 0.4;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.fact-list-box {\r\n  background: rgba(255, 255, 255, 0.8);\r\n  border: 1px solid #ccc;\r\n  border-radius: 8px;\r\n  padding: 8px;\r\n  margin-top: 12px;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.fact-item {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 6px;\r\n  margin-bottom: 8px;\r\n  padding-bottom: 6px;\r\n  border-bottom: 1px solid #ddd; \r\n}\r\n\r\n.fact-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.fact-controls {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n  margin-top: 2px;\r\n}\r\n\r\n.fact-controls button {\r\n  font-size: 12px;       \r\n  padding: 2px 4px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  width: 24px;            \r\n  height: 24px;\r\n  line-height: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.delete-btn {\r\n  background: #ffe6e6;\r\n  color: #d00;\r\n}\r\n\r\n.delete-btn:hover {\r\n  background: #ffcccc;\r\n}\r\n\r\n.toggle-btn {\r\n  background: #e6f0ff;\r\n  color: #333;\r\n}\r\n\r\n.toggle-btn:hover {\r\n  background: #d0e5ff;\r\n}\r\n\r\n.fact-text-short {\r\n  flex: 1;\r\n  overflow: hidden;\r\n\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 2; \r\n  line-clamp: 2; \r\n  white-space: normal; \r\n  text-overflow: ellipsis;\r\n  word-break: break-word;\r\n\r\n  line-height: 1.5;\r\n  padding-right: 6px;\r\n  padding-top: 2px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.fact-text-short.expanded {\r\n  white-space: normal;\r\n  overflow: visible;\r\n  text-overflow: initial;\r\n  background: #fff8dc;\r\n  padding: 4px;\r\n  border-radius: 4px;\r\n  -webkit-line-clamp: unset;\r\n  line-clamp: unset;\r\n  overflow: visible;\r\n}\r\n\r\n.fact-controls button:hover {\r\n  background: #ddd;\r\n}\r\n.input-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 8px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.input-wrapper input {\r\n  flex: 1;\r\n  padding: 6px 10px;\r\n  font-size: 14px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n}\r\n\r\n.trash-toggle {\r\n  font-size: 18px;\r\n  padding: 4px 10px;\r\n  background: #f0f0f0;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: background 0.3s ease;\r\n}\r\n\r\n.trash-toggle:hover {\r\n  background: #ddd;\r\n}\r\n.fade-enter-from, .fade-leave-to {\r\n  opacity: 0;\r\n  transform: scale(0.95);\r\n}\r\n.fade-enter-active, .fade-leave-active {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n@keyframes heartbeat {\r\n  0%, 100% {\r\n    transform: scale(1);\r\n  }\r\n  50% {\r\n    transform: scale(1.1);\r\n  }\r\n}\r\n\r\n.heartbeat-animation {\r\n  animation: heartbeat 1.5s ease-in-out infinite;\r\n}\r\n\r\n@keyframes click-pop {\r\n  0% { transform: scale(1); }\r\n  50% { transform: scale(1.4); }\r\n  100% { transform: scale(1); }\r\n}\r\n\r\n.click-animation {\r\n  animation: click-pop 300ms ease;\r\n}\r\n\r\n.animated-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  pointer-events: none;\r\n  z-index: 1; \r\n  overflow: hidden;\r\n}\r\n\r\n.brainwave-line {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  top: 0;\r\n  left: 0;\r\n  pointer-events: none;\r\n  z-index: 0;\r\n}\r\n\r\n.wave-path {\r\n  fill: none;\r\n  stroke: rgb(10, 45, 143);\r\n  stroke-width: 3;\r\n\r\n}\r\n\r\n.pulse-dot {\r\n  fill: #00994d;\r\n  filter: drop-shadow(0 0 5px #00994d);\r\n  offset-distance: 0%;\r\n  offset-rotate: auto;\r\n}\r\n\r\n.dot1 {\r\n  offset-path: path(\"M0,70 L200,70 L300,-30 L400,100 L450,30 L500,70 L560,70 L720,70 L740,60 L760,80 L780,50 L810,70 L1000,70 L1200,70\");\r\n  animation: travel-dot 3s linear infinite;\r\n  animation-delay: 2s;\r\n}\r\n\r\n.dot2 {\r\n  offset-path: path(\"M0,287 L100,287 L120,270 L140,295 L160,287 L250,287 L300,287 L400,287 L500,287 L600,287 L680,287 L720,250 L760,320 L800,287 L850,287 L950,150 L1050,350 L1100,287 L1200,287\");\r\n  animation-delay: 4.5s;\r\n  animation: travel-dot 5s linear infinite;\r\n}\r\n\r\n@keyframes travel-dot {\r\n  0% {\r\n    offset-distance: 0%;\r\n    opacity: 0;\r\n  }\r\n  5% {\r\n    opacity: 1;\r\n  }\r\n  95% {\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    offset-distance: 100%;\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n.main-animation .wave-circle {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: repeating-linear-gradient(\r\n    45deg,\r\n    transparent 0px,\r\n    transparent 8px,\r\n    #00ff88 8px,\r\n    #00ff88 10px\r\n  );\r\n  animation: wave-expand 2.5s ease-out infinite;\r\n  opacity: 0.3;\r\n}\r\n\r\n@keyframes wave-expand {\r\n  0% {\r\n    transform: scale(0.6);\r\n    opacity: 0.2;\r\n  }\r\n  70% {\r\n    transform: scale(1.6);\r\n    opacity: 0.05;\r\n  }\r\n  100% {\r\n    transform: scale(2.3);\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n@keyframes pulse-wave-main {\r\n  0% {\r\n    transform: translate(-50%, -50%) scale(0.6);\r\n    opacity: 0.5;\r\n  }\r\n  60% {\r\n    transform: translate(-50%, -50%) scale(2.4);\r\n    opacity: 0.1;\r\n  }\r\n  100% {\r\n    transform: translate(-50%, -50%) scale(3);\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n.liked-animation .wave-circle {\r\n  position: absolute;\r\n  width: 120px;\r\n  height: 120px;\r\n  border-radius: 50%;\r\n  background: rgba(255, 105, 180, 0.4); \r\n  animation: pulse-wave-liked 2.8s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite;\r\n  top: 20%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n\r\n\r\n\r\n\r\n@keyframes pulse-wave-liked {\r\n  0% {\r\n    transform: translate(-50%, -50%) scale(0.6);\r\n    opacity: 0;\r\n    filter: blur(4px);\r\n  }\r\n  10% {\r\n    opacity: 0.7;\r\n    filter: blur(2px);\r\n  }\r\n  30% {\r\n    transform: translate(-50%, -50%) scale(1.4);\r\n    opacity: 0.5;\r\n    filter: blur(1px);\r\n  }\r\n  70% {\r\n    transform: translate(-50%, -50%) scale(2.2);\r\n    opacity: 0.2;\r\n    filter: blur(2px);\r\n  }\r\n  100% {\r\n    transform: translate(-50%, -50%) scale(2.8);\r\n    opacity: 0;\r\n    filter: blur(4px);\r\n  }\r\n}\r\n\r\n  </style>","import script from \"./FunFactWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FunFactWidget.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FunFactWidget.vue?vue&type=style&index=0&id=36550068&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-36550068\"]])\n\nexport default __exports__","let floatingEl = null\r\nlet mouseMoveHandler = null\r\n\r\nexport function showClickPreview({ icon = '', width = 40, height = 40 }) {\r\n  removeClickPreview()\r\n\r\n  const preview = document.createElement('div')\r\n  preview.style.cssText = `\r\n    width: ${width}px;\r\n    height: ${height}px;\r\n    background: radial-gradient(circle, rgba(0,0,0,0.85), rgba(0,0,0,0));\r\n    color: white;\r\n    font-size: 24px;\r\n    font-weight: bold;\r\n    line-height: 1;\r\n    border-radius: 8px;\r\n    position: fixed;\r\n    z-index: 9999;\r\n    pointer-events: none;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-family: sans-serif;\r\n  `\r\n  preview.textContent = icon\r\n  preview.setAttribute('data-floating-preview', '')\r\n\r\n  document.body.appendChild(preview)\r\n  floatingEl = preview\r\n\r\n  mouseMoveHandler = (e) => {\r\n    preview.style.left = e.clientX + 'px'\r\n    preview.style.top = e.clientY + 'px'\r\n    preview.style.transform = 'translate(-50%, -50%)'\r\n  }\r\n  window.addEventListener('mousemove', mouseMoveHandler)\r\n}\r\n\r\nexport function removeClickPreview() {\r\n  if (floatingEl) {\r\n    document.body.removeChild(floatingEl)\r\n    floatingEl = null\r\n  }\r\n  if (mouseMoveHandler) {\r\n    window.removeEventListener('mousemove', mouseMoveHandler)\r\n    mouseMoveHandler = null\r\n  }\r\n}","<template>\r\n  <div class=\"selector-widget-container\">\r\n    <div class=\"selector-toolbar\">\r\n  <!--  -->\r\n  <div class=\"toolbar-mask\" :class=\"`state-${maskState}`\">\r\n  <div class=\"gear-wrapper\" :class=\"gearRotationClass\" :key=\"gearKey\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"100\" viewBox=\"0 0 100 100\" class=\"gear-icon\">\r\n  <defs>\r\n    <radialGradient id=\"metalGlow\" cx=\"50%\" cy=\"50%\" r=\"50%\">\r\n      <stop offset=\"0%\" stop-color=\"#ffffff\" stop-opacity=\"1\"/>\r\n      <stop offset=\"40%\" stop-color=\"#dddddd\" stop-opacity=\"0.8\"/>\r\n      <stop offset=\"100%\" stop-color=\"#888888\" stop-opacity=\"0.6\"/>\r\n    </radialGradient>\r\n    <linearGradient id=\"metalEdge\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n      <stop offset=\"0%\" stop-color=\"#f2f2f2\"/>\r\n      <stop offset=\"50%\" stop-color=\"#cccccc\"/>\r\n      <stop offset=\"100%\" stop-color=\"#eeeeee\"/>\r\n    </linearGradient>\r\n  </defs>\r\n  <g id=\"gear-body\">\r\n    <circle cx=\"50\" cy=\"50\" r=\"35\" fill=\"url(#metalGlow)\" stroke=\"url(#metalEdge)\" stroke-width=\"6\"/>\r\n    <g stroke=\"url(#metalEdge)\" stroke-width=\"8\" stroke-linecap=\"round\">\r\n      <line x1=\"50\" y1=\"5\" x2=\"50\" y2=\"15\"/>\r\n      <line x1=\"50\" y1=\"85\" x2=\"50\" y2=\"95\"/>\r\n      <line x1=\"5\" y1=\"50\" x2=\"15\" y2=\"50\"/>\r\n      <line x1=\"85\" y1=\"50\" x2=\"95\" y2=\"50\"/>\r\n      <line x1=\"22\" y1=\"22\" x2=\"30\" y2=\"30\"/>\r\n      <line x1=\"78\" y1=\"22\" x2=\"70\" y2=\"30\"/>\r\n      <line x1=\"22\" y1=\"78\" x2=\"30\" y2=\"70\"/>\r\n      <line x1=\"78\" y1=\"78\" x2=\"70\" y2=\"70\"/>\r\n    </g>\r\n    <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"url(#metalEdge)\" stroke=\"#999999\" stroke-width=\"2\"/>\r\n    <line x1=\"50\" y1=\"20\" x2=\"50\" y2=\"80\" stroke=\"url(#metalEdge)\" stroke-width=\"6\" stroke-linecap=\"round\"/>\r\n    <ellipse cx=\"50\" cy=\"50\" rx=\"25\" ry=\"12\" fill=\"white\" opacity=\"0.2\" transform=\"rotate(-45 50 50)\"/>\r\n  </g>\r\n</svg>\r\n  </div>\r\n  <div\r\n    v-for=\"(sticker, i) in toolbarStickers\"\r\n    :key=\"`toolbar-sticker-${i}`\"\r\n    class=\"toolbar-sticker\"\r\n    :style=\"{\r\n      top: sticker.top,\r\n      left: sticker.left,\r\n      transform: `rotate(${sticker.rotate}deg)`\r\n    }\"\r\n  >\r\n    {{ sticker.emoji }}\r\n  </div>\r\n</div>\r\n\r\n  <div class=\"indicator-light\">\r\n  <!--  lightState  -->\r\n  <transition name=\"light-fade\" mode=\"out-in\" @before-leave=\"handleBeforeLeave\">\r\n    <div\r\n      v-if=\"lightState.on\"\r\n      ref=\"indicatorRef\"\r\n      :class=\"['indicator-glow', lightState.color]\"\r\n    ></div>\r\n    <div v-else ref=\"indicatorRef\" class=\"indicator-glow blue\"></div>\r\n  </transition>\r\n</div>\r\n\r\n  <!--  -->\r\n  <button\r\n  class=\"toggle-icon-button\" v-rubber-button\r\n  :disabled=\"!auth.isLoggedIn.value || isMaskAnimating\"\r\n  @click=\"() => { toggleExpanded(); triggerLight('green'); }\"\r\n  aria-label=\"Toggle toolbar\"\r\n>\r\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n      <path d=\"M19.14,12.94a7.91,7.91,0,0,0,.06-1,7.91,7.91,0,0,0-.06-1l2.11-1.65a.5.5,0,0,0,.12-.63l-2-3.46a.5.5,0,0,0-.6-.22L16.9,5.5a7.42,7.42,0,0,0-1.73-1L15,2.5a.5.5,0,0,0-.5-.5H9.5a.5.5,0,0,0-.5.5l-.17,2a7.42,7.42,0,0,0-1.73,1L4.63,5a.5.5,0,0,0-.6.22l-2,3.46a.5.5,0,0,0,.12.63L4.26,10a7.91,7.91,0,0,0,0,2L2.15,13.65a.5.5,0,0,0-.12.63l2,3.46a.5.5,0,0,0,.6.22L7.1,18.5a7.42,7.42,0,0,0,1.73,1l.17,2a.5.5,0,0,0,.5.5h5a.5.5,0,0,0,.5-.5l.17-2a7.42,7.42,0,0,0,1.73-1l2.47,1.46a.5.5,0,0,0,.6-.22l2-3.46a.5.5,0,0,0-.12-.63ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z\"/>\r\n  </svg>\r\n  </button>\r\n\r\n  <!--  -->\r\n  <button\r\n  class=\"move-button\" v-rubber-button\r\n  :disabled=\"!auth.isLoggedIn.value || isMaskAnimating\"\r\n  @click=\"() => { handleMoveSelf(); triggerLight('red'); }\"\r\n  aria-label=\"Move widget\"\r\n>\r\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#333\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n<line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"22\"/>\r\n<line x1=\"2\" y1=\"12\" x2=\"22\" y2=\"12\"/>\r\n<polyline points=\"12 2, 8 6, 16 6, 12 2\"/>\r\n<polyline points=\"12 22, 8 18, 16 18, 12 22\"/>\r\n<polyline points=\"2 12, 6 8, 6 16, 2 12\"/>\r\n<polyline points=\"22 12, 18 8, 18 16, 22 12\"/>\r\n</svg>\r\n  </button>\r\n  <div class=\"preview-panel-wrapper\" :class=\"wrapperState\">\r\n  <div class=\"preview-panel-inner\" :class=\"innerState\">\r\n    <button class=\"cancel-preview-btn\" v-rubber-button @click=\"() => { cancelPreview(); triggerLight('purple'); }\" aria-label=\"Cancel preview\">\r\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#333\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n<rect x=\"3\" y=\"3\" width=\"18\" height=\"3\" fill=\"#ccc\" stroke=\"#333\"/>\r\n<circle cx=\"6\" cy=\"4.5\" r=\"0.5\" fill=\"#333\"/>\r\n<circle cx=\"12\" cy=\"4.5\" r=\"0.5\" fill=\"#333\"/>\r\n<circle cx=\"18\" cy=\"4.5\" r=\"0.5\" fill=\"#333\"/>\r\n<rect x=\"4\" y=\"6\" width=\"16\" height=\"16\" rx=\"2\" ry=\"2\" fill=\"#fff\" stroke=\"#333\"/>\r\n<line x1=\"9\" y1=\"10\" x2=\"9\" y2=\"18\"/>\r\n<line x1=\"15\" y1=\"10\" x2=\"15\" y2=\"18\"/>\r\n</svg></button>\r\n  </div>\r\n</div>\r\n</div>\r\n<div class=\"scroll-wrapper\">\r\n  <div :class=\"['scroll-mask-decoration', maskAnimationState]\"></div>\r\n  <div :class=\"['scroll-mask-wrapper', maskAnimationState]\">\r\n  <div class=\"scroll-mask\">\r\n    <div class=\"sticker-zone\">\r\n      <div\r\n        v-for=\"sticker in stickers\"\r\n        :key=\"sticker.emoji\"\r\n        class=\"widget-sticker\"\r\n        :style=\"{\r\n          top: `${sticker.top}%`,\r\n          left: `${sticker.left}%`,\r\n          transform: `translate(-50%, -50%) rotate(${sticker.rotate}deg)`\r\n        }\"\r\n      >\r\n        {{ sticker.emoji }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n    <div class=\"selector-scroll\" ref=\"scrollRef\" :class=\"{ 'locked': !auth.isLoggedIn.value || !expanded }\">\r\n      <!--  -->\r\n      <div v-for=\"item in sortedWidgetList\" :key=\"item.type\">\r\n        <!--  -->\r\n        <div v-if=\"item.type === 'category'\" class=\"category-title\">\r\n          {{ categoryNames[item.category] }}\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div v-else class=\"widget-card\">\r\n          <div class=\"widget-entry\">\r\n            <strong><span class=\"emoji\">{{ item.icon }}</span> {{ item.name }}</strong>\r\n            <div class=\"size-options\">\r\n              <button\r\n                v-for=\"sizeKey in item.sizeOptions\"\r\n                :key=\"sizeKey\"\r\n                class=\"btn\" v-rubber-button\r\n                @click=\"() => { handleAddClick(item.type, sizeKey); triggerLight('orange'); }\"\r\n                :aria-label=\"`Add widget of size ${sizeKey}`\"\r\n              >\r\n                {{ sizeKey }}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport { inject, watch, nextTick, ref, reactive} from 'vue'\r\nimport { widgetSizes } from '@/data/widgetTypes.js'\r\nimport { widgetMetadata, categoryOrder } from '@/components/widgets/registry.js'\r\nimport { showClickPreview, removeClickPreview } from '@/scripts/useClickPreview'\r\n\r\nconst auth = inject('auth')\r\nconst pendingMoveWidget = inject('pendingMoveWidget')\r\nconst widgets = inject('widgets')\r\nconst expanded = inject('pegboardExpanded')\r\nconst pendingPlacement = inject('pendingPlacement')\r\nconst emit = defineEmits(['add-widget'])\r\nconst scrollRef = ref(null)\r\n\r\nconst sortedWidgetList = ref([])\r\n\r\nconst indicatorRef = ref(null);\r\nconst lightState = reactive({\r\n  on: false,\r\n  color: ''\r\n})\r\n\r\n\r\n//   \r\nfunction triggerLight(color) {\r\n  lightState.on = true\r\n  lightState.color = color\r\n}\r\n\r\n\r\nfunction turnOffLight() {\r\n  lightState.on = false\r\n  lightState.color = ''\r\n}\r\n\r\nfunction toggleExpanded() {\r\n  if (!auth?.isLoggedIn.value) {\r\n    console.warn(' ');\r\n    return;\r\n  }\r\n\r\n  expanded.value = !expanded.value;\r\n\r\n  nextTick(() => {\r\n    if (scrollRef.value) {\r\n      scrollRef.value.scrollTop = 0;\r\n    }\r\n  });\r\n}\r\n\r\nconst maskState = ref('logged-out')  // 'logged-out' | 'logged-in' | 'editing'\r\n\r\n\r\n//  expanded maskState\r\nwatch(\r\n  [() => auth.isLoggedIn.value, expanded],\r\n  ([loggedIn, isExpanded]) => {\r\n    if (!loggedIn) {\r\n      maskState.value = 'logged-out'\r\n    } else if (loggedIn && !isExpanded) {\r\n      maskState.value = 'logged-in'\r\n    } else if (loggedIn && isExpanded) {\r\n      maskState.value = 'editing'\r\n    }\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\n//  maskState previousState\r\nconst gearRotationClass = ref('')\r\nconst gearKey = ref(0)\r\n\r\nwatch(\r\n  maskState,\r\n  (newState, oldState) => {\r\n    let direction = ''\r\n    if (oldState === 'logged-in' && newState === 'editing') {\r\n      direction = 'rotate-right'\r\n    } else if (oldState === 'editing' && newState === 'logged-in') {\r\n      direction = 'rotate-left'\r\n    } else if (oldState === 'logged-out' && newState === 'logged-in') {\r\n      direction = 'rotate-right'\r\n    } else if (oldState === 'logged-in' && newState === 'logged-out') {\r\n      direction = 'rotate-left'\r\n    }\r\n\r\n    if (direction) {\r\n      gearRotationClass.value = direction\r\n      gearKey.value++  //  gear \r\n    }\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nconst maskAnimationState = ref('closed')\r\nconst isMaskAnimating = ref(false)\r\n\r\n\r\nwatch(maskState, (newState) => {\r\n  if (newState === 'editing') {\r\n    maskAnimationState.value = 'closing'\r\n  } else {\r\n    maskAnimationState.value = 'opening'\r\n  }\r\n\r\n  isMaskAnimating.value = true\r\n\r\n\r\n  setTimeout(() => {\r\n    isMaskAnimating.value = false\r\n  }, 1200)\r\n})\r\n// \r\nfunction handleMoveSelf() {\r\n  const self = widgets.value.find(w => w.type === 'WidgetSelectorWidget')\r\n  if (!self) {\r\n    console.warn('  WidgetSelectorWidget ')\r\n    return\r\n  }\r\n\r\n  pendingMoveWidget.value = self\r\n\r\n  showClickPreview({\r\n    icon: '',\r\n    width: self.w * 40,\r\n    height: self.h * 40\r\n  })\r\n  turnOffLight()\r\n}\r\n\r\n//  widgetMetadata  widgetList\r\nconst widgetList = Object.entries(widgetMetadata)\r\n  .filter(([, meta]) => !meta.hidden)  \r\n  .map(([type, meta]) => ({\r\n    type,\r\n    ...meta\r\n  }))\r\n\r\n//  widgetList\r\nwatch(() => widgetList, () => {\r\n  const categorizedWidgets = []\r\n  let currentCategory = null\r\n\r\n  //  categoryOrder \r\n  widgetList.sort((a, b) => {\r\n    return categoryOrder.indexOf(a.category) - categoryOrder.indexOf(b.category)\r\n  })\r\n\r\n  // \r\n  widgetList.forEach(widget => {\r\n    if (widget.category !== currentCategory) {\r\n      // \r\n      categorizedWidgets.push({ type: 'category', category: widget.category })\r\n      currentCategory = widget.category\r\n    }\r\n    categorizedWidgets.push(widget)\r\n  })\r\n\r\n  //  ref \r\n  sortedWidgetList.value = categorizedWidgets\r\n}, { immediate: true })\r\n\r\n// \r\nconst categoryNames = {\r\n  function: 'FUNCTIONAL WIDGETS',\r\nsystem: 'SYSTEM WIDGETS',\r\ndebug: 'DEBUG WIDGETS'\r\n}\r\n// \r\nfunction createWidget(type, x = 1, y = 1, sizeKey = null) {\r\n  const meta = widgetMetadata[type];\r\n  const resolvedSizeKey = sizeKey || meta?.sizeOptions?.[0] || 'S';\r\n  const id = `${type}-${resolvedSizeKey}-${Date.now()}`;\r\n  const size = widgetSizes[resolvedSizeKey] || { w: 1, h: 1 };\r\n\r\n  return {\r\n    id,\r\n    renderKey: `${id}-render`,\r\n    type,\r\n    sizeKey: resolvedSizeKey,\r\n    x,\r\n    y,\r\n    w: size.w,\r\n    h: size.h\r\n  };\r\n}\r\n\r\n\r\n// \r\nfunction handleAddClick(type, sizeKey) {\r\n  const newWidget = createWidget(type, 0, 0, sizeKey);  \r\n\r\n  //  emit  newWidget\r\n  emit('add-widget', newWidget);\r\n\r\n  const { w, h } = widgetSizes[sizeKey];\r\n\r\n  showClickPreview({\r\n    icon: widgetMetadata[type]?.icon || '',\r\n    width: w * 40,\r\n    height: h * 40\r\n  });\r\n\r\n  //  payload = newWidget\r\n  pendingPlacement.value = { ...newWidget };\r\n}\r\n\r\n// \r\nwatch(() => auth.isLoggedIn.value, (loggedIn) => {\r\n  if (!loggedIn) {\r\n    expanded.value = false\r\n    nextTick(() => {\r\n      if (scrollRef.value) {\r\n        scrollRef.value.scrollTop = 0\r\n      }\r\n    })\r\n  }\r\n})\r\n\r\nfunction handleBeforeLeave(el) {\r\n\r\n  if (el.classList.contains('on')) {\r\n    el.classList.remove('on');\r\n    el.style.animation = 'none'; \r\n    void el.offsetWidth; \r\n  }\r\n}\r\n\r\nconst wrapperState = ref('') // probing, opening, closing, retracting\r\nconst innerState = ref('')\r\n\r\nfunction openPanel() {\r\n  wrapperState.value = 'probing'\r\n  innerState.value = 'probing'\r\n  setTimeout(() => {\r\n    innerState.value = 'opening'\r\n  }, 300)\r\n}\r\n\r\nfunction closePanel() {\r\n  innerState.value = 'closing'\r\n  setTimeout(() => {\r\n    wrapperState.value = 'retracting'\r\n    innerState.value = 'retracting'\r\n  }, 400)\r\n}\r\n\r\nfunction cancelPreview() {\r\n  closePanel()\r\n  setTimeout(() => {\r\n    removeClickPreview()\r\n    pendingPlacement.value = null\r\n    wrapperState.value = ''\r\n    innerState.value = ''\r\n  }, 700) \r\n}\r\nwatch(pendingPlacement, (val) => {\r\n  if (val) {\r\n    openPanel()\r\n  } else {\r\n    closePanel()\r\n  }\r\n})\r\n\r\n\r\n// emoji \r\nconst stickerEmojis = [\r\n  '', '', '', '', '', '', '', '', '', '',\r\n  '', '', '', '', '', '', '', '', '', '',\r\n  '', '', '', '', '', '', '', '', '', ''\r\n]\r\n\r\n//  4  sticker \r\nconst stickers = ref(generateStickers(4))\r\n\r\nfunction generateStickers(count = 4) {\r\n  const result = []\r\n  const usedEmojis = new Set()\r\n\r\n  // \r\n  const localSafeMargin = 15; \r\n\r\n  const areas = [\r\n    { topStart: 0, leftStart: 0 },\r\n    { topStart: 0, leftStart: 50 },\r\n    { topStart: 50, leftStart: 0 },\r\n    { topStart: 50, leftStart: 50 }\r\n  ]\r\n\r\n  const emojiPool = [...stickerEmojis]\r\n\r\n  for (let i = 0; i < count; i++) {\r\n    const area = areas[i % areas.length]\r\n\r\n    const areaWidth = 50;\r\n    const areaHeight = 50;\r\n\r\n    // \r\n    const innerTopMin = area.topStart + (areaHeight * localSafeMargin) / 100;\r\n    const innerTopMax = area.topStart + areaHeight - (areaHeight * localSafeMargin) / 100;\r\n    const innerLeftMin = area.leftStart + (areaWidth * localSafeMargin) / 100;\r\n    const innerLeftMax = area.leftStart + areaWidth - (areaWidth * localSafeMargin) / 100;\r\n\r\n    //  emoji\r\n    const availableEmojis = emojiPool.filter(e => !usedEmojis.has(e));\r\n    const emoji = availableEmojis.length\r\n      ? availableEmojis[Math.floor(Math.random() * availableEmojis.length)]\r\n      : stickerEmojis[Math.floor(Math.random() * stickerEmojis.length)];\r\n\r\n    usedEmojis.add(emoji);\r\n\r\n    result.push({\r\n      emoji,\r\n      top: Math.random() * (innerTopMax - innerTopMin) + innerTopMin,\r\n      left: Math.random() * (innerLeftMax - innerLeftMin) + innerLeftMin,\r\n      rotate: Math.random() * 40 - 20\r\n    });\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n\r\nconst toolbarStickers = ref(generateToolbarStickers())\r\n\r\nfunction generateToolbarStickers() {\r\n  const positions = [\r\n    { top: '20%', left: '24%', scale: 1 },\r\n    { top: '27%', left: '65%', scale: 1 }\r\n  ]\r\n\r\n  const emojiPool = [...stickerEmojis]\r\n\r\n  return positions.map(pos => ({\r\n    ...pos,\r\n    emoji: emojiPool[Math.floor(Math.random() * emojiPool.length)],\r\n    rotate: Math.floor(Math.random() * 20 - 10) \r\n  }))\r\n}\r\n</script>\r\n\r\n  \r\n  <style scoped>\r\n.selector-widget-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  background-color: #8B0000;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);\r\n  border: none;\r\n  position: relative;\r\n}\r\n\r\n/*  -  */\r\n.selector-toolbar {\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 18px;\r\n  padding: 8px 12px;\r\n  background:\r\n    linear-gradient(to bottom, #dddddd, #bbbbbb),\r\n    radial-gradient(circle at 20% 15%, rgba(0, 0, 0, 0.08) 0%, transparent 40%),\r\n    radial-gradient(circle at 80% 85%, rgba(0, 0, 0, 0.1) 0%, transparent 50%),\r\n    radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.05) 0%, transparent 70%),\r\n    repeating-radial-gradient(circle, rgba(0,0,0,0.02) 0px, rgba(0,0,0,0.02) 1px, transparent 1px, transparent 4px);\r\n  border-bottom: 2px solid #888;\r\n  border-radius: 12px 12px 0 0;\r\n  box-shadow:\r\n    inset 0 -2px 4px rgba(0, 0, 0, 0.2),\r\n    inset 0 2px 4px rgba(255, 255, 255, 0.1);\r\n  position: relative;\r\n  filter: grayscale(0.1) brightness(0.95) contrast(1.1);\r\n  background-blend-mode: multiply, multiply, multiply, multiply, normal;\r\n  overflow: hidden;\r\n}\r\n\r\n.indicator-light {\r\n  width: 20px;\r\n  height: 20px;\r\n  margin-right: 16px;\r\n  border-radius: 50%;\r\n  background: #444;\r\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.5);\r\n  position: relative;\r\n  overflow: visible;\r\n}\r\n\r\n.indicator-glow {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n  pointer-events: none;\r\n  animation: flicker 10s infinite;\r\n  background: currentColor;\r\n  box-shadow:\r\n    0 0 12px currentColor,\r\n    0 0 24px currentColor,\r\n    0 0 36px currentColor;\r\n  opacity: 1;\r\n}\r\n\r\n/*  */\r\n.indicator-glow.green { color: #00ff66; }\r\n.indicator-glow.red { color: #ff3333; }\r\n.indicator-glow.orange { color: #ff9933; }\r\n.indicator-glow.blue { color: #3399ff; }\r\n.indicator-glow.purple { color: #cc66ff; }\r\n@keyframes flicker {\r\n  0%, 100% {\r\n    opacity: 0.95;\r\n    filter: brightness(1);\r\n    transform: translate(0, 0) rotate(0deg);\r\n  }\r\n  3% {\r\n    opacity: 0.7;\r\n    filter: brightness(1.4);\r\n    transform: translate(-0.8px, 0.3px) rotate(-0.5deg);\r\n  }\r\n  7% {\r\n    opacity: 0.85;\r\n    filter: brightness(1.1);\r\n    transform: translate(0.4px, -0.3px) rotate(0.3deg);\r\n  }\r\n  12% {\r\n    opacity: 0.5;\r\n    filter: brightness(0.8);\r\n    transform: translate(-0.5px, 0.5px) rotate(-0.8deg);\r\n  }\r\n  18% {\r\n    opacity: 0.9;\r\n    filter: brightness(1.3);\r\n    transform: translate(0.2px, 0) rotate(0deg);\r\n  }\r\n  26% {\r\n    opacity: 0.6;\r\n    filter: brightness(0.6);\r\n    transform: translate(0.3px, 0.4px) rotate(-0.3deg);\r\n  }\r\n  35% {\r\n    opacity: 0.95;\r\n    filter: brightness(1.5);\r\n    transform: translate(0, 0) rotate(0.1deg);\r\n  }\r\n  45% {\r\n    opacity: 0.55;\r\n    filter: brightness(0.9);\r\n    transform: translate(-0.3px, -0.3px) rotate(0.8deg);\r\n  }\r\n  55% {\r\n    opacity: 0.75;\r\n    filter: brightness(1.2);\r\n    transform: translate(0.2px, 0.2px) rotate(-0.2deg);\r\n  }\r\n  68% {\r\n    opacity: 0.4;\r\n    filter: brightness(0.5);\r\n    transform: translate(-0.4px, 0.4px) rotate(-1deg);\r\n  }\r\n  80% {\r\n    opacity: 0.9;\r\n    filter: brightness(1.4);\r\n    transform: translate(0.5px, -0.5px) rotate(0.5deg);\r\n  }\r\n  90% {\r\n    opacity: 0.6;\r\n    filter: brightness(0.8);\r\n    transform: translate(0, 0) rotate(0deg);\r\n  }\r\n}\r\n\r\n.light-fade-enter-active {\r\n  animation: light-on 0.6s forwards;\r\n}\r\n\r\n.light-fade-leave-active {\r\n  animation: light-off 0.8s forwards;\r\n}\r\n\r\n@keyframes light-on {\r\n  0% {\r\n    opacity: 0.2;\r\n    filter: brightness(0.3);\r\n    box-shadow: 0 0 4px currentColor;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n    filter: brightness(1);\r\n    box-shadow:\r\n      0 0 16px currentColor,\r\n      0 0 32px currentColor,\r\n      0 0 48px currentColor;\r\n  }\r\n}\r\n\r\n@keyframes light-off {\r\n  0% {\r\n    opacity: 1;\r\n    filter: brightness(1);\r\n    box-shadow:\r\n      0 0 16px currentColor,\r\n      0 0 32px currentColor,\r\n      0 0 48px currentColor;\r\n  }\r\n  100% {\r\n    opacity: 0;\r\n    filter: brightness(0.2);\r\n    box-shadow: 0 0 4px currentColor;\r\n  }\r\n}\r\n.selector-toolbar button {\r\n  width: 40px;\r\n  height: 40px;\r\n  font-size: 1rem;\r\n  background: linear-gradient(to bottom, #ff6666, #cc3333);\r\n  color: white;\r\n  border: 2px solid #990000;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: background 0.2s, box-shadow 0.1s, transform 0.1s;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: inset 0 -2px 4px rgba(0, 0, 0, 0.3), 0 3px 6px rgba(0, 0, 0, 0.2);\r\n  box-sizing: border-box;\r\n  text-align: center;\r\n  line-height: 1;\r\n  padding: 0;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n.scroll-wrapper {\r\n  position: relative;\r\n  background: linear-gradient(145deg, #d0d0d0 0%, #999999 100%);\r\n  box-shadow:\r\n    inset 0 2px 4px rgba(255, 255, 255, 0.4),\r\n    inset 0 -4px 8px rgba(0, 0, 0, 0.5),\r\n    0 2px 6px rgba(0, 0, 0, 0.4);\r\n  padding: 8px; \r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-radius: 0 0 12px 12px;\r\n  clip-path: inset(0 0 0 0 round 0 0 12px 12px);\r\n  position: relative; \r\n  overflow: hidden; \r\n  z-index: 11;\r\n}\r\n\r\n.selector-scroll {\r\n  flex-grow: 1;\r\n  overflow-y: auto;\r\n  height: 100%;\r\n  width: 100%;\r\n  background-color: #8B0000;\r\n  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);\r\n  border-radius: 4px;\r\n  position: relative;\r\n  padding: 12px 8px 20px 8px; \r\n  box-sizing: border-box;\r\n}\r\n\r\n\r\n.widget-card {\r\n  position: relative;\r\n  background:\r\n    linear-gradient(145deg, #b0b0b0 0%, #888888 100%),\r\n    repeating-radial-gradient(circle at center, rgba(0,0,0,0.05) 0px, rgba(0,0,0,0.02) 1px, transparent 2px, transparent 6px),\r\n    repeating-radial-gradient(circle at center, rgba(255,255,255,0.03) 0px, transparent 2px, transparent 8px),\r\n    repeating-radial-gradient(circle, rgba(0,0,0,0.02) 0px, rgba(0,0,0,0.02) 1px, transparent 1px, transparent 4px);\r\n    \r\n  background-blend-mode: normal, overlay;\r\n  border-radius: 8px;\r\n  padding: 0.5rem;\r\n  box-shadow:\r\n    inset 0 0 10px rgba(255, 255, 255, 0.3),\r\n    inset 0 0 30px rgba(0, 0, 0, 0.4),\r\n    0 2px 8px rgba(0, 0, 0, 0.2);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  cursor: default;\r\n  color: #222;\r\n  transition: none;\r\n  filter: brightness(0.9) contrast(1.15) saturate(0.7);\r\n  overflow: hidden;\r\n  margin-top: 4px;\r\n}\r\n\r\n.widget-card::before {\r\n  content: '';\r\n  position: absolute;\r\n  inset: 0;\r\n  border-radius: 12px;\r\n  pointer-events: none;\r\n  z-index: 2;\r\n  background:\r\n    radial-gradient(circle at 8px 8px, #c0c0c0 0%, #999 60%, #333 100%),\r\n    radial-gradient(circle at calc(100% - 8px) 8px, #c0c0c0 0%, #999 60%, #333 100%),\r\n    radial-gradient(circle at 8px calc(100% - 8px), #c0c0c0 0%, #999 60%, #333 100%),\r\n    radial-gradient(circle at calc(100% - 8px) calc(100% - 8px), #c0c0c0 0%, #999 60%, #333 100%);\r\n  background-repeat: no-repeat;\r\n  background-size: 10px 10px;\r\n  background-position:\r\n    8px 8px,\r\n    calc(100% - 8px) 8px,\r\n    8px calc(100% - 8px),\r\n    calc(100% - 8px) calc(100% - 8px);\r\n  filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.3));\r\n}\r\n\r\n\r\n/*  */\r\n.widget-entry {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n}\r\n\r\n.widget-entry strong {\r\n  position: relative; \r\n  background:\r\n    linear-gradient(145deg, #dcdcdc 0%, #b0b0b0 100%),\r\n    repeating-linear-gradient(45deg, rgba(255, 255, 255, 0.03) 0, rgba(255, 255, 255, 0.03) 1px, transparent 1px, transparent 3px),\r\n    repeating-linear-gradient(-45deg, rgba(0, 0, 0, 0.03) 0, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 3px),\r\n    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.1) 0%, transparent 50%),\r\n    radial-gradient(circle at 80% 70%, rgba(0,0,0,0.05) 0%, transparent 50%);\r\n  background-blend-mode: normal, overlay, overlay, multiply, multiply;\r\n  padding: 6px 12px;\r\n  border-radius: 6px;\r\n  color: #111;\r\n  font-weight: bold;\r\n  box-shadow:\r\n    inset 0 1px 2px rgba(255, 255, 255, 0.8),\r\n    inset 0 -1px 3px rgba(0, 0, 0, 0.2),\r\n    0 1px 3px rgba(0, 0, 0, 0.2);\r\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.6);\r\n  font-family: 'Arial Black', sans-serif;\r\n  filter: brightness(1.05) contrast(1.05) saturate(0.95);\r\n  padding-left: 20px;\r\n  padding-right: 20px;\r\n}\r\n\r\n.widget-entry strong::before,\r\n.widget-entry strong::after {\r\n  content: '';\r\n  position: absolute;\r\n  top: 50%;\r\n  width: 8px;\r\n  height: 8px;\r\n  background: radial-gradient(circle at 30% 30%, #ccc 0%, #999 60%, #333 100%);\r\n  border-radius: 50%;\r\n  box-shadow:\r\n    0 1px 2px rgba(0, 0, 0, 0.4),\r\n    inset 0 -1px 2px rgba(0, 0, 0, 0.3),\r\n    inset 0 1px 1px rgba(255, 255, 255, 0.6);\r\n  transform: translateY(-50%);\r\n}\r\n\r\n.widget-entry strong::before {\r\n  left: 6px; \r\n}\r\n\r\n.widget-entry strong::after {\r\n  right: 6px;\r\n}\r\n\r\n.widget-entry strong .emoji {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 1.5em;   \r\n  height: 1.5em;\r\n  font-size: 1.2em; \r\n  line-height: 1;\r\n  filter: brightness(0.6) contrast(1.3) grayscale(1);\r\n  mix-blend-mode: multiply;\r\n  opacity: 0.8;\r\n  transform: scale(1);\r\n}\r\n\r\n.size-options {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px; \r\n  justify-content: center;\r\n  margin-top: 12px;\r\n}\r\n\r\n.btn {\r\n  width: 42px;\r\n  height: 42px;\r\n  font-size: 1.2rem;\r\n  background: linear-gradient(to bottom, #ff6666, #cc3333);\r\n  color: white;\r\n  border: 2px solid #990000;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: background 0.2s, box-shadow 0.1s, transform 0.1s;\r\n  display: flex; \r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: inset 0 -2px 4px rgba(0, 0, 0, 0.3), 0 3px 6px rgba(0, 0, 0, 0.2);\r\n  box-sizing: border-box; \r\n  text-align: center;\r\n  line-height: 1;\r\n  padding: 0; \r\n}\r\n\r\n.category-title {\r\n  position: relative;\r\n  background:\r\n    linear-gradient(145deg, #dcdcdc 0%, #b0b0b0 100%),\r\n    repeating-linear-gradient(45deg, rgba(255, 255, 255, 0.03) 0, rgba(255, 255, 255, 0.03) 1px, transparent 1px, transparent 3px),\r\n    repeating-linear-gradient(-45deg, rgba(0, 0, 0, 0.03) 0, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 3px),\r\n    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.1) 0%, transparent 50%),\r\n    radial-gradient(circle at 80% 70%, rgba(0,0,0,0.05) 0%, transparent 50%);\r\n  background-blend-mode: normal, overlay, overlay, multiply, multiply;\r\n  padding: 8px 20px;\r\n  border-radius: 6px;\r\n  color: #111;\r\n  font-weight: bold;\r\n  box-shadow:\r\n    inset 0 1px 2px rgba(255, 255, 255, 0.8),\r\n    inset 0 -1px 3px rgba(0, 0, 0, 0.2),\r\n    0 1px 3px rgba(0, 0, 0, 0.2);\r\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.6);\r\n  font-family: 'Arial Black', sans-serif;\r\n  filter: brightness(1.05) contrast(1.05) saturate(0.95);\r\n  margin-top: 12px;\r\n  text-align: center;\r\n}\r\n\r\n/*  */\r\n.category-title::before,\r\n.category-title::after {\r\n  content: '';\r\n  position: absolute;\r\n  top: 50%;\r\n  width: 8px;\r\n  height: 8px;\r\n  background: radial-gradient(circle at 30% 30%, #ccc 0%, #999 60%, #333 100%);\r\n  border-radius: 50%;\r\n  box-shadow:\r\n    0 1px 2px rgba(0, 0, 0, 0.4),\r\n    inset 0 -1px 2px rgba(0, 0, 0, 0.3),\r\n    inset 0 1px 1px rgba(255, 255, 255, 0.6);\r\n  transform: translateY(-50%);\r\n}\r\n\r\n.category-title::before {\r\n  left: 6px;\r\n}\r\n\r\n.category-title::after {\r\n  right: 6px;\r\n}\r\n\r\n/*  */\r\n/*  */\r\n.toolbar-mask {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 95%;\r\n  height: 100%;\r\n  background:\r\n    linear-gradient(to bottom, #cc3333 0%, #ff5555 50%, #bb2222 100%);\r\n  box-shadow:\r\n    inset 0 0 20px rgba(0, 0, 0, 0.4),\r\n    inset 0 4px 8px rgba(255, 255, 255, 0.1),\r\n    0 0 12px rgba(0, 0, 0, 0.6);\r\n  z-index: 20;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  font-weight: bold;\r\n  pointer-events: all;\r\n  border-radius: 12px 12px 0 0;\r\n  transition: transform 0.7s ease;\r\n  padding-left: 16px;\r\n  box-sizing: border-box;\r\n  background-blend-mode: overlay, normal; \r\n}\r\n/*  ( 14% ) */\r\n.toolbar-mask.state-logged-out {\r\n  transform: translateX(16%);\r\n}\r\n\r\n/*  ( 60% ) */\r\n.toolbar-mask.state-logged-in {\r\n  transform: translateX(64%);\r\n}\r\n\r\n/*  ( 83% ) */\r\n.toolbar-mask.state-editing {\r\n  transform: translateX(94%);\r\n}\r\n\r\n.gear-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  width: 48px;\r\n  height: 48px;\r\n  margin-right: 12px;\r\n  margin-left: -4px; \r\n}\r\n\r\n.gear-icon {\r\n  filter: drop-shadow(0 1px 2px rgba(255, 255, 255, 0.7))\r\n          drop-shadow(0 -1px 2px rgba(0, 0, 0, 0.6));\r\n  transition: transform 0.7s cubic-bezier(0.68, -0.55, 0.27, 1.55);\r\n  will-change: transform;\r\n}\r\n.gear-wrapper.rotate-right .gear-icon {\r\n  animation: rotate-right 0.3s linear;\r\n}\r\n\r\n.gear-wrapper.rotate-left .gear-icon {\r\n  animation: rotate-left 0.3s linear;\r\n}\r\n\r\n@keyframes rotate-right {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(180deg);\r\n  }\r\n}\r\n\r\n@keyframes rotate-left {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(-180deg);\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n/*  */\r\n.scroll-mask {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(to bottom, #cc3333 0%, #ff5555 50%, #bb2222 100%);\r\n  box-shadow:\r\n    inset 0 0 20px rgba(0, 0, 0, 0.4),\r\n    0 6px 20px rgba(0, 0, 0, 0.3);\r\n  border-radius: 8px;\r\n  border-bottom: 4px solid rgba(0, 0, 0, 0.2);\r\n  transform-origin: top center;\r\n}\r\n.sticker-zone {\r\n  position: absolute;\r\n  top: 10%;\r\n  left: 10%;\r\n  width: 80%;\r\n  height: 80%;\r\n  pointer-events: none;\r\n  /*  */\r\n  /* border: 1px dashed rgba(0,0,0,0.1); */\r\n}\r\n\r\n.widget-sticker {\r\n  position: absolute;\r\n  background: #fff8dc;\r\n  color: #333;\r\n  padding: 5px 10px;\r\n  font-size: 28px;\r\n  border-radius: 5px;\r\n  border: 1px solid #aaa;\r\n  font-family: 'Impact', sans-serif;\r\n  pointer-events: none;\r\n  z-index: 2;\r\n  transform: rotate(-16deg);\r\n  box-shadow:\r\n    inset 0 1px 2px rgba(0, 0, 0, 0.3),   \r\n    0 0 2px rgba(0, 0, 0, 0.15);          \r\n}\r\n\r\n.toolbar-sticker {\r\n  position: absolute;\r\n  background: #fff8dc;\r\n  color: #333;\r\n  padding: 2px 4px;\r\n  font-size: 16px;\r\n  border-radius: 4px;\r\n  border: 1px solid #999;\r\n  box-shadow:\r\n    inset 0 1px 2px rgba(0, 0, 0, 0.3),  \r\n    0 0 2px rgba(0, 0, 0, 0.15);          \r\n  font-family: 'Impact', sans-serif;\r\n  pointer-events: none;\r\n  z-index: 3;\r\n}\r\n\r\n\r\n.preview-panel-wrapper {\r\n  position: absolute;\r\n  right: 20%; \r\n  top: 50%;\r\n  transform: translateY(-50%) translateY(-120%);\r\n  transition: transform 0.5s ease-out;\r\n  z-index: 5;\r\n}\r\n\r\n.preview-panel-wrapper.probing,\r\n.preview-panel-wrapper.opening {\r\n  transform: translateY(-50%) translateY(0);\r\n}\r\n\r\n.preview-panel-wrapper.retracting,\r\n.preview-panel-wrapper.closing {\r\n  transform: translateY(-50%) translateY(-120%);\r\n}\r\n\r\n/*  */\r\n.preview-panel-inner {\r\n  transform: rotate(90deg) scale(0.98);\r\n  transform-origin: center center; \r\n  transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);\r\n}\r\n\r\n.preview-panel-inner.opening,\r\n.preview-panel-inner.probing {\r\n  transform: rotate(0deg) scale(1);\r\n}\r\n\r\n.preview-panel-inner.closing,\r\n.preview-panel-inner.retracting {\r\n  transform: rotate(90deg) scale(0.98);\r\n}\r\n/*  transform */\r\n.cancel-preview-btn {\r\n  width: 42px;\r\n  height: 42px;\r\n  font-size: 1rem;\r\n  background: linear-gradient(to bottom, #ff6666, #cc3333);\r\n  color: white;\r\n  border: 2px solid #990000;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: inset 0 -2px 4px rgba(0, 0, 0, 0.3), 0 3px 6px rgba(0, 0, 0, 0.2);\r\n  box-sizing: border-box;\r\n  text-align: center;\r\n  line-height: 1;\r\n  padding: 0;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n.scroll-mask-wrapper {\r\n  position: absolute;\r\n  inset: 0;\r\n  transform-origin: top center;\r\n  z-index: 20;\r\n  pointer-events: all;\r\n  will-change: transform;\r\n  animation-fill-mode: forwards;\r\n  animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);\r\n}\r\n\r\n.scroll-mask-wrapper.opening {\r\n  animation: curtain-drop-3steps 1.2s forwards;\r\n}\r\n\r\n.scroll-mask-wrapper.closing {\r\n  animation: curtain-retract-3steps 1.2s forwards;\r\n}\r\n\r\n.scroll-mask-wrapper {\r\n  position: absolute;\r\n  inset: 0;\r\n  z-index: 20;\r\n  pointer-events: all;\r\n  will-change: transform;\r\n  animation-fill-mode: forwards;\r\n  animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);\r\n}\r\n\r\n.scroll-mask-wrapper.opening {\r\n  animation: curtain-drop-translate 1.2s forwards;\r\n}\r\n\r\n.scroll-mask-wrapper.closing {\r\n  animation: curtain-retract-translate 1.2s forwards;\r\n}\r\n\r\n/*   */\r\n@keyframes curtain-drop-translate {\r\n  0% {\r\n    transform: translateY(-100%);\r\n  }\r\n  25% {\r\n    transform: translateY(-66%) translateY(-4%);\r\n  }\r\n  28% {\r\n    transform: translateY(-66%);\r\n  }\r\n  30% {\r\n    transform: translateY(-66%) translateY(2%);\r\n  }\r\n  32% {\r\n    transform: translateY(-66%);\r\n  }\r\n  59% {\r\n    transform: translateY(-33%) translateY(-4%);\r\n  }\r\n  62% {\r\n    transform: translateY(-33%);\r\n  }\r\n  64% {\r\n    transform: translateY(-33%) translateY(2%);\r\n  }\r\n  66% {\r\n    transform: translateY(-33%);\r\n  }\r\n  100% {\r\n    transform: translateY(0%);\r\n  }\r\n}\r\n\r\n/*   */\r\n@keyframes curtain-retract-translate {\r\n  0% {\r\n    transform: translateY(0%);\r\n    opacity: 1;\r\n  }\r\n  25% {\r\n    transform: translateY(-33%) translateY(4%);\r\n    opacity: 1;\r\n  }\r\n  28% {\r\n    transform: translateY(-33%);\r\n    opacity: 1;\r\n  }\r\n  30% {\r\n    transform: translateY(-33%) translateY(-2%);\r\n    opacity: 1;\r\n  }\r\n  32% {\r\n    transform: translateY(-33%);\r\n    opacity: 1;\r\n  }\r\n  59% {\r\n    transform: translateY(-66%) translateY(4%);\r\n    opacity: 1;\r\n  }\r\n  62% {\r\n    transform: translateY(-66%);\r\n    opacity: 1;\r\n  }\r\n  64% {\r\n    transform: translateY(-66%) translateY(-2%);\r\n    opacity: 1;\r\n  }\r\n  66% {\r\n    transform: translateY(-66%);\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    transform: translateY(-100%);\r\n    opacity: 1;\r\n  }\r\n}\r\n.scroll-mask-decoration {\r\n  position: absolute;\r\n  inset: 0;\r\n  pointer-events: none;\r\n  background:\r\n    linear-gradient(to bottom, transparent 0%, rgba(255, 255, 255, 0.15) 33%, transparent 33%, rgba(255, 255, 255, 0.15) 66%, transparent 66%),\r\n    linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.12) 34%, rgba(0, 0, 0, 0.12) 35%, transparent 35%, rgba(0, 0, 0, 0.12) 67%, rgba(0, 0, 0, 0.12) 68%, transparent 68%),\r\n    repeating-linear-gradient(0deg, rgba(255,255,255,0.03) 0px, rgba(255,255,255,0.03) 1px, transparent 1px, transparent 3px);\r\n  background-size: 100% 100%;\r\n  background-repeat: no-repeat;\r\n  z-index: 25;\r\n  opacity: 1;\r\n}\r\n\r\n/*   */\r\n.scroll-mask-decoration.opening {\r\n  animation: lines-fade-in 1.2s forwards;\r\n}\r\n\r\n.scroll-mask-decoration.closing {\r\n  animation: lines-fade-out 1.2s forwards;\r\n}\r\n\r\n@keyframes lines-fade-in {\r\n  0% {\r\n    transform: translateY(-100%);\r\n  }\r\n  25% {\r\n    transform: translateY(-66%) translateY(-4%);\r\n  }\r\n  28% {\r\n    transform: translateY(-66%);\r\n  }\r\n  30% {\r\n    transform: translateY(-66%) translateY(2%);\r\n  }\r\n  32% {\r\n    transform: translateY(-66%);\r\n  }\r\n  59% {\r\n    transform: translateY(-33%) translateY(-4%);\r\n  }\r\n  62% {\r\n    transform: translateY(-33%);\r\n  }\r\n  64% {\r\n    transform: translateY(-33%) translateY(2%);\r\n  }\r\n  66% {\r\n    transform: translateY(-33%);\r\n  }\r\n  100% {\r\n    transform: translateY(0%);\r\n  }\r\n}\r\n\r\n@keyframes lines-fade-out {\r\n  0% {\r\n    transform: translateY(0%);\r\n    opacity: 1;\r\n  }\r\n  25% {\r\n    transform: translateY(-33%) translateY(4%);\r\n    opacity: 1;\r\n  }\r\n  28% {\r\n    transform: translateY(-33%);\r\n    opacity: 1;\r\n  }\r\n  30% {\r\n    transform: translateY(-33%) translateY(-2%);\r\n    opacity: 1;\r\n  }\r\n  32% {\r\n    transform: translateY(-33%);\r\n    opacity: 1;\r\n  }\r\n  59% {\r\n    transform: translateY(-66%) translateY(4%);\r\n    opacity: 1;\r\n  }\r\n  62% {\r\n    transform: translateY(-66%);\r\n    opacity: 1;\r\n  }\r\n  64% {\r\n    transform: translateY(-66%) translateY(-2%);\r\n    opacity: 1;\r\n  }\r\n  66% {\r\n    transform: translateY(-66%);\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    transform: translateY(-100%);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n\r\n  </style>","import script from \"./WidgetSelectorWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WidgetSelectorWidget.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WidgetSelectorWidget.vue?vue&type=style&index=0&id=fe6ea838&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fe6ea838\"]])\n\nexport default __exports__","\r\n\r\nfunction cleanLayout(raw) {\r\n  try {\r\n    const parsed = JSON.parse(raw || '[]')\r\n    return parsed.filter(w => w.type !== 'IndieTextWidget')\r\n  } catch {\r\n    return []\r\n  }\r\n}\r\n\r\n\r\nexport function getExportData({ userId, auth }) {\r\n  const safeGet = (key, fallback = '[]') =>\r\n    JSON.parse(localStorage.getItem(key) || fallback)\r\n\r\n  return {\r\n    userId,\r\n    currentNickname: auth?.currentNickname?.value || '',\r\n    users: JSON.parse(localStorage.getItem('users') || '{}'),\r\n    layoutCache: {\r\n      large: cleanLayout(localStorage.getItem(`dashboard-layout-${userId}-large`)),\r\n      medium: cleanLayout(localStorage.getItem(`dashboard-layout-${userId}-medium`)),\r\n      small: cleanLayout(localStorage.getItem(`dashboard-layout-${userId}-small`))\r\n    },\r\n    likedFacts: safeGet(`likedFacts_${userId}`),\r\n    weatherCities: safeGet(`weather_widget_cities_user_${userId}`),\r\n    textEditorFiles: safeGet(`text_editor_files_user_${userId}`),\r\n    trashFiles: safeGet(`trash_files_user_${userId}`)\r\n  }\r\n}\r\n\r\n\r\nexport function applyImportData({ data, auth, layoutCache }) {\r\n  const importUserId = data.userId || 'guest'\r\n\r\n  if (data.users) {\r\n    localStorage.setItem('users', JSON.stringify(data.users))\r\n    Object.assign(auth.accounts, data.users)\r\n  }\r\n\r\n  if (data.currentNickname) {\r\n    auth.currentNickname.value = data.currentNickname\r\n  }\r\n\r\n  if (data.userId) {\r\n    auth.currentUser.value = data.userId\r\n  }\r\n\r\n  if (data.layoutCache) {\r\n    Object.entries(data.layoutCache).forEach(([sizeKey, layoutData]) => {\r\n      if (Array.isArray(layoutCache[sizeKey])) {\r\n        layoutCache[sizeKey].splice(0, layoutCache[sizeKey].length, ...layoutData)\r\n      }\r\n      const key = `dashboard-layout-${importUserId}-${sizeKey}`\r\n      localStorage.setItem(key, JSON.stringify(layoutData))\r\n    })\r\n  }\r\n\r\n  if (data.likedFacts) {\r\n    localStorage.setItem(`likedFacts_${importUserId}`, JSON.stringify(data.likedFacts))\r\n  }\r\n\r\n  if (data.weatherCities) {\r\n    localStorage.setItem(`weather_widget_cities_user_${importUserId}`, JSON.stringify(data.weatherCities))\r\n  }\r\n  if (data.textEditorFiles) {\r\n    localStorage.setItem(`text_editor_files_user_${importUserId}`, JSON.stringify(data.textEditorFiles))\r\n  }\r\n\r\n  if (data.trashFiles) {\r\n    localStorage.setItem(`trash_files_user_${importUserId}`, JSON.stringify(data.trashFiles))\r\n  }\r\n\r\n  //  \r\n  window.dispatchEvent(new Event('dashboard-imported'))\r\n}","<template>\r\n    <div class=\"terminal-widget\" ref=\"terminalRef\" v-terminal-cursor>\r\n      <div class=\"screen\" >\r\n        <div v-if=\"!showIntro\" class=\"buttons\">\r\n            <button\r\n    class=\"terminal-btn\"\r\n    @click=\"triggerImport\"\r\n    aria-label=\"Import data\"\r\n  >\r\n    IMPORT\r\n  </button>\r\n            <button\r\n  v-if=\"isLoggedIn\"\r\n  class=\"terminal-btn\"\r\n  @click=\"handleExport\"\r\n  aria-label=\"Export data\"\r\n>\r\n  EXPORT\r\n</button>\r\n  </div>\r\n        <div v-else class=\"intro-screen\">\r\n          *** ROBCO Industries (TM) Termlink ***\r\n        </div>\r\n\r\n  <div class=\"screen-overlay breathing-glow\"></div>\r\n\r\n<div class=\"screen-overlay refresh-sweep\"></div>\r\n      </div>\r\n      <input type=\"file\" ref=\"fileInput\" accept=\"application/json\" @change=\"handleImport\" style=\"display: none;\" />\r\n      <div class=\"scanlines\"></div>\r\n  \r\n\r\n      <button class=\"info-btn\" @click=\"triggerIntro\" :disabled=\"isAnimating\" aria-label=\"Toggle intro screen\"></button>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, inject, computed } from 'vue'\r\n  import { getExportData , applyImportData } from '@/scripts/exportData.js' \r\n  \r\n  const auth = inject('auth')\r\n  const layoutCache = inject('layoutCache')\r\n  const isLoggedIn = computed(() => auth.isLoggedIn.value)\r\n  \r\n  const userId = computed(() => auth?.currentUser?.value || 'guest')\r\n  const fileInput = ref(null)\r\n  \r\n\r\n  const handleExport = () => {\r\n\r\n  ['large', 'medium', 'small'].forEach(sizeKey => {\r\n    const key = `dashboard-layout-${userId.value}-${sizeKey}`\r\n    const cache = localStorage.getItem(key)\r\n    console.log(`[expert] ${key}:`, cache)\r\n    if (!cache) {\r\n      localStorage.setItem(key, JSON.stringify([]))\r\n    }\r\n  })\r\n\r\n  const data = getExportData({ userId: userId.value, auth })\r\n  const json = JSON.stringify(data, null, 2)\r\n  const blob = new Blob([json], { type: 'application/json' })\r\n  const url = URL.createObjectURL(blob)\r\n\r\n  const link = document.createElement('a')\r\n  link.href = url\r\n  link.download = `dashboard-backup-${userId.value}.json`\r\n  link.click()\r\n\r\n  URL.revokeObjectURL(url)\r\n}\r\nconst triggerImport = () => {\r\n  fileInput.value?.click()\r\n}\r\nfunction handleImport(event) {\r\n  const file = event.target.files[0]\r\n  if (!file) return\r\n\r\n  const reader = new FileReader()\r\n  reader.onload = (e) => {\r\n    try {\r\n      console.log('[Import] File content', e.target.result)\r\n      const data = JSON.parse(e.target.result)\r\n      console.log('[Import] Parse results', data)\r\n\r\n      if (!data.layoutCache || typeof data.layoutCache !== 'object') {\r\n        throw new Error('The layoutCache is missing or has a format error.')\r\n      }\r\n\r\n      applyImportData({ data, auth, layoutCache })\r\n      alert(' Import successful, data updated.')\r\n    } catch (err) {\r\n      alert(' Import failed, file format error.')\r\n      console.error('[Import error]', err)\r\n    } finally {\r\n      event.target.value = ''\r\n    }\r\n  }\r\n\r\n  reader.readAsText(file)\r\n}\r\n\r\nconst showIntro = ref(false)\r\nconst isAnimating = ref(false)\r\nconst terminalRef = ref(null)\r\n\r\nconst triggerIntro = () => {\r\n  if (isAnimating.value) return  \r\n\r\n  showIntro.value = true\r\n  isAnimating.value = true\r\n  let step = 0\r\n\r\n  const flashInterval = setInterval(() => {\r\n    if (step % 2 === 0) {\r\n      terminalRef.value?.classList.add('flash-green') \r\n    } else {\r\n      terminalRef.value?.classList.remove('flash-green') \r\n    }\r\n    step++\r\n    if (step >= 6) {\r\n      clearInterval(flashInterval)\r\n      showIntro.value = false\r\n      isAnimating.value = false   \r\n    }\r\n  }, 200)\r\n}\r\n  </script>\r\n  \r\n  <style scoped>\r\n  @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');\r\n  \r\n  .terminal-widget {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: #0b0f0c;\r\n  border: 8px solid #666;  \r\n  border-radius: 12px;\r\n  position: relative;\r\n  overflow: hidden;\r\n  font-family: 'VT323', monospace;\r\n  color: #00ff00;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n\r\n  background-clip: padding-box;\r\n  box-shadow:\r\n    inset 0 2px 4px rgba(255, 255, 255, 0.3), \r\n    inset 0 -2px 6px rgba(0, 0, 0, 0.6),      \r\n    inset 2px 0 6px rgba(255, 255, 255, 0.1),  \r\n    inset -2px 0 6px rgba(0, 0, 0, 0.6),       \r\n    0 0 15px rgba(64, 64, 64, 0.5),            \r\n    0 2px 8px rgba(0, 0, 0, 0.8);              \r\n\r\n\r\n  background-image:\r\n    linear-gradient(135deg, rgba(255, 255, 255, 0.02) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.02) 50%, rgba(255, 255, 255, 0.02) 75%, transparent 75%, transparent),\r\n    linear-gradient(to right, rgba(255,255,255,0.02) 1px, transparent 1px),\r\n    linear-gradient(to bottom, rgba(255,255,255,0.02) 1px, transparent 1px);\r\n  background-size: 100% 100%, 2px 100%, 100% 2px;\r\n\r\n\r\n  filter: saturate(0.8) hue-rotate(-5deg);\r\n\r\n\r\n  transform: perspective(800px) rotateX(1deg) rotateY(0.5deg) scale(1.02);\r\n}\r\n.terminal-widget.flash-green {\r\n  background-color: #00ff00;\r\n}\r\n\r\n\r\n\r\n  \r\n  .screen {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding: 10px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 1;\r\n    position: relative;\r\n    transform: perspective(800px) rotateX(1deg) rotateY(0.5deg) scale(1.02);\r\n  }\r\n\r\n  .screen::before {\r\n  content: '';\r\n  position: absolute;\r\n  inset: 0;\r\n  pointer-events: none;\r\n  background:\r\n    radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,0.4) 100%);\r\n  z-index: 3;\r\n}\r\n\r\n\r\n.screen::after {\r\n  content: '';\r\n  position: absolute;\r\n  inset: 0;\r\n  pointer-events: none;\r\n  mix-blend-mode: screen;\r\n  background:\r\n    radial-gradient(circle at 50% 50%, rgba(0,255,0,0.1) 0%, transparent 70%),\r\n    radial-gradient(circle at 45% 55%, rgba(0,255,0,0.06) 0%, transparent 50%),\r\n    radial-gradient(circle at 55% 45%, rgba(0,255,0,0.06) 0%, transparent 50%);\r\n  filter: blur(1px);\r\n  z-index: 2;\r\n}\r\n  \r\n  .buttons {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 12px;\r\n  }\r\n  \r\n  .terminal-btn {\r\n  width: 90px;\r\n  height: 36px; \r\n  font-size: 16px; \r\n  font-family: 'VT323', monospace;\r\n  color: #00ff00;\r\n  background: transparent;\r\n  border: 2px solid #00ff00;\r\n  border-radius: 6px; \r\n  cursor: pointer;\r\n  text-shadow: 0 0 3px #00ff00;\r\n  box-shadow: inset 0 0 8px rgba(0, 255, 0, 0.2), 0 0 8px rgba(0, 255, 0, 0.4);\r\n  transition: all 0.1s ease-in-out;\r\n}\r\n\r\n.terminal-btn:hover {\r\n  background: rgba(0, 255, 0, 0.1);\r\n}\r\n\r\n.terminal-btn:active {\r\n  transform: scale(0.95);\r\n  background: rgba(0, 255, 0, 0.2);\r\n}\r\n  \r\n.intro-screen {\r\n  font-size: 1rem;\r\n  text-align: center;\r\n  letter-spacing: 1px;\r\n  color: #00ff00;\r\n  text-shadow: 0 0 5px #00ff00;\r\n  transition: color 0.1s linear, text-shadow 0.1s linear;\r\n  margin-bottom: 3px;\r\n}\r\n\r\n\r\n.terminal-widget.flash-green .intro-screen {\r\n  color: #000;\r\n  text-shadow: none;\r\n}\r\n\r\n  \r\n\r\n  .scanlines {\r\n  pointer-events: none;\r\n  position: absolute;\r\n  inset: 0;\r\n  background: repeating-linear-gradient(\r\n    to bottom,\r\n    rgba(0, 255, 0, 0.08) 0px,\r\n    rgba(0, 255, 0, 0.08) 1px,\r\n    transparent 1px,\r\n    transparent 3px\r\n  );\r\n  z-index: 2;\r\n  mix-blend-mode: screen;\r\n  opacity: 0.5;  \r\n}\r\n  \r\n\r\n  .info-btn {\r\n  position: absolute;\r\n  bottom: 4px;\r\n  right: 4px;\r\n  width: 20px;\r\n  height: 20px;\r\n  border: none;\r\n  background: transparent;\r\n  color: #00ff00;\r\n  font-size: 16px;\r\n  text-shadow: 0 0 3px #00ff00;\r\n  z-index: 999;\r\n}\r\n\r\n.info-btn:hover {\r\n  color: #66ff66;\r\n}\r\n\r\n.info-btn:active {\r\n  transform: scale(0.9);\r\n}\r\n\r\n  .flash-effect {\r\n  animation: screenFlash 0.3s steps(1) 3;\r\n}\r\n\r\n@keyframes screenFlash {\r\n  0% { background-color: #0b0f0c; }\r\n  50% { background-color: #00ff00; }\r\n  100% { background-color: #0b0f0c; }\r\n}\r\n\r\n.screen-overlay {\r\n  position: absolute;\r\n  inset: 0;\r\n  pointer-events: none;\r\n  z-index: 10;\r\n}\r\n\r\n\r\n.breathing-glow {\r\n  background: radial-gradient(circle at center, rgba(0, 255, 0, 0.4) 0%, transparent 70%);\r\n  animation: breathing 4s ease-in-out infinite;\r\n}\r\n\r\n@keyframes breathing {\r\n  0%, 100% { transform: scale(1); opacity: 0.2; }\r\n  50% { transform: scale(1.05); opacity: 0.3; }\r\n}\r\n\r\n\r\n.refresh-sweep {\r\n  background: linear-gradient(\r\n    to bottom,\r\n    transparent 0%,\r\n    rgba(0, 255, 0, 4) 40%,\r\n    rgba(0, 255, 0, 0.5) 50%,\r\n    rgba(0, 255, 0, 0.4) 60%,\r\n    transparent 100%\r\n  );\r\n  animation: sweep 6s linear infinite;\r\n}\r\n\r\n@keyframes sweep {\r\n  0% { transform: translateY(-100%); opacity: 0.2; }\r\n  10% { opacity: 0.3; }\r\n  50% { opacity: 0.15; }\r\n  100% { transform: translateY(100%); opacity: 0.2; }\r\n}\r\n.terminal-btn,\r\n.info-btn {\r\n  cursor: inherit !important;\r\n}\r\n  </style>","import script from \"./ImportExportWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ImportExportWidget.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ImportExportWidget.vue?vue&type=style&index=0&id=53cf8d66&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-53cf8d66\"]])\n\nexport default __exports__","import iconFolderClosed from './directory_closed-1.png'\r\nimport iconExplorer from './directory_explorer-1.png'\r\nimport iconFolderOpen from './directory_open_file_mydocs-2.png'\r\nimport iconNotepad from './notepad_file-1.png'\r\nimport iconRecycleBin from './recycle_bin_empty-3.png'\r\nimport iconWindows from './windows_slanted-1.png'\r\nimport iconWm from './wm-3.png'\r\nimport iconWordpad from './write_wordpad-0.png'\r\nimport iconTrust from './trust0-1.png'\r\nimport iconAccessibility from './accessibility_two_windows.png'\r\nimport iconAppWizard from './appwizard-0.png'\r\nimport iconOutlook from './outlook_express_tack-1.png'\r\nimport iconTrustRestrict from './trust1_restrict-0.png'\r\nimport iconWindowsAlt from './windows-0.png'\r\nimport iconWriteFile from './write_file-0.png'\r\nimport iconExecutable from './executable-1.png'\r\nimport iconJoystick from './joystick_alt-1.png'\r\nimport iconSearch from './magnifying_glass-1.png'\r\nimport iconPlay from './soundvor-2.png'\r\n\r\n\r\nexport const icons = {\r\n  folderClosed: iconFolderClosed,    //  \r\n  explorer: iconExplorer,            // \r\n  folderOpen: iconFolderOpen,        //  \r\n  notepad: iconNotepad,              //  \r\n  recycleBin: iconRecycleBin,        //  \r\n  windows: iconWindows,              // Windows Logo\r\n  wm: iconWm,                         // \r\n  wordpad: iconWordpad,\r\n  trust: iconTrust,\r\n  accessibility: iconAccessibility,\r\n  appWizard: iconAppWizard,\r\n  outlook: iconOutlook,\r\n  trustRestrict: iconTrustRestrict,\r\n  windowsAlt: iconWindowsAlt,\r\n  writeFile: iconWriteFile,\r\n  executable: iconExecutable,    // \r\n  joystick: iconJoystick,        // \r\n  search: iconSearch,\r\n  play: iconPlay           \r\n}","import { reactive } from 'vue'\r\n\r\nexport const activeIndieFiles = reactive(new Set())","<template>\r\n    <div class=\"file-window\">\r\n      <!-- Main Title Bar -->\r\n      <div class=\"title-bar\">\r\n  <span class=\"title\">\r\n    <img :src=\"icons.windows\" class=\"icon-filelist\" alt=\"My Files\">\r\n    File Explorer\r\n  </span>\r\n  <button\r\n  v-if=\"showEasterEggButton && currentView === 'folder'\"\r\n  @click=\"togglePlay\"\r\n  class=\"easter-egg-btn\"\r\n  title=\"Return to the Millennium\"\r\n>\r\n  <img :src=\"icons.play\" alt=\"Play\" class=\"easter-egg-icon\" />\r\n</button>\r\n</div>\r\n      \r\n      <div v-if=\"pendingPlacement?.id\" class=\"overlay-mask\">\r\n        <button class=\"cancel-button\" @click=\"cancelPreview\"><img :src=\"icons.trustRestrict\" alt=\"Cancel\" > </button>\r\n</div>\r\n\r\n      <!-- Main Menu -->\r\n      <div class=\"content-area\" v-if=\"currentView === 'folder'\">\r\n        <div class=\"file-item\" @click=\"openEditor\">\r\n          <img :src=\"icons.notepad\" class=\"icon-menu\" alt=\"New Document\" /> New Document\r\n        </div>\r\n        <div class=\"file-item\" @click=\"currentView = 'myFiles'\">\r\n          <img :src=\"icons.folderClosed\" class=\"icon-menu\" alt=\"My Files\" /> My Files\r\n        </div>\r\n        <div class=\"file-item\" @click=\"currentView = 'trash'\">\r\n          <img :src=\"icons.recycleBin\" class=\"icon-menu\" alt=\"Recycle Bin\" /> Recycle Bin\r\n        </div>\r\n      </div>\r\n  \r\n      <!-- Editor View -->\r\n      <div class=\"content-area\" v-else-if=\"currentView === 'editor'\">\r\n        <div class=\"sub-window-wrapper\">\r\n          <div class=\"editor-container\">\r\n            <div class=\"editor-title-bar title-bar-base\">\r\n              <span class=\"title\">\r\n                <img :src=\"icons.wordpad\" class=\"icon-titlebar\" alt=\"Editor\" />\r\n                Text Editor\r\n              </span>\r\n              <div class=\"actions\">\r\n                <button @click=\"saveFile\" title=\"Save\">\r\n                  <img :src=\"icons.trust\" class=\"icon-titlebar\" alt=\"Save\" />\r\n                </button>\r\n                <button @click=\"goBack\" title=\"Back\">\r\n                  <img :src=\"icons.wm\" class=\"icon-titlebar\" alt=\"Back\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n  \r\n            <div class=\"title-input-wrapper\">\r\n              <input\r\n                v-model=\"newTitle\"\r\n                class=\"text-input\"\r\n                placeholder=\"Enter Title (Optional)\"\r\n                maxlength=\"50\"\r\n              />\r\n              <span class=\"char-counter\">{{ newTitle.length }}/50</span>\r\n            </div>\r\n  \r\n            <div class=\"textarea-wrapper\">\r\n              <div\r\n                ref=\"editorRef\"\r\n                class=\"editor-contenteditable\"\r\n                contenteditable=\"true\"\r\n                @input=\"onInput\"\r\n              ></div>\r\n  \r\n              <div class=\"editor-toolbar\">\r\n                <div class=\"toolbar-buttons\">\r\n                  <button @click=\"toggleBold\" :class=\"{ active: isBold }\" title=\"Bold\">B</button>\r\n                  <button @click=\"toggleItalic\" :class=\"{ active: isItalic }\" title=\"Italic\">I</button>\r\n                  <button @click=\"toggleColorPicker\" title=\"Text Color\">\r\n                    <span class=\"color-indicator\" :style=\"{ backgroundColor: currentColor }\"></span>\r\n                  </button>\r\n                </div>\r\n                <span class=\"char-counter\">{{ contentLength }}/500</span>\r\n              </div>\r\n  \r\n              <div class=\"color-picker\" v-if=\"showColorPicker\">\r\n                <span\r\n                  v-for=\"(color, i) in colors\"\r\n                  :key=\"i\"\r\n                  class=\"color-swatch\"\r\n                  :style=\"{ backgroundColor: color }\"\r\n                  @click=\"execColor(color)\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  \r\n      <!-- My Files View -->\r\n      <div class=\"content-area\" v-else-if=\"currentView === 'myFiles'\">\r\n        <div class=\"sub-window-wrapper\">\r\n          <div class=\"files-title-bar title-bar-base sticky\">\r\n            <span class=\"title\">\r\n              <img :src=\"icons.folderClosed\" class=\"icon-menu\" alt=\"My Files\" /> {{ isTrashMode ? 'Deleting...' : 'My Files' }}\r\n            </span>\r\n            <div class=\"actions\">\r\n              <button @click=\"toggleTrashMode\" title=\"Toggle Delete Mode\">\r\n                <img :src=\"icons.recycleBin\" class=\"icon-titlebar\" alt=\"Deletion mode\" />\r\n              </button>\r\n              <button @click=\"goBack\" title=\"Back\">\r\n                <img :src=\"icons.wm\" class=\"icon-titlebar\" alt=\"Back\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class=\"file-browser-body\">\r\n            <div class=\"search-bar-container\">\r\n              <input\r\n                class=\"search-input\"\r\n                v-model=\"searchQuery\"\r\n                placeholder=\" Search title or content\"\r\n              />\r\n              <span class=\"file-count\">{{ filteredFiles.length }} Files</span>\r\n            </div>\r\n            <div class=\"files-scroll-container\">\r\n              <div\r\n  class=\"file-item\"\r\n  :class=\"{\r\n    'file-item-delete': isTrashMode,\r\n    'file-item-disabled': isPinned(file.id)\r\n  }\"\r\n  v-for=\"(file, index) in savedFiles\"\r\n  :key=\"index\"\r\n  @click=\"!isPinned(file.id) && (isTrashMode ? moveToTrash(index) : openSaved(index))\"\r\n>\r\n  <img :src=\"icons.notepad\" class=\"icon-filelist\" />\r\n  <span class=\"file-title\" :title=\"file.title\">{{ file.title }}</span>\r\n</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  \r\n      <!-- Trash View -->\r\n      <div class=\"content-area\" v-else-if=\"currentView === 'trash'\">\r\n        <div class=\"sub-window-wrapper\">\r\n          <div class=\"files-title-bar title-bar-base sticky\">\r\n            <span class=\"title\">\r\n              <img :src=\"icons.recycleBin\" class=\"icon-titlebar\" />\r\n              {{ recoverMode ? 'Recovering...' : deleteMode ? 'Deleting...' : 'Recycle Bin' }}\r\n            </span>\r\n            <div class=\"actions\">\r\n              <button class=\"btn-recover\" :class=\"{ active: recoverMode }\" @click=\"toggleRecoverMode\" title=\"Toggle Rover Mode\"><img :src=\"icons.outlook\" class=\"icon-titlebar\" alt=\"Recvoer\" > </button>\r\n              <button class=\"btn-delete\" :class=\"{ active: deleteMode }\" @click=\"toggleDeleteMode\" title=\"Toggle Deletion Mode\">\r\n                <img :src=\"icons.recycleBin\" class=\"icon-titlebar\" alt=\"Delete mode\" />\r\n              </button>\r\n              <button @click=\"goBack\" title=\"Back\">\r\n                <img :src=\"icons.wm\" class=\"icon-titlebar\" alt=\"Back\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class=\"files-scroll-container\">\r\n            <div\r\n              class=\"file-item\"\r\n              v-for=\"(file, index) in trashFiles\"\r\n              :key=\"index\"\r\n              :class=\"{\r\n                'file-item-recover': recoverMode,\r\n                'file-item-delete': deleteMode\r\n              }\"\r\n              @click=\"handleTrashFileClick(index)\"\r\n            >\r\n              <img :src=\"icons.notepad\" class=\"icon-filelist\"  />\r\n              <span class=\"file-title\" :title=\"file.title\">{{ file.title }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  \r\n      <!-- Document Preview -->\r\n      <div class=\"content-area\" v-else-if=\"currentView === 'viewSaved'\">\r\n        <div class=\"sub-window-wrapper\">\r\n          <div class=\"preview-title-bar title-bar-base\">\r\n            <span class=\"title ellipsis-title\" :title=\"savedFiles[selectedIndex].title\">\r\n              <img :src=\"icons.notepad\" class=\"icon-titlebar\"  /> {{ savedFiles[selectedIndex].title }}\r\n            </span>\r\n            <div class=\"actions\">\r\n              <button @click=\"editFile\" title=\"Edit\"><img :src=\"icons.writeFile\" class=\"icon-titlebar\" alt=\"edit\" ></button>\r\n              <button @click=\"spawnIndieWidget\" title=\"Pin to Pegboard\"><img :src=\"icons.accessibility\" class=\"icon-titlebar\" alt=\"Pin\" ></button>\r\n              <button @click=\"goBackToMyFiles\" title=\"Back\">\r\n                <img :src=\"icons.wm\" class=\"icon-titlebar\" alt=\"Back\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class=\"preview-container file-preview-box\" v-html=\"savedFiles[selectedIndex].content\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\nimport { ref, computed, inject, watch, nextTick,onMounted,watchEffect } from 'vue'\r\nimport { nanoid } from 'nanoid'\r\nimport { icons } from '@/assets/icon/iconRegistry'\r\nimport { widgetSizes } from '@/data/widgetTypes.js'\r\nimport { widgetMetadata } from '@/components/widgets/registry.js'\r\nimport { showClickPreview, removeClickPreview } from '@/scripts/useClickPreview.js'\r\nimport { activeIndieFiles } from '@/scripts/editorState.js'\r\n\r\nconst auth = inject('auth')\r\nconst pendingPlacement = inject('pendingPlacement')\r\nconst widgets = inject('widgets')\r\n\r\nconst currentView = ref('folder')\r\nconst newTitle = ref('')\r\nconst newContent = ref('')\r\nconst selectedIndex = ref(null)\r\nconst isEditing = ref(false)\r\nconst isTrashMode = ref(false)\r\nconst searchQuery = ref('')\r\nconst showColorPicker = ref(false)\r\nconst colors = ['black', 'red', 'blue', 'green']\r\nconst editorRef = ref(null)\r\nconst contentLength = ref(0)\r\nconst currentColor = ref('black')\r\nconst isBold = ref(false)\r\nconst isItalic = ref(false)\r\nconst savedFiles = ref([])\r\nconst trashFiles = ref([])\r\nconst recoverMode = ref(false)\r\nconst deleteMode = ref(false)\r\n\r\n\r\nfunction resetEditorState() {\r\n  isBold.value = false\r\n  isItalic.value = false\r\n  currentColor.value = 'black'\r\n  contentLength.value = 0\r\n  if (editorRef.value) editorRef.value.innerHTML = ''\r\n}\r\n\r\nfunction openEditor() {\r\n  newTitle.value = ''\r\n  newContent.value = ''\r\n  currentView.value = 'editor'\r\n  resetEditorState()\r\n}\r\n\r\nfunction editFile() {\r\n  isEditing.value = true\r\n  currentView.value = 'editor'\r\n  const file = savedFiles.value[selectedIndex.value]\r\n  newTitle.value = file.title\r\n  nextTick(() => {\r\n    if (editorRef.value) {\r\n      editorRef.value.innerHTML = file.content\r\n      onInput()\r\n    }\r\n  })\r\n}\r\n\r\nfunction getSafeUserId() {\r\n  return typeof auth.currentUser?.value === 'string' && auth.currentUser.value.length > 0\r\n    ? auth.currentUser.value\r\n    : 'guest'\r\n}\r\n\r\nconst STORAGE_KEY = computed(() => `text_editor_files_user_${getSafeUserId()}`)\r\nconst STORAGE_TRASH_KEY = computed(() => `trash_files_user_${getSafeUserId()}`)\r\n\r\nfunction loadFiles() {\r\n  const raw = localStorage.getItem(STORAGE_KEY.value)\r\n  savedFiles.value = raw ? JSON.parse(raw) : []\r\n}\r\n\r\nfunction saveFiles() {\r\n  localStorage.setItem(STORAGE_KEY.value, JSON.stringify(savedFiles.value))\r\n}\r\n\r\nfunction loadTrash() {\r\n  const raw = localStorage.getItem(STORAGE_TRASH_KEY.value)\r\n  trashFiles.value = raw ? JSON.parse(raw) : []\r\n}\r\n\r\nfunction saveTrash() {\r\n  localStorage.setItem(STORAGE_TRASH_KEY.value, JSON.stringify(trashFiles.value))\r\n}\r\n\r\nwatch(savedFiles, saveFiles, { deep: true })\r\nwatch(trashFiles, saveTrash, { deep: true })\r\n\r\nwatch(() => auth.currentUser?.value, () => {\r\n  loadFiles()\r\n  loadTrash()\r\n})\r\n\r\nwindow.addEventListener('dashboard-imported', () => {\r\n  loadFiles()\r\n  loadTrash()\r\n})\r\n\r\nfunction saveFile() {\r\n  const html = editorRef.value.innerHTML.trim()\r\n  const plainText = editorRef.value.innerText.trim()\r\n  if (plainText.length === 0) return\r\n\r\n  let baseTitle = newTitle.value.trim() || `Unnamed Doc`\r\n  if (!baseTitle.endsWith('.txt')) baseTitle += '.txt'\r\n\r\n  if (isEditing.value && selectedIndex.value !== null) {\r\n    const original = savedFiles.value[selectedIndex.value]\r\n    savedFiles.value[selectedIndex.value] = {\r\n      ...original,\r\n      title: baseTitle,\r\n      content: html\r\n    }\r\n    isEditing.value = false\r\n  } else {\r\n    let title = baseTitle\r\n    let count = 1\r\n    const existingTitles = savedFiles.value.map(f => f.title)\r\n    while (existingTitles.includes(title)) {\r\n      const nameWithoutExt = baseTitle.replace(/\\.txt$/, '')\r\n      title = `${nameWithoutExt}(${count}).txt`\r\n      count++\r\n    }\r\n    savedFiles.value.push({\r\n      id: nanoid(),\r\n      title,\r\n      content: html\r\n    })\r\n  }\r\n\r\n  currentView.value = 'myFiles'\r\n}\r\n\r\nfunction openSaved(index) {\r\n  selectedIndex.value = index\r\n  currentView.value = 'viewSaved'\r\n}\r\n\r\nfunction goBack() {\r\n  recoverMode.value = false\r\n  deleteMode.value = false\r\n  isTrashMode.value = false\r\n  selectedIndex.value = null\r\n  currentView.value = 'folder'\r\n}\r\n\r\nfunction goBackToMyFiles() {\r\n  recoverMode.value = false\r\n  deleteMode.value = false\r\n  isTrashMode.value = false\r\n  selectedIndex.value = null\r\n  currentView.value = 'myFiles'\r\n}\r\n\r\nfunction toggleBold() {\r\n  editorRef.value.focus()\r\n  document.execCommand('bold', false, null)\r\n  requestAnimationFrame(() => {\r\n    isBold.value = document.queryCommandState('bold')\r\n  })\r\n}\r\n\r\nfunction toggleItalic() {\r\n  editorRef.value.focus()\r\n  document.execCommand('italic', false, null)\r\n  requestAnimationFrame(() => {\r\n    isItalic.value = document.queryCommandState('italic')\r\n  })\r\n}\r\n\r\nfunction execColor(color) {\r\n  editorRef.value.focus()\r\n  document.execCommand('foreColor', false, color)\r\n  currentColor.value = color\r\n  showColorPicker.value = false\r\n}\r\n\r\nfunction toggleColorPicker() {\r\n  showColorPicker.value = !showColorPicker.value\r\n}\r\n\r\nfunction onInput() {\r\n  const length = editorRef.value.innerText.length\r\n  const text = editorRef.value.innerText.replace(/\\u200B/g, '').trim()\r\n  contentLength.value = text.length\r\n  if (length > 500) {\r\n    editorRef.value.innerText = editorRef.value.innerText.slice(0, 500)\r\n    contentLength.value = 500\r\n  }\r\n}\r\n\r\ndocument.addEventListener('selectionchange', () => {\r\n  isBold.value = document.queryCommandState('bold')\r\n  isItalic.value = document.queryCommandState('italic')\r\n})\r\n\r\nconst filteredFiles = computed(() => {\r\n  const query = searchQuery.value.trim().toLowerCase()\r\n  if (!query) return savedFiles.value\r\n  return savedFiles.value.filter(f =>\r\n    f.title.toLowerCase().includes(query) ||\r\n    f.content.toLowerCase().includes(query)\r\n  )\r\n})\r\n\r\nfunction toggleTrashMode() {\r\n  isTrashMode.value = !isTrashMode.value\r\n}\r\n\r\nfunction moveToTrash(index) {\r\n  const removed = savedFiles.value.splice(index, 1)[0]\r\n  trashFiles.value.push(removed)\r\n}\r\n\r\nfunction handleTrashFileClick(index) {\r\n  if (recoverMode.value) {\r\n    const file = trashFiles.value.splice(index, 1)[0]\r\n    let title = file.title.replace(/\\.txt$/, '')\r\n    let ext = '.txt'\r\n    let count = 1\r\n    const existing = savedFiles.value.map(f => f.title)\r\n\r\n    let newTitle = `${title}${ext}`\r\n    while (existing.includes(newTitle)) {\r\n      newTitle = `${title}(${count})${ext}`\r\n      count++\r\n    }\r\n\r\n    savedFiles.value.push({\r\n      id: nanoid(),\r\n      title: newTitle,\r\n      content: file.content\r\n    })\r\n  }\r\n\r\n  if (deleteMode.value) {\r\n    trashFiles.value.splice(index, 1)\r\n  }\r\n}\r\n\r\nfunction toggleDeleteMode() {\r\n  deleteMode.value = !deleteMode.value\r\n  if (deleteMode.value) recoverMode.value = false\r\n\r\n  safeUpdateEasterEggState('delete')\r\n}\r\n\r\nfunction toggleRecoverMode() {\r\n  recoverMode.value = !recoverMode.value\r\n  if (recoverMode.value) deleteMode.value = false\r\n\r\n  safeUpdateEasterEggState('recover')\r\n}\r\n\r\nfunction isPinned(fileId) {\r\n  return widgets?.value?.some(w => w?.type === 'IndieTextWidget' && w?.props?.fileId === fileId)\r\n}\r\n\r\nfunction spawnIndieWidget() {\r\n  const type = 'IndieTextWidget'\r\n  const sizeKey = 'W'\r\n  const size = widgetSizes[sizeKey] || { w: 2, h: 2 }\r\n\r\n  const file = savedFiles.value[selectedIndex.value]\r\n  if (!file) {\r\n    console.warn(' No file is selected currently, so the widget cannot be generated.')\r\n    return\r\n  }\r\n\r\n  const widgetId = `${type}-${sizeKey}-${Date.now()}`\r\n  pendingPlacement.value = {\r\n    id: widgetId,\r\n    renderKey: `${widgetId}-render`,\r\n    type,\r\n    sizeKey,\r\n    x: 0,\r\n    y: 0,\r\n    w: size.w,\r\n    h: size.h,\r\n    props: {\r\n      fileId: file.id,\r\n      id: widgetId\r\n    }\r\n  }\r\n\r\n  showClickPreview({\r\n    icon: widgetMetadata[type]?.icon || '',\r\n    width: size.w * 40,\r\n    height: size.h * 40\r\n  })\r\n\r\n  console.log(' IndieTextWidget Preview has been activated. Please click to place.fileId =', file.id)\r\n  activeIndieFiles.add(file.id)\r\n  goBackToMyFiles()\r\n}\r\n\r\nfunction cancelPreview() {\r\n  removeClickPreview()\r\n  pendingPlacement.value = null\r\n}\r\n\r\nwatchEffect(() => {\r\n  const currentFile = savedFiles.value[selectedIndex.value]\r\n  if (currentView.value === 'viewSaved' && currentFile) {\r\n    if (activeIndieFiles.has(currentFile.id)) {\r\n      console.warn(' The current file has been pinned. Exit the editing view.')\r\n      goBackToMyFiles()\r\n    }\r\n  }\r\n})\r\n\r\nonMounted(() => {\r\n  loadFiles()\r\n  loadTrash()\r\n})\r\n\r\n\r\nconst easterEggSequence = ref([])\r\nconst showEasterEggButton = ref(false)\r\n\r\nfunction safeUpdateEasterEggState(modeClicked) {\r\n  if (currentView.value !== 'trash') return\r\n  if (trashFiles.value.length > 0) return\r\n\r\n  easterEggSequence.value.push(modeClicked)\r\n  if (easterEggSequence.value.length > 4) {\r\n    easterEggSequence.value.shift() \r\n  }\r\n\r\n  const pattern = easterEggSequence.value.join('-')\r\n  if (pattern === 'delete-recover-recover-delete') {\r\n    showEasterEggButton.value = true\r\n    console.log('Return to the Millennium!')\r\n  }\r\n}\r\n\r\nconst primaryUrl = (process.env.BASE_URL || '/') + 'NewBoys.mp3'\r\nconst fallbackUrl = './NewBoys.mp3'\r\n\r\nconst audioRef = new Audio(primaryUrl)\r\n\r\n// fallback: if primary fails, try the original relative path\r\naudioRef.addEventListener('error', () => {\r\n  if (!audioRef.src.includes('NewBoys.mp3') || audioRef.src.includes(primaryUrl)) {\r\n    audioRef.src = fallbackUrl\r\n    audioRef.load()\r\n  }\r\n})\r\n\r\nfunction togglePlay() {\r\n  if (audioRef.paused) {\r\n    audioRef.play()\r\n  } else {\r\n    audioRef.pause()\r\n    audioRef.currentTime = 0\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n  \r\n  <style scoped>\r\n\r\n  .window-box {\r\n    border: 2px solid black;\r\n    box-shadow: inset -2px -2px #fff, inset 2px 2px #808080;\r\n    background-color: #f4f4f4;\r\n    padding: 4px;\r\n  }\r\n  \r\n  .title-bar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: 26px;               \r\n  padding: 0 6px;\r\n  background-color: #000080;\r\n  color: white;\r\n  font-size: 13px;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.icon-filelist {\r\n  height: 16px;\r\n  width: 16px;\r\n}\r\n\r\n.easter-egg-btn {\r\n  width: 24px;\r\n  height: 24px;\r\n  padding: 0;\r\n  border: 2px outset #fff;\r\n  box-shadow: inset -1px -1px #fff, inset 1px 1px #808080;\r\n  background-color: #ececec;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.easter-egg-icon {\r\n  width: 16px;\r\n  height: 16px;\r\n  image-rendering: pixelated; \r\n}\r\n .title-bar-base .actions {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n  }\r\n  \r\n  .title-bar-base .actions button {\r\n    width: 24px;\r\n  height: 24px;\r\n  aspect-ratio: 1 / 1;\r\n  padding: 0;\r\n  border: 2px outset #fff;\r\n  box-shadow: inset -1px -1px #fff, inset 1px 1px #808080;\r\n  font-size: 16px;\r\n  line-height: 1;\r\n  font-family: 'Segoe UI Emoji', sans-serif;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  user-select: none;\r\n  }\r\n  \r\n  .editor-title-bar {\r\n    height: 22px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 6px;\r\n    font-size: 12.5px;\r\n    background-color: #000080;\r\n    color: white;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n  \r\n  .files-title-bar {\r\n    height: 22px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 6px;\r\n    font-size: 12.5px;\r\n    background-color: #000080;\r\n    color: white;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n  \r\n  .preview-title-bar {\r\n    height: 22px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 6px;\r\n    font-size: 12.5px;\r\n    background-color: #000080;\r\n    color: white;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    max-width: 100%;\r\n  }\r\n  \r\n  .editor-container,\r\n  .preview-container {\r\n    border: 2px solid black;\r\n    box-shadow: inset -2px -2px #fff, inset 2px 2px #808080;\r\n    background-color: #f4f4f4;\r\n    padding: 4px;\r\n    \r\n  }\r\n  \r\n  .files-title-bar.sticky {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 10;\r\n  }\r\n  \r\n  .files-scroll-container {\r\n    overflow-y: auto;\r\n    height: 220px;\r\n    box-shadow: inset -2px -2px #fff, inset 2px 2px #808080;\r\n    background-color: #f4f4f4;\r\n    padding: 4px;\r\n  }\r\n  \r\n  .preview-container {\r\n  padding: 0;\r\n  overflow: visible;\r\n  height: auto;\r\n  flex-grow: 1;\r\n}\r\n  .file-window {\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100%;\r\n    background-color: #c0c0c0;\r\n    border: 2px solid black;\r\n    box-shadow: inset -2px -2px #ffffff, inset 2px 2px #808080;\r\n    padding: 6px;\r\n    font-family: 'Courier New', monospace;\r\n  }\r\n  \r\n  .title-bar {\r\n    background-color: #000080;\r\n    color: white;\r\n    padding: 4px;\r\n    font-weight: bold;\r\n    font-size: 14px;\r\n  }\r\n  \r\n  .content-area {\r\n    flex: 1;\r\n    padding: 8px;\r\n    background-color: #ffffff;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n    overflow-y: hidden;\r\n  }\r\n  \r\n  .file-item {\r\n    background-color: #e0e0e0;\r\n    border: 1px solid #808080;\r\n    padding: 6px;\r\n    cursor: pointer;\r\n    box-shadow: inset -1px -1px #fff, inset 1px 1px #a0a0a0;\r\n  }\r\n  .file-item:hover {\r\n    background-color: #d0d0d0;\r\n  }\r\n  \r\n  .sub-window-wrapper {\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100%;\r\n    overflow: hidden;\r\n  }\r\n  \r\n  .title-input-wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .text-input {\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n    padding: 6px;\r\n    background-color: #dcdcdc;\r\n    border: 2px inset #fff;\r\n    font-size: 14px;\r\n    font-family: 'Courier New', monospace;\r\n    border-radius: 0;\r\n    outline: none;\r\n  }\r\n  \r\n  .textarea-wrapper {\r\n    position: relative;\r\n  }\r\n  \r\n  .editor-contenteditable {\r\n    width: 100%;\r\n    height: 120px;\r\n    overflow-y: auto;\r\n    padding: 8px;\r\n    font-size: 14px;\r\n    font-family: 'Courier New', monospace;\r\n    background-color: #dcdcdc;\r\n    border: 2px inset #fff;\r\n    border-radius: 0;\r\n    outline: none;\r\n    white-space: pre-wrap;\r\n    word-break: break-word;\r\n  }\r\n  \r\n  .editor-toolbar {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    font-size: 12px;\r\n    margin-top: 4px;\r\n  }\r\n  \r\n  .toolbar-buttons {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    gap: 6px;\r\n  }\r\n  \r\n  .toolbar-buttons button {\r\n    width: 24px;\r\n  height: 24px;\r\n  aspect-ratio: 1 / 1;\r\n  padding: 0;\r\n  border: 2px outset #fff;\r\n  box-shadow: inset -1px -1px #fff, inset 1px 1px #808080;\r\n  font-size: 16px;\r\n  line-height: 1;\r\n  font-family: 'Segoe UI Emoji', sans-serif;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  user-select: none;\r\n  }\r\n  \r\n  .toolbar-buttons button:hover {\r\n    background-color: #ccc;\r\n  }\r\n  \r\n  .toolbar-buttons button.active {\r\n    background-color: #bbb;\r\n    border: 2px inset #666;\r\n    box-shadow: inset 1px 1px 2px #999;\r\n  }\r\n  \r\n  .color-picker {\r\n    position: absolute;\r\n    bottom: 40px;\r\n    right: 0;\r\n    background: #dcdcdc;\r\n    padding: 4px;\r\n    border-top: 2px solid #fff;\r\n    border-left: 2px solid #fff;\r\n    border-bottom: 2px solid #444;\r\n    border-right: 2px solid #444;\r\n    display: flex;\r\n    gap: 4px;\r\n    z-index: 10;\r\n  }\r\n  \r\n  .color-indicator {\r\n    width: 14px;\r\n    height: 14px;\r\n    background-color: currentColor;\r\n    border: 1px solid #444;\r\n    box-shadow: inset -1px -1px #fff, inset 1px 1px #aaa;\r\n    display: inline-block;\r\n  }\r\n  \r\n  .color-swatch {\r\n    width: 20px;\r\n    height: 20px;\r\n    border: 1px solid #000;\r\n    box-shadow: inset -1px -1px #fff, inset 1px 1px #aaa;\r\n    cursor: pointer;\r\n  }\r\n  \r\n  .char-counter {\r\n    font-size: 12px;\r\n    color: #333;\r\n  }\r\n  \r\n  .content-counter {\r\n    position: absolute;\r\n    bottom: 4px;\r\n    right: 8px;\r\n    background: #f4f4f4;\r\n    padding: 0 4px;\r\n    font-family: monospace;\r\n  }\r\n  \r\n  .file-preview-box {\r\n  background-color: #fff;\r\n  border: 2px inset #ccc;\r\n  padding: 10px;\r\n  font-family: 'Courier New', monospace;\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n  height: 200px;                 \r\n  overflow-y: auto;              \r\n  overflow-x: hidden;\r\n  white-space: pre-wrap;\r\n  word-break: break-word;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n  \r\n  .ellipsis-title {\r\n    display: inline-block;\r\n    max-width: calc(100% - 60px);\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    vertical-align: middle;\r\n  }\r\n  \r\n  .file-title {\r\n    display: inline-block;\r\n    max-width: 85%;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    vertical-align: middle;\r\n  }\r\n\r\n  .file-browser-body {\r\n  border: 2px solid black;\r\n  box-shadow: inset -2px -2px #fff, inset 2px 2px #808080;\r\n  background-color: #f4f4f4;\r\n  padding: 6px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n  flex: 1;                 \r\n  overflow: hidden;\r\n  min-height: 0;           \r\n}\r\n\r\n.search-bar-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.search-input {\r\n  flex-grow: 1;\r\n  padding: 4px 8px;\r\n  font-family: 'Courier New', monospace;\r\n  font-size: 13px;\r\n  border: 2px inset #fff;\r\n  background-color: #dcdcdc;\r\n  outline: none;\r\n}\r\n\r\n.file-count {\r\n  font-size: 12px;\r\n  color: #333;\r\n  min-width: 60px;\r\n  text-align: right;\r\n}\r\n\r\n.files-scroll-container {\r\n  overflow-y: auto;\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n}\r\n\r\n.file-item-delete {\r\n  background-color: #ff4d4d !important; \r\n  color: white;\r\n  font-weight: bold;\r\n  border: 1px solid #800000;\r\n  box-shadow: inset -1px -1px #fff0f0, inset 1px 1px #a00000;\r\n}\r\n.file-item-delete:hover {\r\n  background-color: #e04444 !important;\r\n}\r\n\r\n\r\n.file-item-recover {\r\n  background-color: #90ee90 !important;\r\n  border: 1px solid #006400;\r\n  color: black;\r\n  font-weight: bold;\r\n}\r\n\r\n.file-item-delete {\r\n  background-color: #ff4d4d !important;\r\n  border: 1px solid #800000;\r\n  color: white;\r\n  font-weight: bold;\r\n}\r\n\r\n.icon {\r\n  vertical-align: middle;\r\n  image-rendering: pixelated; \r\n}\r\n\r\n\r\n.icon-titlebar {\r\n  width: 16px;\r\n  height: 16px;\r\n  margin-left: 2px;\r\n  margin-right: 2px;\r\n}\r\n\r\n\r\n.icon-menu {\r\n  width: 20px;\r\n  height: 20px;\r\n  margin-left: 8px;\r\n  margin-right: 8px;\r\n}\r\n\r\n\r\n.icon-filelist {\r\n  width: 18px;\r\n  height: 18px;\r\n  margin-left: 6px;\r\n  margin-right: 6px;\r\n}\r\n\r\n.overlay-mask {\r\n  position: absolute;\r\n  inset: 0;\r\n  background-color: #c0c0c0;              \r\n  border: 2px inset #808080;              \r\n  z-index: 10;                           \r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-family: 'Courier New', monospace; \r\n  color: #000;\r\n  font-size: 14px;\r\n  pointer-events: all;                    \r\n  box-shadow: inset 1px 1px #fff, inset -1px -1px #404040;\r\n}\r\n.cancel-button {\r\n  background-color: #dcdcdc;                      \r\n  border: 2px outset #fff;                        \r\n  box-shadow: inset -1px -1px #fff, inset 1px 1px #808080;\r\n  padding: 12px 28px;\r\n  font-size: 18px;\r\n  font-family: 'Courier New', monospace;\r\n  color: #000;\r\n  cursor: pointer;\r\n  user-select: none;\r\n  text-shadow: 1px 1px #f0f0f0;\r\n}\r\n\r\n.cancel-button:active {\r\n  border-style: inset;\r\n  box-shadow: inset 1px 1px #fff, inset -1px -1px #808080;\r\n}\r\n.file-item-disabled {\r\n  opacity: 0.4;\r\n  pointer-events: none;\r\n}\r\n  </style>","import script from \"./TextEditorWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TextEditorWidget.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TextEditorWidget.vue?vue&type=style&index=0&id=d6ec03c0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d6ec03c0\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"file-window\">\r\n      <!--  -->\r\n      <div class=\"title-bar\">\r\n        <span class=\"title\">\r\n            <img :src=\"icons.notepad\" class=\"icon-flielist\" alt=\"New Document\" />\r\n          {{ title }}\r\n        </span>\r\n        <div class=\"toolbar-buttons\">\r\n            <button class=\"icon-btn\" @click=\"$emit('request-move', id)\" title=\"Move\"><img :src=\"icons.joystick\" class=\"icon-flielist\" alt=\"move\" /></button>\r\n            <button class=\"icon-btn\" @click=\"toggleSize\" title=\"expend in/out\"><img :src=\"icons.search\" class=\"icon-flielist\" alt=\"expend\" /></button>\r\n          <button class=\"icon-btn\" @click=\"$emit('delete-widget', id)\" title=\"Minimize\"><img :src=\"icons.executable\" class=\"icon-flielist\" alt=\"remove\" /></button>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"content-area\">\r\n        <div class=\"file-preview-box\" v-html=\"content\"></div>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, inject, watchEffect,defineProps, onUnmounted } from 'vue'\r\nimport { icons } from '@/assets/icon/iconRegistry'\r\nimport { activeIndieFiles } from '@/scripts/editorState.js'\r\n\r\nconst props = defineProps({\r\n  fileId: { type: String, required: true },\r\n  id: { type: String, required: true },\r\n  sizeKey: { type: String, default: 'W' }\r\n})\r\n\r\nconst emit = defineEmits(['delete-widget', 'resize-widget', 'request-move'])\r\n\r\nconst auth = inject('auth')\r\nconst content = ref(' Loading...')\r\n\r\nconst safeUserId = computed(() =>\r\n  typeof auth?.currentUser?.value === 'string' && auth.currentUser.value.length > 0\r\n    ? auth.currentUser.value\r\n    : 'guest'\r\n)\r\n\r\nconst STORAGE_KEY = computed(() => `text_editor_files_user_${safeUserId.value}`)\r\n\r\nconst title = computed(() => {\r\n  const list = JSON.parse(localStorage.getItem(STORAGE_KEY.value) || '[]')\r\n  return list.find(f => f.id === props.fileId)?.title || 'Unknown Title'\r\n})\r\n\r\nwatchEffect(() => {\r\n  try {\r\n    const list = JSON.parse(localStorage.getItem(STORAGE_KEY.value) || '[]')\r\n    const match = list.find(f => f.id === props.fileId)\r\n    content.value = match?.content || ' The document does not exist or is empty.'\r\n  } catch (e) {\r\n    console.error(' Failed to load content from localStorage:', e)\r\n    content.value = ' fail to load'\r\n  }\r\n})\r\n\r\nfunction toggleSize() {\r\n  const next = props.sizeKey === 'W' ? 'L' : 'W'\r\n  emit('resize-widget', { id: props.id, nextSizeKey: next })\r\n}\r\n\r\nonUnmounted(() => {\r\n  if (props.fileId) {\r\n    activeIndieFiles.delete(props.fileId)\r\n    console.log(' Unregistered widget file ID:', props.fileId)\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.file-window {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  background-color: #c0c0c0;\r\n  border: 2px solid black;\r\n  box-shadow: inset -2px -2px #ffffff, inset 2px 2px #808080;\r\n  padding: 6px;\r\n  font-family: 'Courier New', monospace;\r\n}\r\n\r\n.title-bar {\r\n  background-color: #000080;\r\n  color: white;\r\n  padding: 4px;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 6px;\r\n}\r\n.title {\r\n  flex: 1;                          \r\n  overflow: hidden;                 \r\n  white-space: nowrap;             \r\n  text-overflow: ellipsis;         \r\n  display: block;\r\n  margin-left: 4px;                  \r\n}\r\n\r\n.icon-filelist {\r\n  width: 16px;\r\n  height: 16px;\r\n  image-rendering: pixelated;\r\n}\r\n\r\n.toolbar-buttons {\r\n  margin-left: auto;\r\n  display: flex;\r\n  gap: 4px;\r\n}\r\n\r\n.icon-btn {\r\n  width: 24px;\r\n  height: 24px;\r\n  aspect-ratio: 1 / 1;\r\n  padding: 0;\r\n  border: 2px outset #fff;\r\n  box-shadow: inset -1px -1px #fff, inset 1px 1px #808080;\r\n  font-size: 16px;                     \r\n  line-height: 1;\r\n  font-family: 'Segoe UI Emoji', sans-serif;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n\r\n.icon-btn:active {\r\n  border-style: inset;\r\n  box-shadow: inset 1px 1px #fff, inset -1px -1px #808080;\r\n}\r\n\r\n.content-area {\r\n  flex: 1;\r\n  padding: 8px;\r\n  background-color: #ffffff;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow-y: auto;\r\n}\r\n\r\n.file-preview-box {\r\n  background-color: #fff;\r\n  border: 2px inset #ccc;\r\n  padding: 10px;\r\n  font-family: 'Courier New', monospace;\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  white-space: pre-wrap;\r\n  word-break: break-word;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n</style>\r\n","import script from \"./IndieTextWidget.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./IndieTextWidget.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./IndieTextWidget.vue?vue&type=style&index=0&id=49826b14&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-49826b14\"]])\n\nexport default __exports__","\r\n\r\nimport PomodoroWidget from './PomodoroWidget.vue'\r\nimport TestWidget from './TestWidget.vue'\r\nimport LoginWidget from './LoginWidget.vue'\r\nimport WeatherWidget from './WeatherWidget/WeatherWidgetContainer.vue'\r\nimport FunFactWidget from './FunFactWidget.vue'\r\nimport WidgetSelectorWidget from './WidgetSelectorWidget.vue'\r\nimport ImportExportWidget from './ImportExportWidget.vue'\r\nimport TextEditorWidget from './TextEditorWidget/TextEditorWidget.vue'\r\nimport IndieTextWidget from './TextEditorWidget/IndieTextWidget.vue'\r\n\r\n\r\nexport const widgetRegistry = {\r\n  PomodoroWidget,\r\n  TestWidget,\r\n  LoginWidget,\r\n  WeatherWidget,\r\n  FunFactWidget,\r\n  WidgetSelectorWidget,\r\n  TextEditorWidget,\r\n  IndieTextWidget,\r\n  ImportExportWidget,\r\n  \r\n}\r\n\r\nexport const categoryOrder = ['function', 'system', 'debug']\r\n\r\nexport const widgetMetadata = {\r\n    PomodoroWidget: {\r\n      name: 'Pomodoro',\r\n      icon: '',\r\n      sizeOptions: ['S'],\r\n      category: 'function',\r\n    },\r\n    TextEditorWidget: {\r\n      name: 'Text Editor',\r\n      icon: '',\r\n      sizeOptions: ['L'],  \r\n      category: 'function',\r\n    },\r\n    TestWidget: {\r\n      name: 'TestWidget',\r\n      icon: '',\r\n      sizeOptions: ['S', 'W', 'T', 'L'],\r\n      category: 'debug' \r\n    },\r\n    ImportExportWidget: {\r\n      name: 'Data Manager',\r\n      icon: '',\r\n      sizeOptions: ['S'],\r\n      category: 'system'\r\n    },\r\n    LoginWidget: {\r\n      name: 'Login',\r\n      icon: '',\r\n      sizeOptions: ['W'],  \r\n      category: 'system',\r\n    },\r\n    WeatherWidget: {\r\n      name: 'Weather',\r\n      icon: '',\r\n      sizeOptions: ['T'],\r\n      category: 'function',\r\n    },\r\n    FunFactWidget: {\r\n      name: 'Fun Facts',\r\n      icon: '',  \r\n      sizeOptions: ['L'],\r\n      category: 'function',\r\n    },\r\n    WidgetSelectorWidget: {\r\n      name: 'Widget Picker',\r\n      icon: '',\r\n      sizeOptions: ['L'],\r\n      category: 'system',\r\n    },\r\n    IndieTextWidget: {\r\n      name: 'Indie Text',\r\n      icon: '',\r\n      sizeOptions: ['W', 'L'],\r\n      category: 'function',\r\n      hidden: true, \r\n    },\r\n    \r\n  }","import { computed, toRef } from 'vue'\r\n\r\nexport function useGridPositioning(columns, rows, cellSize = 140, cellGap = 16) {\r\n  const _cellSize = toRef(cellSize)\r\n  const _cellGap = toRef(cellGap)\r\n\r\n  const step = computed(() => _cellSize.value + _cellGap.value)\r\n\r\n  /**\r\n    \r\n   @param {number} x -  (0-based)\r\n   @param {number} y -  (0-based)\r\n   @param {number} w - \r\n   @param {number} h - \r\n   @returns {object} { x, y, width, height } - \r\n   */\r\n  function getRect(x, y, w = 1, h = 1) {\r\n    return {\r\n      x: Math.round(x * step.value),\r\n      y: Math.round(y * step.value),\r\n      width: Math.round(w * _cellSize.value + (w - 1) * _cellGap.value),\r\n      height: Math.round(h * _cellSize.value + (h - 1) * _cellGap.value)\r\n    }\r\n  }\r\n\r\n  return {\r\n    getRect,\r\n    step\r\n  }\r\n}","<template>\r\n  <div\r\n    ref=\"boardRef\"\r\n    class=\"grid-board\"\r\n    :style=\"{\r\n      width: boardWidth + 'px',\r\n      marginLeft: '24px',\r\n      gridTemplateColumns: `repeat(${currentColumns}, 140px)`,\r\n      '--grid-columns': currentColumns,\r\n  gridTemplateColumns: `repeat(${currentColumns}, 140px)`,\r\n  width: '100%',\r\n  marginLeft: '16px'\r\n    }\"\r\n    @click=\"handleGridClick\"\r\n    @mousemove=\"handleMouseMove\"\r\n    @mouseleave=\"handleMouseLeave\"\r\n    \r\n  >\r\n    <!--  -->\r\n    <template v-for=\"rowIndex in currentRows\" :key=\"`row-${rowIndex}`\">\r\n      <template v-for=\"colIndex in currentColumns\" :key=\"`cell-${rowIndex}-${colIndex}`\">\r\n        <div\r\n          class=\"grid-line\"\r\n          :style=\"{\r\n            gridColumn: colIndex,\r\n            gridRow: rowIndex\r\n          }\"\r\n        />\r\n      </template>\r\n    </template>\r\n\r\n    <!--  -->\r\n    <div\r\n  class=\"preview-box\"\r\n  :class=\"{ hidden: !previewPlacement }\"\r\n  :style=\"previewBoxStyle\"\r\n/>\r\n\r\n    <!--  -->\r\n     \r\n    <div\r\n  v-for=\"(widget, index) in validWidgets\"\r\n  :key=\"widget.renderKey\"\r\n  :data-id=\"widget.id\"\r\n  class=\"widget widget-fade\"\r\n  :class=\"{\r\n  'highlight-error': highlightIndices.includes(index),\r\n  'draggable-enabled': expanded && !['WidgetSelectorWidget', 'IndieTextWidget'].includes(widget.type),\r\n  'moving-selected': pendingMoveWidget?.id === widget.id\r\n}\"\r\n  :style=\"{\r\n    gridColumn: `${widget.x + 1} / span ${widget.w}`,\r\n    gridRow: `${widget.y + 1} / span ${widget.h}`\r\n  }\"\r\n  @click.stop\r\n>\r\n  <component\r\n    :is=\"widgetRegistry[widget.type]\"\r\n    v-bind=\"{ ...widget, ...(widget.props || {}) }\"\r\n    @delete-widget=\"$emit('delete-widget', widget.id)\"\r\n    @resize-widget=\"handleResizeWidget\"\r\n    @request-move=\"handleRequestMove\"\r\n  />\r\n  <transition name=\"rise-fade\" mode=\"out-in\">\r\n    <div v-if=\"expanded && !['WidgetSelectorWidget', 'IndieTextWidget'].includes(widget.type)\" class=\"widget-overlay\">\r\n    <div class=\"widget-sticker\">\r\n  {{ widgetMetadata[widget.type]?.icon || '' }}\r\n</div>\r\n<button \r\n  v-if=\"widget.type !== 'LoginWidget'\" \r\n  class=\"delete-btn\" \r\n  @click=\"$emit('delete-widget', widget.id)\">\r\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#333\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n<rect x=\"3\" y=\"3\" width=\"18\" height=\"3\" fill=\"#ccc\" stroke=\"#333\"/>\r\n<circle cx=\"6\" cy=\"4.5\" r=\"0.5\" fill=\"#333\"/>\r\n<circle cx=\"12\" cy=\"4.5\" r=\"0.5\" fill=\"#333\"/>\r\n<circle cx=\"18\" cy=\"4.5\" r=\"0.5\" fill=\"#333\"/>\r\n<rect x=\"4\" y=\"6\" width=\"16\" height=\"16\" rx=\"2\" ry=\"2\" fill=\"#fff\" stroke=\"#333\"/>\r\n<line x1=\"9\" y1=\"10\" x2=\"9\" y2=\"18\"/>\r\n<line x1=\"15\" y1=\"10\" x2=\"15\" y2=\"18\"/>\r\n</svg>\r\n\r\n</button>\r\n    <button class=\"move-btn\" @click=\"handleClickMove(widget)\">\r\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#333\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n<line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"22\"/>\r\n<line x1=\"2\" y1=\"12\" x2=\"22\" y2=\"12\"/>\r\n<polyline points=\"12 2, 8 6, 16 6, 12 2\"/>\r\n<polyline points=\"12 22, 8 18, 16 18, 12 22\"/>\r\n<polyline points=\"2 12, 6 8, 6 16, 2 12\"/>\r\n<polyline points=\"22 12, 18 8, 18 16, 22 12\"/>\r\n</svg>\r\n</button>\r\n  </div>\r\n</transition>\r\n</div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, defineProps, defineEmits, inject} from 'vue'\r\nimport { widgetSizes } from '../data/widgetTypes.js'\r\nimport { widgetMetadata, widgetRegistry } from '@/components/widgets/registry.js'\r\nimport { showClickPreview, removeClickPreview } from '@/scripts/useClickPreview.js'\r\nimport { useGridPositioning } from '@/scripts/useGridPositioning.js'\r\n\r\nconst pendingPlacement = inject('pendingPlacement')\r\nconst expanded = inject('pegboardExpanded', ref(false))\r\n\r\n\r\nconst cellSize = 140\r\nconst cellGap = 16\r\n\r\nconst props = defineProps({\r\n  widgets: Array,\r\n  columns: Number,\r\n  rows: Number\r\n})\r\n\r\nconst emit = defineEmits(['update:widgets', 'delete-widget'])\r\n\r\nconst highlightIndices = ref([])\r\nconst previewPlacement = ref(null)\r\nconst pendingMoveWidget = inject('pendingMoveWidget') \r\n\r\nconst widgets = computed({\r\n  get: () => props.widgets,\r\n  set: (val) => emit('update:widgets', val)\r\n})\r\n\r\nconst validWidgets = computed(() =>\r\n  widgets.value.filter(w => w && typeof w.w === 'number' && typeof w.h === 'number')\r\n)\r\n\r\nconst currentColumns = computed(() => props.columns)\r\nconst currentRows = computed(() => props.rows || 6)\r\nconst boardRef = ref(null)\r\n\r\nconst { step } = useGridPositioning(currentColumns, currentRows, cellSize, cellGap)\r\n\r\nconst boardWidth = computed(() =>\r\n  currentColumns.value * 140 + (currentColumns.value - 1) * 16\r\n)\r\n\r\nconst snapToBounds = (x, y, w, h) => {\r\n  const maxX = currentColumns.value - w\r\n  const maxY = currentRows.value - h\r\n  return {\r\n    x: Math.max(0, Math.min(x, maxX)),\r\n    y: Math.max(0, Math.min(y, maxY))\r\n  }\r\n}\r\n\r\nconst checkOverlap = (x, y, w, h, excludeId = null) => {\r\n  return widgets.value.findIndex((wgt) => {\r\n    if (excludeId && wgt.id === excludeId) return false\r\n    const withinX = x < wgt.x + wgt.w && x + w > wgt.x\r\n    const withinY = y < wgt.y + wgt.h && y + h > wgt.y\r\n    return withinX && withinY\r\n  })\r\n}\r\n\r\nfunction placeWidget(payload, pointerX, pointerY) {\r\n  const { type, sizeKey, id, renderKey } = payload\r\n  if (!type || !sizeKey || !id || !renderKey) return\r\n\r\n  const size = widgetSizes[sizeKey] || { w: 1, h: 1 }\r\n  let x = Math.round(pointerX - size.w / 2)\r\n  let y = Math.round(pointerY - size.h / 2)\r\n  const snapped = snapToBounds(x, y, size.w, size.h)\r\n  x = snapped.x\r\n  y = snapped.y\r\n\r\n  const isLoginOrSelector = type === 'LoginWidget' || type === 'WidgetSelectorWidget'\r\n\r\n  //  \r\n  if (isLoginOrSelector && !pendingMoveWidget.value) {\r\n    const existingWidgetIndex = widgets.value.findIndex(w => w.type === type)\r\n    if (existingWidgetIndex !== -1) {\r\n      // \r\n      highlightIndices.value = [existingWidgetIndex]\r\n      setTimeout(() => (highlightIndices.value = []), 2000)  // \r\n      return\r\n    }\r\n  }\r\n\r\n  // \r\n  if (pendingMoveWidget.value) {\r\n    const targetIndex = widgets.value.findIndex(w => w.id === pendingMoveWidget.value.id)\r\n    if (targetIndex !== -1) {\r\n      // \r\n      const overlapIndex = checkOverlap(x, y, size.w, size.h, pendingMoveWidget.value.id)\r\n      if (overlapIndex >= 0) {\r\n        highlightIndices.value = [overlapIndex]\r\n        setTimeout(() => (highlightIndices.value = []), 2000)\r\n        return\r\n      }\r\n\r\n      // \r\n      widgets.value[targetIndex].x = x\r\n      widgets.value[targetIndex].y = y\r\n      pendingMoveWidget.value = null\r\n      return\r\n    }\r\n  }\r\n\r\n  // \r\n  const overlapIndex = checkOverlap(x, y, size.w, size.h)\r\n  if (overlapIndex >= 0) {\r\n    highlightIndices.value = [overlapIndex]\r\n    setTimeout(() => (highlightIndices.value = []), 2000)\r\n    return\r\n  }\r\n\r\n  // \r\n  if (!isLoginOrSelector) {\r\n    widgets.value.push({\r\n      ...payload,\r\n      x,\r\n      y\r\n    })\r\n  }\r\n}\r\n\r\n\r\n\r\nfunction handleMouseMove(event) {\r\n  const rect = boardRef.value.getBoundingClientRect()\r\n  const pointerX = (event.clientX - rect.left) / step.value\r\n  const pointerY = (event.clientY - rect.top) / step.value\r\n\r\n  let activeData = pendingPlacement.value || pendingMoveWidget.value\r\n  if (!activeData) {\r\n    previewPlacement.value = null  // \r\n    return\r\n  }\r\n\r\n  const { sizeKey } = activeData\r\n  const size = widgetSizes[sizeKey] || { w: 1, h: 1 }\r\n\r\n  let x = Math.round(pointerX - size.w / 2)\r\n  let y = Math.round(pointerY - size.h / 2)\r\n\r\n  const snapped = snapToBounds(x, y, size.w, size.h)\r\n\r\n\r\n  previewPlacement.value = {\r\n    x: snapped.x,\r\n    y: snapped.y,\r\n    w: size.w,\r\n    h: size.h\r\n  }\r\n}\r\nfunction handleMouseLeave() {\r\n  previewPlacement.value = null\r\n}\r\n\r\nfunction handleClickMove(widget) {\r\n  pendingMoveWidget.value = widget\r\n  const { icon } = widgetMetadata[widget.type] || { icon: '' }\r\n  showClickPreview({\r\n    icon,\r\n    width: widget.w * 40,\r\n    height: widget.h * 40\r\n  })\r\n}\r\n\r\n\r\n\r\nfunction handleGridClick(event) {\r\n  const rect = event.currentTarget.getBoundingClientRect()\r\n  const pointerX = (event.clientX - rect.left) / step.value\r\n  const pointerY = (event.clientY - rect.top) / step.value\r\n\r\n  if (pendingMoveWidget.value) {\r\n    placeWidget(pendingMoveWidget.value, pointerX, pointerY)  \r\n    pendingMoveWidget.value = null\r\n    removeClickPreview()\r\n    previewPlacement.value = null\r\n  } else if (pendingPlacement.value) {\r\n    placeWidget(pendingPlacement.value, pointerX, pointerY)\r\n    pendingPlacement.value = null\r\n    removeClickPreview()\r\n    previewPlacement.value = null\r\n  }\r\n}\r\n\r\nconst previewBoxStyle = computed(() => {\r\n  if (!previewPlacement.value) {\r\n    return {\r\n      transform: `translate(0, 0)`,\r\n      width: '0px',\r\n      height: '0px'\r\n    }\r\n  }\r\n\r\n  const px = previewPlacement.value.x * step.value\r\n  const py = previewPlacement.value.y * step.value\r\n  const width = previewPlacement.value.w * cellSize + (previewPlacement.value.w - 1) * cellGap\r\n  const height = previewPlacement.value.h * cellSize + (previewPlacement.value.h - 1) * cellGap\r\n\r\n  return {\r\n    transform: `translate(${px}px, ${py}px)`,\r\n    width: `${width}px`,\r\n    height: `${height}px`\r\n  }\r\n})\r\n\r\nfunction handleResizeWidget({ id, nextSizeKey }) {\r\n  console.log(' Received the adjustment request.', id, nextSizeKey)\r\n  const index = widgets.value.findIndex(w => w.id === id)\r\n  if (index === -1) return\r\n\r\n  const widget = widgets.value[index]\r\n  const nextSize = widgetSizes[nextSizeKey] || { w: 2, h: 2 }\r\n\r\n  if (nextSize.w > widget.w || nextSize.h > widget.h) {\r\n  const isOutOfBounds =\r\n    widget.x + nextSize.w > currentColumns.value ||\r\n    widget.y + nextSize.h > currentRows.value\r\n\r\n  const overlapIndex = checkOverlap(widget.x, widget.y, nextSize.w, nextSize.h, widget.id)\r\n\r\n  if (isOutOfBounds || overlapIndex >= 0) {\r\n    highlightIndices.value = [overlapIndex].filter(i => i >= 0) \r\n    setTimeout(() => (highlightIndices.value = []), 1500)\r\n    return\r\n  }\r\n}\r\n\r\n  widget.sizeKey = nextSizeKey\r\n  widget.w = nextSize.w\r\n  widget.h = nextSize.h\r\n  widget.renderKey = `${widget.id}-resized-${Date.now()}`\r\n}\r\n\r\nfunction handleRequestMove(id) {\r\n  const widget = widgets.value.find(w => w.id === id)\r\n  if (!widget) {\r\n    console.warn(' The component cannot be found. Unable to enter mobile mode.')\r\n    return\r\n  }\r\n\r\n  pendingMoveWidget.value = widget\r\n  const { icon } = widgetMetadata[widget.type] || { icon: '' }\r\n\r\n  showClickPreview({\r\n    icon,\r\n    width: widget.w * 40,\r\n    height: widget.h * 40\r\n  })\r\n\r\n  console.log(' ', id)\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.grid-board {\r\n  display: grid;\r\n  grid-template-columns: repeat(var(--grid-columns), 140px);\r\n  grid-auto-rows: 140px;\r\n  gap: 16px;\r\n  width: 100%;\r\n  position: relative;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.grid-line {\r\n  width: 100%;\r\n  aspect-ratio: 1 / 1;\r\n  border: 1px dashed #cccccc;  \r\n  background-color: #e6e6e6;   \r\n  box-sizing: border-box;\r\n  border-radius: 8px;\r\n  z-index: 0;\r\n  transition: border-color 0.3s ease;\r\n}\r\n.grid-line:hover {\r\n  border-color: #007bff;\r\n}\r\n\r\n.widget {\r\n  position: relative;\r\n  z-index: 10;\r\n  user-select: none;\r\n  transition: all 0.3s ease;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n  cursor: default;\r\n  transform: none;\r\n}\r\n\r\n/*   */\r\n.widget.draggable-enabled {\r\n  transform: translateY(-6px);\r\n}\r\n.widget.draggable-enabled:hover {\r\n  transform: translateY(-10px) scale(1.02);\r\n}\r\n\r\n\r\n\r\n/*  shake  */\r\n.widget.highlight-error {\r\n  background-color: rgba(255, 0, 0, 0.15) !important;\r\n  animation: shake 1s ease;\r\n}\r\n\r\n@keyframes shake {\r\n  0%, 100% { transform: translateX(0); }\r\n  25% { transform: translateX(-10px); }\r\n  75% { transform: translateX(10px); }\r\n}\r\n\r\n.preview-box {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  border: 2px dashed #003366;\r\n  background-color: rgba(0, 64, 128, 0.08);\r\n  border-radius: 6px;\r\n  pointer-events: none;\r\n  z-index: 2;\r\n  transition: transform 0.2s ease, opacity 0.2s ease;\r\n  opacity: 1;\r\n}\r\n\r\n.preview-box.hidden {\r\n  opacity: 0;\r\n}\r\n\r\n\r\n\r\n.widget-overlay {\r\n  position: absolute;\r\n  inset: 0;\r\n  background: linear-gradient(135deg, #d2b48c 0%, #b8865b 100%);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 20;\r\n  pointer-events: auto;\r\n  animation: riseFromBottom 0.5s ease-out;\r\n  border-radius: 12px;\r\n\r\n \r\n  box-shadow:\r\n    inset 0 0 0 20px rgba(160, 120, 80, 1),\r\n    inset 0 0 20px rgba(0, 0, 0, 1),\r\n    0 6px 12px rgba(0, 0, 0, 0.3);\r\n\r\n  border: none;\r\n\r\n\r\n  background-image:\r\n    linear-gradient(135deg, #d2b48c, #b8865b),\r\n    repeating-linear-gradient(45deg, #000 0, #000 2px, transparent 2px, transparent 60px);;\r\n  background-blend-mode: overlay, normal;\r\n}\r\n\r\n.widget-overlay::before {\r\n  content: '';\r\n  position: absolute;\r\n  inset: 0;\r\n  border-radius: 12px;\r\n  pointer-events: none;\r\n  z-index: 2;\r\nbackground:\r\n    radial-gradient(circle at 50% 50%, #c0c0c0 0%, #999 60%, #666 100%) 0% 0%,\r\n    radial-gradient(circle at 50% 50%, #c0c0c0 0%, #999 60%, #666 100%) 100% 0%,\r\n    radial-gradient(circle at 50% 50%, #c0c0c0 0%, #999 60%, #666 100%) 0% 100%,\r\n    radial-gradient(circle at 50% 50%, #c0c0c0 0%, #999 60%, #666 100%) 100% 100%;\r\n  background-size: 32px 32px;\r\n  background-repeat: no-repeat;\r\n  background-position: 0% 0%, 100% 0%, 0% 100%, 100% 100%;\r\n  filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.3));\r\n}\r\n\r\n\r\n\r\n.rise-fade-enter-active,\r\n.rise-fade-leave-active {\r\n  transition: all 0.5s ease;\r\n}\r\n\r\n.rise-fade-enter-from,\r\n.rise-fade-leave-to {\r\n  opacity: 1;\r\n  transform: translateY(100%) scale(0.95);\r\n}\r\n\r\n.rise-fade-enter-to,\r\n.rise-fade-leave-from {\r\n  opacity: 1;\r\n  transform: translateY(0) scale(1);\r\n}\r\n\r\n\r\n\r\n/*  */\r\n.delete-btn {\r\n  margin: 6px;\r\n  padding: 10px 20px;\r\n  background: linear-gradient(145deg, #ff4c4c, #cc0000);\r\n  border: 2px solid #660000;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-weight: bold;\r\n  color: #fff;\r\n  text-shadow: 0 1px 0 #222;\r\n  box-shadow: 0 4px 0 #333, 0 6px 12px rgba(0, 0, 0, 0.4);\r\n  transition: all 0.15s ease;\r\n  font-family: 'Impact', sans-serif;\r\n  letter-spacing: 1px;\r\n  z-index: 1;\r\n}\r\n\r\n.delete-btn:hover {\r\n  background: linear-gradient(145deg, #ff2222, #aa0000);\r\n  filter: brightness(1.05);\r\n  border-color: #440000;\r\n  box-shadow: 0 3px 0 #222, 0 4px 8px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.delete-btn:active {\r\n  background: linear-gradient(145deg, #cc0000, #880000);\r\n  transform: translateY(4px) scale(0.98);\r\n  box-shadow: inset 0 4px 6px rgba(0, 0, 0, 0.7);\r\n  border-color: #220000;\r\n  text-shadow: none;\r\n}\r\n\r\n/*  */\r\n.move-btn {\r\n  margin: 6px;\r\n  padding: 10px 20px;\r\n  background: linear-gradient(145deg, #cccccc, #888888);\r\n  border: 2px solid #444;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-weight: bold;\r\n  color: #222;\r\n  text-shadow: 0 1px 0 #fff;\r\n  box-shadow: 0 4px 0 #333, 0 6px 12px rgba(0, 0, 0, 0.4);\r\n  transition: all 0.15s ease;\r\n  font-family: 'Impact', sans-serif;\r\n  letter-spacing: 1px;\r\n  z-index: 1;\r\n}\r\n\r\n.move-btn:hover {\r\n  background: linear-gradient(145deg, #dddddd, #777777);\r\n  filter: brightness(1.05);\r\n  border-color: #333;\r\n  box-shadow: 0 3px 0 #222, 0 4px 8px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.move-btn:active {\r\n  background: linear-gradient(145deg, #999999, #555555);\r\n  transform: translateY(4px) scale(0.98);\r\n  box-shadow: inset 0 4px 6px rgba(0, 0, 0, 0.7);\r\n  border-color: #222;\r\n  text-shadow: none;\r\n}\r\n\r\n.widget-sticker {\r\n  position: absolute;\r\n  top: 8px;\r\n  left: 6px;\r\n  background: #fff8dc;\r\n  color: #333;\r\n  padding: 5px 10px;\r\n  font-size: 21.6px;\r\n  border-radius: 5px;\r\n  border: 1px solid #999;\r\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);\r\n  font-family: 'Impact', sans-serif;\r\n  pointer-events: none;\r\n  z-index: 2;\r\n  transform: rotate(-16deg);\r\n\r\n}\r\n.widget-sticker::after {\r\n  content: '';\r\n  position: absolute;\r\n  top: 1px;\r\n  left: 87%;\r\n  transform: translateX(-50%);\r\n  width: 8px;\r\n  height: 8px;\r\n  background: radial-gradient(circle at 50% 50%, #ccc 30%, #999 60%, #666 100%);\r\n  border-radius: 50%;\r\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\r\n  z-index: 3;\r\n}\r\n\r\n.moving-selected {\r\n  outline: 2px dashed #007bff;\r\n}\r\n\r\n\r\n\r\n</style>","import script from \"./PegboardGrid.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PegboardGrid.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PegboardGrid.vue?vue&type=style&index=0&id=3c073046&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3c073046\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"board-container\">\r\n    <PegboardGrid\r\n  ref=\"pegboardRef\"\r\n  :widgets=\"widgets\"\r\n  :columns=\"columns\"\r\n  :drag-enabled=\"expanded\"\r\n  @update:widgets=\"(val) => (widgets = val)\"\r\n  @delete-widget=\"deleteWidget\"\r\n/>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject, reactive, provide, onMounted, onUnmounted, watch, computed } from 'vue'\r\nimport PegboardGrid from '../components/PegboardGrid.vue'\r\nimport { widgetMetadata } from '@/components/widgets/registry.js'\r\nimport { widgetSizes } from '@/data/widgetTypes.js'\r\nimport { applyImportData } from '@/scripts/exportData.js'\r\n\r\n// =====  =====\r\nconst expanded = ref(false)\r\nconst pendingMoveWidget = ref(null)\r\nconst pendingPlacement = ref(null)\r\n\r\nprovide('pendingMoveWidget', pendingMoveWidget)\r\nprovide('pegboardExpanded', expanded)\r\nprovide('pendingPlacement', pendingPlacement)\r\n\r\nconst pegboardRef = ref(null)\r\nconst auth = inject('auth')\r\n\r\n// =====  =====\r\nconst windowWidth = ref(window.innerWidth)\r\nconst currentLayout = computed(() => {\r\n  if (windowWidth.value >= 1200) return 'large'\r\n  if (windowWidth.value >= 768) return 'medium'\r\n  return 'small'\r\n})\r\n\r\n// =====  =====\r\nconst layoutCache = reactive({\r\n  large: [],\r\n  medium: [],\r\n  small: []\r\n})\r\nprovide('layoutCache', layoutCache)\r\n// widgets  currentLayout \r\nconst widgets = computed({\r\n  get: () => layoutCache[currentLayout.value],\r\n  set: (val) => layoutCache[currentLayout.value] = val\r\n})\r\n\r\nprovide('widgets', widgets)\r\n\r\n// columns  currentLayout \r\nconst columns = computed(() => {\r\n  if (currentLayout.value === 'large') return 8\r\n  if (currentLayout.value === 'medium') return 5\r\n  return 3\r\n})\r\n\r\n// widgetLocks \r\nconst widgetLocks = reactive({})\r\nfor (const type in widgetMetadata) {\r\n  widgetLocks[type] = { isNextLocked: false }\r\n}\r\nprovide('widgetLocks', widgetLocks)\r\n\r\n// =====  =====\r\nfunction createWidget(type, x = 1, y = 1, sizeKey = null) {\r\n  const meta = widgetMetadata[type]\r\n  const resolvedSizeKey = sizeKey || meta?.sizeOptions?.[0] || 'S'\r\n  const id = `${type}-${resolvedSizeKey}-${Date.now()}`\r\n  const size = widgetSizes[resolvedSizeKey] || { w: 1, h: 1 }\r\n\r\n  return {\r\n    id,\r\n    renderKey: `${id}-render`,\r\n    type,\r\n    sizeKey: resolvedSizeKey,\r\n    x,\r\n    y,\r\n    w: size.w,\r\n    h: size.h\r\n  }\r\n}\r\n\r\n\r\n// =====  =====\r\nconst deleteWidget = (id) => {\r\n  const index = widgets.value.findIndex(w => w.id === id)\r\n  if (index === -1) {\r\n    console.warn('  ID:', id)\r\n    return\r\n  }\r\n\r\n  const widget = widgets.value[index]\r\n\r\n  if (widget?.type === 'LoginWidget') {\r\n    auth?.logout()\r\n    console.log(' LoginWidget ')\r\n  }\r\n\r\n  widgets.value = widgets.value.filter(w => w.id !== id)\r\n  console.log(' :', id)\r\n}\r\n\r\n// =====  =====\r\nfunction getDefaultLayout(sizeKey) {\r\n  if (sizeKey === 'large') {\r\n    return [\r\n      createWidget('LoginWidget', 1, 1),\r\n      createWidget('WidgetSelectorWidget', 1, 2),\r\n      createWidget('ImportExportWidget', 0, 0),\r\n    ]\r\n  }\r\n  if (sizeKey === 'medium') {\r\n    return [\r\n      createWidget('LoginWidget', 1, 1),\r\n      createWidget('WidgetSelectorWidget', 1, 2),\r\n      createWidget('ImportExportWidget', 0, 0),\r\n    ]\r\n  }\r\n  if (sizeKey === 'small') {\r\n    return [\r\n      createWidget('LoginWidget', 0, 0),\r\n      createWidget('WidgetSelectorWidget', 0, 1),\r\n      createWidget('ImportExportWidget', 2, 0),\r\n    ]\r\n  }\r\n  return []\r\n}\r\n\r\n// =====  =====\r\nconst storageKey = computed(() => `dashboard-layout-${auth?.currentUser?.value || 'guest'}-${currentLayout.value}`)\r\n\r\nconst isImportingLayout = ref(false)  \r\n\r\nwatch(() => layoutCache[currentLayout.value], (newVal) => {\r\n  if (isImportingLayout.value) return  \r\n  localStorage.setItem(storageKey.value, JSON.stringify(newVal))\r\n}, { deep: true })\r\n\r\nconst handleImportData = (data) => {\r\n  isImportingLayout.value = true\r\n  applyImportData({ data, auth, layoutCache })\r\n  isImportingLayout.value = false\r\n}\r\nprovide('handleImportData', handleImportData)\r\n// =====  &  =====\r\nonMounted(() => {\r\n  const updateWidth = () => windowWidth.value = window.innerWidth\r\n  window.addEventListener('resize', updateWidth)\r\n  updateWidth()\r\n\r\n  const userId = auth?.currentUser?.value || 'guest';\r\n\r\n  ['large', 'medium', 'small'].forEach(sizeKey => {\r\n    const cache = localStorage.getItem(`dashboard-layout-${userId}-${sizeKey}`)\r\n    if (cache) {\r\n      layoutCache[sizeKey] = JSON.parse(cache)\r\n    } else {\r\n      layoutCache[sizeKey] = getDefaultLayout(sizeKey)\r\n    }\r\n  })\r\n\r\n  watch(windowWidth, () => {\r\n    pendingPlacement.value = null\r\n    pendingMoveWidget.value = null\r\n    console.log('Switched to layout:', currentLayout.value)\r\n  })\r\n})\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', () => windowWidth.value = window.innerWidth)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.board-container {\r\n  overflow-x: auto;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 20px 0;\r\n}\r\n\r\n@media (min-width: 1200px) {\r\n  .board-container {\r\n    max-width: calc(8 * 156px);\r\n    overflow-x: visible;\r\n  }\r\n}\r\n@media (min-width: 768px) and (max-width: 1199px) {\r\n  .board-container {\r\n    max-width: calc(5 * 156px);\r\n  }\r\n}\r\n@media (max-width: 767px) {\r\n  .board-container {\r\n    max-width: calc(3 * 156px);\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n<style scoped>\r\n.board-container {\r\n  overflow-x: auto;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 20px 0;\r\n}\r\n\r\n/*  */\r\n@media (min-width: 1200px) {\r\n  .board-container {\r\n    max-width: calc(8 * 156px);\r\n    overflow-x: visible;\r\n  }\r\n}\r\n@media (min-width: 768px) and (max-width: 1199px) {\r\n  .board-container {\r\n    max-width: calc(5 * 156px);\r\n  }\r\n}\r\n@media (max-width: 767px) {\r\n  .board-container {\r\n    max-width: calc(3 * 156px);\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nexport default {\r\n  name: 'DashboardPage'\r\n}\r\n</script>\r\n","import script from \"./Dashboard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Dashboard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Dashboard.vue?vue&type=style&index=0&id=c7f4e4d6&scoped=true&lang=css\"\nimport \"./Dashboard.vue?vue&type=style&index=1&id=c7f4e4d6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c7f4e4d6\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"container mt-4\">\r\n      <h2>Stage 1</h2>\r\n      <ul>\r\n        <li><router-link to=\"/stage1/legacy-home\">Legacy Home</router-link></li>\r\n        <li><router-link to=\"/stage1/news\">News</router-link></li>\r\n        <li><router-link to=\"/stage1/about\">About</router-link></li>\r\n      </ul>\r\n  \r\n      <router-view />\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    name: 'Stage1Page'\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .stage1-nav {\r\n    display: flex;\r\n    gap: 1rem;\r\n    margin-bottom: 1rem;\r\n  }\r\n  </style>","import { render } from \"./Stage_1.vue?vue&type=template&id=7a12cb24&scoped=true\"\nimport script from \"./Stage_1.vue?vue&type=script&lang=js\"\nexport * from \"./Stage_1.vue?vue&type=script&lang=js\"\n\nimport \"./Stage_1.vue?vue&type=style&index=0&id=7a12cb24&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7a12cb24\"]])\n\nexport default __exports__","<script setup>\r\nimport image1 from '@/assets/image1.jpg'\r\nimport image2 from '@/assets/image2.jpg'\r\n</script>\r\n\r\n<template>\r\n  <div class=\"container mt-4\">\r\n    <h1>Welcome to Our Web App</h1>\r\n    <p>This application is built with Vue 3 and Bootstrap.</p>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-6 mb-3\">\r\n        <img :src=\"image1\" class=\"img-fluid\" alt=\"Image 1\">\r\n      </div>\r\n      <div class=\"col-md-6 mb-3\">\r\n        <img :src=\"image2\" class=\"img-fluid\" alt=\"Image 2\">\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n  \r\n  <script>\r\n  export default {\r\n    name: 'LegacyHome'\r\n  }\r\n  </script>","import script from \"./LegacyHome.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LegacyHome.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","\r\n<script setup>\r\nimport { ref, computed, onMounted, watch } from 'vue'\r\n\r\nconst newsList = ref([])\r\nconst searchQuery = ref('')\r\nconst selectedCategory = ref('All')\r\nconst currentPage = ref(1)\r\nconst itemsPerPage = 5\r\n\r\nconst minYear = ref(2010)\r\nconst maxYear = ref(new Date().getFullYear())\r\nconst startYear = ref(minYear.value)\r\nconst endYear = ref(maxYear.value)\r\n\r\nonMounted(async () => {\r\n  const res = await fetch('./all_fake_news.json')\r\n  newsList.value = await res.json()\r\n\r\n  const years = newsList.value.map(n => new Date(n.date).getFullYear())\r\n  minYear.value = Math.min(...years)\r\n  maxYear.value = Math.max(...years)\r\n  startYear.value = minYear.value\r\n  endYear.value = maxYear.value\r\n})\r\n\r\nwatch([startYear, endYear], () => {\r\n  if (startYear.value > endYear.value) {\r\n    startYear.value = endYear.value\r\n  }\r\n  if (startYear.value < minYear.value) {\r\n    startYear.value = minYear.value\r\n  }\r\n  if (endYear.value > maxYear.value) {\r\n    endYear.value = maxYear.value\r\n  }\r\n})\r\n\r\nconst categories = computed(() => {\r\n  const set = new Set(newsList.value.map(n => n.category))\r\n  return ['All', ...Array.from(set)]\r\n})\r\n\r\nconst filteredNews = computed(() => {\r\n  return newsList.value.filter(item => {\r\n    const year = new Date(item.date).getFullYear()\r\n    const matchesSearch = [item.title, item.content].some(field =>\r\n      field.toLowerCase().includes(searchQuery.value.toLowerCase())\r\n    )\r\n    const matchesCategory = selectedCategory.value === 'All' || item.category === selectedCategory.value\r\n    const matchesYear = year >= startYear.value && year <= endYear.value\r\n    return matchesSearch && matchesCategory && matchesYear\r\n  })\r\n})\r\n\r\nconst totalPages = computed(() => Math.ceil(filteredNews.value.length / itemsPerPage))\r\n\r\nconst paginatedNews = computed(() => {\r\n  const start = (currentPage.value - 1) * itemsPerPage\r\n  return filteredNews.value.slice(start, start + itemsPerPage)\r\n})\r\n\r\nconst goToPage = (page) => {\r\n  if (page >= 1 && page <= totalPages.value) {\r\n    currentPage.value = page\r\n  }\r\n}\r\n\r\nconst resetFilters = () => {\r\n  searchQuery.value = ''\r\n  selectedCategory.value = 'All'\r\n  startYear.value = minYear.value\r\n  endYear.value = maxYear.value\r\n  currentPage.value = 1\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"container mt-4\">\r\n    <h1 class=\"mb-3\">News Center</h1>\r\n\r\n    \r\n<div class=\"row g-3 align-items-end mb-4\">\r\n \r\n  <div class=\"col-md-4\">\r\n    <label for=\"search\" class=\"form-label mb-1\">Search title/content:</label>\r\n    <input id=\"search\" v-model=\"searchQuery\" type=\"text\" class=\"form-control\" placeholder=\"Search...\" />\r\n  </div>\r\n\r\n  \r\n  <div class=\"col-md-3\">\r\n    <label for=\"category\" class=\"form-label mb-1\">Filter by category:</label>\r\n    <select id=\"category\" v-model=\"selectedCategory\" class=\"form-select\">\r\n      <option v-for=\"cat in categories\" :key=\"cat\" :value=\"cat\">{{ cat }}</option>\r\n    </select>\r\n  </div>\r\n\r\n  \r\n  <div class=\"col-md-4\">\r\n    <label class=\"form-label mb-1\">Year range:</label>\r\n    <div class=\"d-flex align-items-center gap-2\">\r\n      <input\r\n        v-model.number=\"startYear\"\r\n        :min=\"minYear\"\r\n        :max=\"endYear\"\r\n        type=\"number\"\r\n        class=\"form-control\"\r\n        placeholder=\"Start\"\r\n      />\r\n      <span>~</span>\r\n      <input\r\n        v-model.number=\"endYear\"\r\n        :min=\"startYear\"\r\n        :max=\"maxYear\"\r\n        type=\"number\"\r\n        class=\"form-control\"\r\n        placeholder=\"End\"\r\n      />\r\n    </div>\r\n  </div>\r\n\r\n  \r\n  <div class=\"col-md-1 d-flex align-items-end\">\r\n    <button class=\"btn btn-outline-secondary w-100\" @click=\"resetFilters\">Reset</button>\r\n  </div>\r\n</div>\r\n\r\n    \r\n    <div v-for=\"(item, index) in paginatedNews\" :key=\"index\" class=\"card mb-3\">\r\n      <div class=\"card-body\">\r\n        <h5 class=\"card-title\">{{ item.title }}</h5>\r\n        <h6 class=\"card-subtitle text-muted\">{{ item.date }}  {{ item.category }}</h6>\r\n        <p class=\"card-text mt-2\">{{ item.content }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    \r\n    <nav v-if=\"totalPages > 1\" aria-label=\"Pagination\">\r\n      <ul class=\"pagination justify-content-center\">\r\n        <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n          <button class=\"page-link\" @click=\"goToPage(currentPage - 1)\">Previous</button>\r\n        </li>\r\n        <li\r\n          v-for=\"page in totalPages\"\r\n          :key=\"page\"\r\n          class=\"page-item\"\r\n          :class=\"{ active: page === currentPage }\"\r\n        >\r\n          <button class=\"page-link\" @click=\"goToPage(page)\">{{ page }}</button>\r\n        </li>\r\n        <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\r\n          <button class=\"page-link\" @click=\"goToPage(currentPage + 1)\">Next</button>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'NewsPage'\r\n}\r\n</script>","import script from \"./News.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./News.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport mountain from '@/assets/mountain.jpg'\r\nimport ocean from '@/assets/ocean.jpg'\r\n\r\nconst firstName = ref('')\r\nconst lastName = ref('')\r\nconst selectedImage = ref('')\r\n\r\nconst fullName = computed(() => `${firstName.value} ${lastName.value}`.trim())\r\n\r\nconst imageMap = {\r\n  mountain,\r\n  ocean\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"container mt-4\">\r\n    <h1 class=\"mb-4\">About This App</h1>\r\n    <p class=\"mb-4 text-muted\">This app demonstrates the use of Vue 3, Bootstrap, and dynamic content interaction.</p>\r\n\r\n    <!--  -->\r\n    <div class=\"card p-4 mb-4\">\r\n      <h5 class=\"card-title\"> Your Name</h5>\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">First Name</label>\r\n        <input v-model=\"firstName\" type=\"text\" class=\"form-control\" placeholder=\"Enter first name\" />\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">Last Name</label>\r\n        <input v-model=\"lastName\" type=\"text\" class=\"form-control\" placeholder=\"Enter last name\" />\r\n      </div>\r\n      <p class=\"mb-0\">Welcome, <strong>{{ fullName || 'Guest' }}</strong>!</p>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"card p-4 mb-4\">\r\n      <h5 class=\"card-title\"> Choose Your Favorite View</h5>\r\n      <div class=\"btn-group mb-3\" role=\"group\">\r\n        <input type=\"radio\" class=\"btn-check\" id=\"mountain\" value=\"mountain\" v-model=\"selectedImage\" />\r\n        <label class=\"btn btn-outline-primary\" for=\"mountain\">Mountain</label>\r\n\r\n        <input type=\"radio\" class=\"btn-check\" id=\"ocean\" value=\"ocean\" v-model=\"selectedImage\" />\r\n        <label class=\"btn btn-outline-primary\" for=\"ocean\">Ocean</label>\r\n      </div>\r\n\r\n      <div v-if=\"selectedImage\">\r\n        <img :src=\"imageMap[selectedImage]\" alt=\"Selected View\" class=\"img-fluid border rounded mb-2\" />\r\n        <p class=\"text-muted\">You selected: <strong>{{ selectedImage }}</strong></p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n  \r\n  <script>\r\n  export default {\r\n    name: 'AboutPage',\r\n    data() {\r\n      return {\r\n        firstName: '',\r\n        lastName: '',\r\n        selectedImage: ''\r\n      }\r\n    },\r\n    computed: {\r\n      fullName() {\r\n        return `${this.firstName} ${this.lastName}`.trim()\r\n      }\r\n    }\r\n  }\r\n  </script>","import script from \"./About.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./About.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createRouter, createWebHashHistory } from 'vue-router'\r\n\r\n// \r\nimport Dashboard from '../views/Dashboard.vue'\r\nimport Stage1 from '@/views/stage1/Stage_1.vue'\r\n\r\n// Stage 1 \r\nimport LegacyHome from '@/views/stage1/LegacyHome.vue'\r\nimport News from '@/views/stage1/News.vue'\r\nimport About from '@/views/stage1/About.vue'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'Dashboard',\r\n    component: Dashboard\r\n  },\r\n  {\r\n    path: '/stage1',\r\n    name: 'Stage1',\r\n    component: Stage1,\r\n    children: [\r\n      {\r\n        path: 'legacy-home',\r\n        name: 'LegacyHome',\r\n        component: LegacyHome\r\n      },\r\n      {\r\n        path: 'news',\r\n        name: 'News',\r\n        component: News\r\n      },\r\n      {\r\n        path: 'about',\r\n        name: 'About',\r\n        component: About\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory(),\r\n  routes\r\n})\r\n\r\nexport default router","import { ref, computed, watch } from 'vue'\r\n\r\n// \r\nconst currentUser = ref('')\r\nconst currentNickname = ref('')\r\n\r\n//   accounts \r\nconst accounts = ref(JSON.parse(localStorage.getItem('users') || '{}'))\r\n\r\n//  currentUser / currentNickname\r\nconst storedUser = localStorage.getItem('currentUser')\r\nconst storedNickname = localStorage.getItem('currentNickname')\r\n\r\nif (storedUser) currentUser.value = storedUser\r\nif (storedNickname) currentNickname.value = storedNickname\r\n\r\n// \r\nconst isLoggedIn = computed(() => !!currentUser.value)\r\n\r\n//  accounts -> localStorage \r\nwatch(accounts, (val) => {\r\n  localStorage.setItem('users', JSON.stringify(val))\r\n}, { deep: true })\r\n\r\n// currentUser / currentNickname -> localStorage \r\nwatch(currentUser, (val) => {\r\n  if (val) {\r\n    localStorage.setItem('currentUser', val)\r\n  } else {\r\n    localStorage.removeItem('currentUser')\r\n  }\r\n})\r\n\r\nwatch(currentNickname, (val) => {\r\n  if (val) {\r\n    localStorage.setItem('currentNickname', val)\r\n  } else {\r\n    localStorage.removeItem('currentNickname')\r\n  }\r\n})\r\n\r\n//  app.use()\r\nexport default {\r\n  install(app) {\r\n    app.provide('auth', {\r\n      currentUser,\r\n      currentNickname,\r\n      isLoggedIn,\r\n      accounts,  \r\n      login: (username) => {\r\n        currentUser.value = username\r\n        if (accounts.value[username]) {\r\n          currentNickname.value = accounts.value[username].nickname\r\n        } else {\r\n          currentNickname.value = ''\r\n        }\r\n      },\r\n      logout: () => {\r\n        currentUser.value = ''\r\n        currentNickname.value = ''\r\n      },\r\n      setNickname: (nick) => currentNickname.value = nick\r\n    })\r\n  }\r\n}","export default {\r\n    mounted(el) {\r\n      const robcoCursor = 'url(\"data:image/svg+xml;base64,' + btoa(`\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\">\r\n          <defs>\r\n            <filter id=\"glow\" x=\"-100%\" y=\"-100%\" width=\"300%\" height=\"300%\">\r\n              <feDropShadow dx=\"0\" dy=\"0\" stdDeviation=\"2\" flood-color=\"#00ff00\" flood-opacity=\"0.9\"/>\r\n              <feDropShadow dx=\"0\" dy=\"0\" stdDeviation=\"4\" flood-color=\"#00ff00\" flood-opacity=\"0.5\"/>\r\n            </filter>\r\n          </defs>\r\n          <rect x=\"2\" y=\"2\" width=\"8\" height=\"8\" fill=\"#00ff00\" stroke=\"#00ff00\" stroke-width=\"1\" filter=\"url(#glow)\"/>\r\n        </svg>\r\n      `) + '\") 6 6, auto'\r\n  \r\n  \r\n      el.style.cursor = robcoCursor\r\n  \r\n      el.style.filter = 'brightness(1.2) saturate(1.5)'\r\n      el.style.transform = 'scale(0.99)'\r\n    },\r\n  \r\n    unmounted(el) {\r\n      el.style.cursor = ''\r\n      el.style.filter = ''\r\n      el.style.transform = ''\r\n    }\r\n  }","export default {\r\n    mounted(el) {\r\n      const applyHover = () => {\r\n        el.style.background = 'linear-gradient(to bottom, #ff9999, #cc4444)';\r\n        el.style.transform = 'none';\r\n      };\r\n      const applyActive = () => {\r\n        el.style.background = 'linear-gradient(to bottom, #cc3333, #990000)';\r\n        el.style.boxShadow = 'inset 0 3px 6px rgba(0, 0, 0, 0.5)';\r\n        el.style.transform = 'translateY(1px) scale(0.98)';\r\n      };\r\n      const resetStyle = () => {\r\n        el.style.background = '';\r\n        el.style.boxShadow = '';\r\n        el.style.transform = '';\r\n      };\r\n  \r\n      el.addEventListener('mouseenter', applyHover);\r\n      el.addEventListener('mouseleave', resetStyle);  \r\n      el.addEventListener('mousedown', applyActive);\r\n      el.addEventListener('mouseup', applyHover);\r\n  \r\n      el.__rubberEvents = { applyHover, applyActive, resetStyle };\r\n    },\r\n    unmounted(el) {\r\n      const { applyHover, applyActive, resetStyle } = el.__rubberEvents || {};\r\n      if (applyHover) {\r\n        el.removeEventListener('mouseenter', applyHover);\r\n        el.removeEventListener('mouseleave', resetStyle);\r\n        el.removeEventListener('mousedown', applyActive);\r\n        el.removeEventListener('mouseup', applyHover);\r\n      }\r\n      delete el.__rubberEvents;\r\n    }\r\n  };","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport FloatingVue from 'floating-vue'\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js'\r\nimport 'floating-vue/dist/style.css'\r\nimport auth from './auth.js'\r\nimport terminalCursor from './scripts/custom directives/terminalCursor.js'\r\nimport rubberButton from './scripts/custom directives/rubberButton.js'\r\n\r\nconst app = createApp(App)\r\napp.use(auth)\r\napp.use(router)\r\napp.use(FloatingVue)\r\napp.mount('#app')\r\napp.directive('terminal-cursor', terminalCursor)\r\napp.directive('rubber-button', rubberButton)\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkcos30043_project\"] = self[\"webpackChunkcos30043_project\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(1653); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","href","type","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","_hoisted_8","_component_router_view","name","__exports__","render","widgetSizes","S","w","h","L","W","T","WORK_TIME","BREAK_TIME","radius","totalTime","computed","currentMode","value","emojiClass","isRunning","MAX_SESSION_DURATION","props","__props","onMounted","Notification","permission","requestPermission","ref","timeLeft","isPaused","emojiAnimation","timer","sessionStart","sessionEnd","notified","circumference","Math","PI","progress","max","progressOffset","tick","now","Date","elapsedTotal","reset","remaining","floor","notify","switchMode","toggleRun","pause","resume","start","setInterval","clearInterval","elapsed","message","window","body","icon","onBeforeUnmount","displayText","sizeKey","auth","inject","mode","loginUsername","loginPassword","registerUsername","nickname","registerPassword","confirmPassword","isLocked","failureButton","failureMessage","showSuccessEmoji","showLockEmoji","lockEmoji","isValidUsername","test","isValidNickname","nick","length","isValidPassword","pw","backgroundClass","startsWith","progressBarStyle","width","triggerFailure","buttonKey","setTimeout","goToRegisterStep2","users","JSON","parse","localStorage","getItem","goToRegisterStep3","goToRegisterStep4","handleRegister","password","setItem","stringify","handleLogin","userRecord","login","setNickname","console","log","logout","isLoggedIn","handleImportRefresh","addEventListener","onUnmounted","removeEventListener","API_KEY","city","temperature","description","weatherEmoji","weatherTheme","loading","error","lastUpdated","fetchWeather","async","res","fetch","encodeURIComponent","ok","Error","data","json","main","weather","round","temp","mapWeatherToEmoji","mapWeatherToTheme","toLocaleTimeString","hour","minute","err","watch","immediate","textColorStyle","theme","color","currentUser","newCity","currentIndex","showSettings","errorMsg","bgThemes","themeColors","currentBgIndex","isLoading","hovered","hideUI","nextColor","nextIndex","STORAGE_KEY","cities","loadCities","stored","saveCities","deep","toggleSettings","prevCity","nextCity","removeCity","index","splice","isValidInput","trimmed","trim","addCity","includes","valid","validateCity","push","likedFacts","trashBin","likedCacheKey","loadFromStorage","likedKey","trashKey","likedRaw","trashRaw","saveToStorage","factHistory","loadFactHistory","key","raw","saveFactHistory","widgetLocks","lock","FunFactWidget","viewMode","factList","searchKeyword","cardClass","likedFactCache","likedIndex","isLikedAnimating","likedEmojiContent","likedDisplayFact","likedReadyToRender","likeButton","isClicking","likedShowFact","fact","handleLikedNext","unseen","filter","f","canAdd","next","random","shift","pinkColors","setRandomColor","waveCircleEl","document","querySelector","style","backgroundColor","newMode","currentFact","canGoPrev","readyToRender","lastDirection","factTransitionClass","dotWindowStart","dotKeyBase","useVisibleDots","listRef","startRef","keyBaseRef","currentIndexRef","list","len","map","i","slice","idx","active","visibleDots","likeAnimating","handleLikeClick","isNowLiked","isLiked","likeFact","navClickAnim","triggerNavAnim","handleNext","nextFact","handlePrev","prevFact","displayFact","isAnimating","emojiContent","startAnimation","nextFactValue","updateLikedFactCache","all","recent","others","randomOne","fetchNewFact","attempts","MAX_ATTEMPTS","axios","get","text","isNextLocked","atEnd","then","indexOf","expandedIndex","currentManageTab","recoverFromTrash","toggleExpand","removeFact","removed","unshift","pop","filteredFacts","source","toLowerCase","floatingEl","mouseMoveHandler","showClickPreview","height","removeClickPreview","preview","createElement","cssText","textContent","setAttribute","appendChild","e","left","clientX","top","clientY","transform","removeChild","pendingMoveWidget","widgets","expanded","pendingPlacement","emit","__emit","scrollRef","sortedWidgetList","indicatorRef","lightState","reactive","on","triggerLight","turnOffLight","toggleExpanded","nextTick","scrollTop","warn","maskState","loggedIn","isExpanded","gearRotationClass","gearKey","newState","oldState","direction","maskAnimationState","isMaskAnimating","handleMoveSelf","self","find","widgetList","Object","entries","widgetMetadata","meta","hidden","categorizedWidgets","currentCategory","sort","a","b","categoryOrder","category","forEach","widget","categoryNames","function","system","debug","createWidget","x","y","resolvedSizeKey","sizeOptions","size","renderKey","handleAddClick","newWidget","handleBeforeLeave","el","classList","contains","remove","animation","offsetWidth","wrapperState","innerState","openPanel","closePanel","cancelPreview","val","stickerEmojis","stickers","generateStickers","count","result","usedEmojis","Set","localSafeMargin","areas","topStart","leftStart","emojiPool","area","areaWidth","areaHeight","innerTopMin","innerTopMax","innerLeftMin","innerLeftMax","availableEmojis","has","emoji","add","rotate","toolbarStickers","generateToolbarStickers","positions","scale","pos","cleanLayout","parsed","getExportData","userId","safeGet","fallback","currentNickname","layoutCache","large","medium","small","weatherCities","textEditorFiles","trashFiles","applyImportData","importUserId","assign","accounts","layoutData","Array","isArray","dispatchEvent","Event","fileInput","handleExport","cache","blob","Blob","url","URL","createObjectURL","link","download","click","revokeObjectURL","triggerImport","handleImport","event","file","target","files","reader","FileReader","onload","alert","readAsText","showIntro","terminalRef","triggerIntro","step","flashInterval","icons","folderClosed","iconFolderClosed","explorer","iconExplorer","folderOpen","iconFolderOpen","notepad","iconNotepad","recycleBin","iconRecycleBin","windows","iconWindows","wm","iconWm","wordpad","iconWordpad","trust","iconTrust","accessibility","iconAccessibility","appWizard","iconAppWizard","outlook","iconOutlook","trustRestrict","iconTrustRestrict","windowsAlt","iconWindowsAlt","writeFile","iconWriteFile","executable","iconExecutable","joystick","iconJoystick","search","iconSearch","play","iconPlay","activeIndieFiles","fallbackUrl","currentView","newTitle","newContent","selectedIndex","isEditing","isTrashMode","searchQuery","showColorPicker","colors","editorRef","contentLength","currentColor","isBold","isItalic","savedFiles","recoverMode","deleteMode","resetEditorState","innerHTML","openEditor","editFile","title","content","onInput","getSafeUserId","STORAGE_TRASH_KEY","loadFiles","saveFiles","loadTrash","saveTrash","saveFile","html","plainText","innerText","baseTitle","endsWith","original","existingTitles","nameWithoutExt","replace","nanoid","openSaved","goBack","goBackToMyFiles","toggleBold","focus","execCommand","requestAnimationFrame","queryCommandState","toggleItalic","execColor","toggleColorPicker","filteredFiles","query","toggleTrashMode","moveToTrash","handleTrashFileClick","ext","existing","toggleDeleteMode","safeUpdateEasterEggState","toggleRecoverMode","isPinned","fileId","some","spawnIndieWidget","widgetId","watchEffect","currentFile","easterEggSequence","showEasterEggButton","modeClicked","pattern","join","primaryUrl","audioRef","Audio","togglePlay","paused","currentTime","src","load","safeUserId","toggleSize","nextSizeKey","match","delete","widgetRegistry","PomodoroWidget","TestWidget","LoginWidget","WeatherWidget","WidgetSelectorWidget","TextEditorWidget","IndieTextWidget","ImportExportWidget","useGridPositioning","columns","rows","cellSize","cellGap","_cellSize","toRef","_cellGap","getRect","highlightIndices","previewPlacement","set","validWidgets","currentColumns","currentRows","boardRef","boardWidth","snapToBounds","maxX","maxY","min","checkOverlap","excludeId","findIndex","wgt","withinX","withinY","placeWidget","payload","pointerX","pointerY","snapped","isLoginOrSelector","existingWidgetIndex","targetIndex","overlapIndex","handleMouseMove","rect","getBoundingClientRect","activeData","handleMouseLeave","handleClickMove","handleGridClick","currentTarget","previewBoxStyle","px","py","handleResizeWidget","nextSize","isOutOfBounds","handleRequestMove","__default__","provide","pegboardRef","windowWidth","innerWidth","currentLayout","deleteWidget","getDefaultLayout","storageKey","isImportingLayout","newVal","handleImportData","updateWidth","newsList","selectedCategory","currentPage","itemsPerPage","minYear","maxYear","getFullYear","startYear","endYear","years","n","date","categories","from","filteredNews","item","year","matchesSearch","field","matchesCategory","matchesYear","totalPages","ceil","paginatedNews","goToPage","page","resetFilters","firstName","lastName","selectedImage","fullName","this","imageMap","mountain","ocean","routes","path","component","Dashboard","Stage1","children","LegacyHome","News","About","router","createRouter","history","createWebHashHistory","storedUser","storedNickname","removeItem","install","app","username","mounted","robcoCursor","btoa","cursor","unmounted","applyHover","background","applyActive","boxShadow","resetStyle","__rubberEvents","createApp","App","use","FloatingVue","mount","directive","terminalCursor","rubberButton","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","every","r","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","bind","__webpack_exports__"],"sourceRoot":""}